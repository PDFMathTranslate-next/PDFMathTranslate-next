<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="PDF scientific paper translation and bilingual comparison."><meta name=author content=awwaawwa><link rel=canonical href=https://pdf2zh-next.com/zh/advanced/API/python.html><link rel=prev href=../../supported_languages.html><link rel=next href=../../FAQ.html><link rel=alternate href=../../../advanced/API/python.html hreflang=en><link rel=alternate href=python.html hreflang=zh><link rel=alternate href=../../../zh_TW/advanced/API/python.html hreflang=zh_TW><link rel=alternate href=../../../ja/advanced/API/python.html hreflang=ja><link rel=alternate href=../../../ko/advanced/API/python.html hreflang=ko><link rel=alternate href=../../../fr/advanced/API/python.html hreflang=fr><link rel=alternate href=../../../de/advanced/API/python.html hreflang=de><link rel=alternate href=../../../es/advanced/API/python.html hreflang=es><link rel=alternate href=../../../ru/advanced/API/python.html hreflang=ru><link rel=alternate href=../../../it/advanced/API/python.html hreflang=it><link rel=alternate href=../../../pt/advanced/API/python.html hreflang=pt><link rel=icon href=../../../images/logo_photo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>API - PDFMathTranslate</title><link rel=stylesheet href=../../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Red Hat Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#output-language class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=PDFMathTranslate class="md-header__button md-logo" aria-label=PDFMathTranslate data-md-component=logo> <img src=../../../images/logo_photo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PDFMathTranslate </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=pink data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label=选择当前语言> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../../../advanced/API/python.html hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=python.html hreflang=zh class=md-select__link> 简体中文 </a> </li> <li class=md-select__item> <a href=../../../zh_TW/advanced/API/python.html hreflang=zh_TW class=md-select__link> 繁體中文 </a> </li> <li class=md-select__item> <a href=../../../ja/advanced/API/python.html hreflang=ja class=md-select__link> 日本語 </a> </li> <li class=md-select__item> <a href=../../../ko/advanced/API/python.html hreflang=ko class=md-select__link> 한국어 </a> </li> <li class=md-select__item> <a href=../../../fr/advanced/API/python.html hreflang=fr class=md-select__link> Français </a> </li> <li class=md-select__item> <a href=../../../de/advanced/API/python.html hreflang=de class=md-select__link> Deutsch </a> </li> <li class=md-select__item> <a href=../../../es/advanced/API/python.html hreflang=es class=md-select__link> Español </a> </li> <li class=md-select__item> <a href=../../../ru/advanced/API/python.html hreflang=ru class=md-select__link> Русский </a> </li> <li class=md-select__item> <a href=../../../it/advanced/API/python.html hreflang=it class=md-select__link> Italiano </a> </li> <li class=md-select__item> <a href=../../../pt/advanced/API/python.html hreflang=pt class=md-select__link> Português </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> PDFMathTranslate/PDFMathTranslate-next </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../getting-started/getting-started.html class=md-tabs__link> 开始使用 </a> </li> <li class=md-tabs__item> <a href=../advanced.html class=md-tabs__link> 高级选项 </a> </li> <li class=md-tabs__item> <a href=../../supported_languages.html class=md-tabs__link> 支持的语言 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=python.html class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../FAQ.html class=md-tabs__link> 常见问题 </a> </li> <li class=md-tabs__item> <a href=../../community/Contribution-Guide.html class=md-tabs__link> 社区 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=PDFMathTranslate class="md-nav__button md-logo" aria-label=PDFMathTranslate data-md-component=logo> <img src=../../../images/logo_photo.svg alt=logo> </a> PDFMathTranslate </label> <div class=md-nav__source> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> PDFMathTranslate/PDFMathTranslate-next </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 开始使用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 开始使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/getting-started.html class=md-nav__link> <span class=md-ellipsis> 快速开始 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 如何安装 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 如何安装 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_winexe.html class=md-nav__link> <span class=md-ellipsis> Windows EXE </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_docker.html class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_uv.html class=md-nav__link> <span class=md-ellipsis> UV </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 如何使用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 如何使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/USAGE_commandline.html class=md-nav__link> <span class=md-ellipsis> 命令行 </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/USAGE_webui.html class=md-nav__link> <span class=md-ellipsis> WebUI </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/guaguastandup/zotero-pdf2zh class=md-nav__link> <span class=md-ellipsis> guaguastandup/zotero-pdf2zh </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> 高级选项 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 高级选项 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../advanced.html class=md-nav__link> <span class=md-ellipsis> 高级选项 </span> </a> </li> <li class=md-nav__item> <a href=../Language-Codes.html class=md-nav__link> <span class=md-ellipsis> 语言代码 </span> </a> </li> <li class=md-nav__item> <a href=../Documentation-of-Translation-Services.html class=md-nav__link> <span class=md-ellipsis> 翻译服务文档 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Translation Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Translation Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../TranslationServices/Aliyun.html class=md-nav__link> <span class=md-ellipsis> 阿里云 </span> </a> </li> <li class=md-nav__item> <a href=../TranslationServices/SiliconFlow.html class=md-nav__link> <span class=md-ellipsis> 硅基流动 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../supported_languages.html class=md-nav__link> <span class=md-ellipsis> 支持的语言 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=python.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> API </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#output-language class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation-result class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 支持的语言 </span> </a> </li> <li class=md-nav__item> <a href=#description class=md-nav__link> <span class=md-ellipsis> Description </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#returns class=md-nav__link> <span class=md-ellipsis> Returns </span> </a> </li> <li class=md-nav__item> <a href=#example-usage class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#notes class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#output-language_1 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#what-youll-need class=md-nav__link> <span class=md-ellipsis> What You'll Need </span> </a> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 所需准备 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 下一步 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_1 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> <nav class=md-nav aria-label="TRANSLATION RESULT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#constructor class=md-nav__link> <span class=md-ellipsis> Constructor </span> </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> <span class=md-ellipsis> Methods </span> </a> <nav class=md-nav aria-label=Methods> <ul class=md-nav__list> <li class=md-nav__item> <a href=#signdata-string-string class=md-nav__link> <span class=md-ellipsis> sign(data: string): string </span> </a> </li> <li class=md-nav__item> <a href=#verifydata-string-signature-string-boolean class=md-nav__link> <span class=md-ellipsis> verify(data: string, signature: string): boolean </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#original-text class=md-nav__link> <span class=md-ellipsis> ORIGINAL TEXT </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 签名 </span> </a> <nav class=md-nav aria-label=签名> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 构造函数 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 方法 </span> </a> <nav class=md-nav aria-label=方法> <ul class=md-nav__list> <li class=md-nav__item> <a href=#signdata-string-string_1 class=md-nav__link> <span class=md-ellipsis> sign(data: string): string </span> </a> </li> <li class=md-nav__item> <a href=#verifydata-string-signature-string-boolean_1 class=md-nav__link> <span class=md-ellipsis> verify(data: string, signature: string): boolean </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#event-types class=md-nav__link> <span class=md-ellipsis> Event Types </span> </a> <nav class=md-nav aria-label="Event Types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#progress-event class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-usage_1 class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#notes_1 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation_1 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 事件类型 </span> </a> <nav class=md-nav aria-label=事件类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 注意 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_2 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation_2 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> <nav class=md-nav aria-label=TRANSLATION> <ul class=md-nav__list> <li class=md-nav__item> <a href=#event-types_1 class=md-nav__link> <span class=md-ellipsis> Event Types </span> </a> </li> <li class=md-nav__item> <a href=#event-data class=md-nav__link> <span class=md-ellipsis> Event Data </span> </a> <nav class=md-nav aria-label="Event Data"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#progress-event_1 class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event_1 class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event_1 class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event_1 class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#event-stream-format class=md-nav__link> <span class=md-ellipsis> Event Stream Format </span> </a> </li> <li class=md-nav__item> <a href=#client-implementation class=md-nav__link> <span class=md-ellipsis> Client Implementation </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=#completion class=md-nav__link> <span class=md-ellipsis> Completion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#output-language_2 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_3 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 事件流协议 </span> </a> <nav class=md-nav aria-label=事件流协议> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 事件类型 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 事件数据 </span> </a> <nav class=md-nav aria-label=事件数据> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 事件流格式 </span> </a> </li> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 客户端实现 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 错误处理 </span> </a> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 完成 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#progress-event_2 class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event_2 class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event_2 class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event_2 class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> <li class=md-nav__item> <a href=#example-usage_2 class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#output-language_3 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_4 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> <li class=md-nav__item> <a href=#_31 class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> <nav class=md-nav aria-label=使用示例> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-rectangle-event-shape class=md-nav__link> <span class=md-ellipsis> 1. Rectangle Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#2-circular-event-shape class=md-nav__link> <span class=md-ellipsis> 2. Circular Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#3-elliptical-event-shape class=md-nav__link> <span class=md-ellipsis> 3. Elliptical Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#4-custom-polygon-event-shape class=md-nav__link> <span class=md-ellipsis> 4. Custom Polygon Event Shape </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#progress-event_3 class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event_3 class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event_3 class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event_3 class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> <li class=md-nav__item> <a href=#example-usage_3 class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#output-language_4 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_5 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_32 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_33 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_34 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_35 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> <li class=md-nav__item> <a href=#_36 class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> </li> <li class=md-nav__item> <a href=#output-language_5 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_6 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#introduction-this-guide-will-help-you-get-started-with-the-pdf2zh-python-package-well-cover-the-installation-process-and-basic-usage-to-get-you-up-and-running-quickly class=md-nav__link> <span class=md-ellipsis> Introduction: This guide will help you get started with the pdf2zh Python package. We'll cover the installation process and basic usage to get you up and running quickly. </span> </a> </li> <li class=md-nav__item> <a href=#what-is-pdf2zh class=md-nav__link> <span class=md-ellipsis> What is pdf2zh? </span> </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#supported-providers class=md-nav__link> <span class=md-ellipsis> Supported Providers </span> </a> </li> <li class=md-nav__item> <a href=#next-steps_1 class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=#need-help class=md-nav__link> <span class=md-ellipsis> Need Help? </span> </a> </li> <li class=md-nav__item> <a href=#translation_7 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_37 class=md-nav__link> <span class=md-ellipsis> 简介 </span> </a> </li> <li class=md-nav__item> <a href=#pdf2zh class=md-nav__link> <span class=md-ellipsis> 什么是 pdf2zh？ </span> </a> </li> <li class=md-nav__item> <a href=#_38 class=md-nav__link> <span class=md-ellipsis> 安装 </span> </a> </li> <li class=md-nav__item> <a href=#_39 class=md-nav__link> <span class=md-ellipsis> 快速开始 </span> </a> </li> <li class=md-nav__item> <a href=#_40 class=md-nav__link> <span class=md-ellipsis> 配置 </span> </a> </li> <li class=md-nav__item> <a href=#_41 class=md-nav__link> <span class=md-ellipsis> 支持的提供商 </span> </a> </li> <li class=md-nav__item> <a href=#_42 class=md-nav__link> <span class=md-ellipsis> 下一步 </span> </a> </li> <li class=md-nav__item> <a href=#_43 class=md-nav__link> <span class=md-ellipsis> 需要帮助？ </span> </a> </li> <li class=md-nav__item> <a href=#translation_8 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation_9 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#minimal-usage-example-sync class=md-nav__link> <span class=md-ellipsis> Minimal Usage Example (Sync) </span> </a> </li> <li class=md-nav__item> <a href=#key-parameters class=md-nav__link> <span class=md-ellipsis> Key Parameters </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_3 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_44 class=md-nav__link> <span class=md-ellipsis> 最小使用示例（异步） </span> </a> </li> <li class=md-nav__item> <a href=#_45 class=md-nav__link> <span class=md-ellipsis> 最小使用示例（同步） </span> </a> </li> <li class=md-nav__item> <a href=#_46 class=md-nav__link> <span class=md-ellipsis> 关键参数 </span> </a> <nav class=md-nav aria-label=关键参数> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-cancellation-policy class=md-nav__link> <span class=md-ellipsis> 1. Cancellation Policy </span> </a> </li> <li class=md-nav__item> <a href=#2-refund-policy class=md-nav__link> <span class=md-ellipsis> 2. Refund Policy </span> </a> </li> <li class=md-nav__item> <a href=#3-contact-us class=md-nav__link> <span class=md-ellipsis> 3. Contact Us </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation_10 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_47 class=md-nav__link> <span class=md-ellipsis> 取消与退款政策 </span> </a> <nav class=md-nav aria-label=取消与退款政策> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 1. 取消政策 </span> </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> <span class=md-ellipsis> 2. 退款政策 </span> </a> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> <span class=md-ellipsis> 3. 联系我们 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_4 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> <nav class=md-nav aria-label="TRANSLATION RESULT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-rectangle-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 1. Rectangle Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#2-circular-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 2. Circular Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#3-elliptical-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 3. Elliptical Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#4-custom-polygon-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 4. Custom Polygon Event Shape </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation_11 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation_12 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation_13 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translated-text class=md-nav__link> <span class=md-ellipsis> TRANSLATED TEXT </span> </a> </li> <li class=md-nav__item> <a href=#_48 class=md-nav__link> <span class=md-ellipsis> 注意事项与最佳实践 </span> </a> </li> <li class=md-nav__item> <a href=#-help class=md-nav__link> <span class=md-ellipsis> - 使用 --help 查看所有可用选项。 </span> </a> <nav class=md-nav aria-label="- 使用 --help 查看所有可用选项。"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#translation_14 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../FAQ.html class=md-nav__link> <span class=md-ellipsis> 常见问题 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> 社区 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> 社区 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../community/Contribution-Guide.html class=md-nav__link> <span class=md-ellipsis> Contribution-Guide </span> </a> </li> <li class=md-nav__item> <a href=../../community/Translate-Contribution-Guide.html class=md-nav__link> <span class=md-ellipsis> 文档翻译贡献指南 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#output-language class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation-result class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 支持的语言 </span> </a> </li> <li class=md-nav__item> <a href=#description class=md-nav__link> <span class=md-ellipsis> Description </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#returns class=md-nav__link> <span class=md-ellipsis> Returns </span> </a> </li> <li class=md-nav__item> <a href=#example-usage class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#notes class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#output-language_1 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#what-youll-need class=md-nav__link> <span class=md-ellipsis> What You'll Need </span> </a> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 所需准备 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 下一步 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_1 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> <nav class=md-nav aria-label="TRANSLATION RESULT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#constructor class=md-nav__link> <span class=md-ellipsis> Constructor </span> </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> <span class=md-ellipsis> Methods </span> </a> <nav class=md-nav aria-label=Methods> <ul class=md-nav__list> <li class=md-nav__item> <a href=#signdata-string-string class=md-nav__link> <span class=md-ellipsis> sign(data: string): string </span> </a> </li> <li class=md-nav__item> <a href=#verifydata-string-signature-string-boolean class=md-nav__link> <span class=md-ellipsis> verify(data: string, signature: string): boolean </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#original-text class=md-nav__link> <span class=md-ellipsis> ORIGINAL TEXT </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 签名 </span> </a> <nav class=md-nav aria-label=签名> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 构造函数 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 方法 </span> </a> <nav class=md-nav aria-label=方法> <ul class=md-nav__list> <li class=md-nav__item> <a href=#signdata-string-string_1 class=md-nav__link> <span class=md-ellipsis> sign(data: string): string </span> </a> </li> <li class=md-nav__item> <a href=#verifydata-string-signature-string-boolean_1 class=md-nav__link> <span class=md-ellipsis> verify(data: string, signature: string): boolean </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#event-types class=md-nav__link> <span class=md-ellipsis> Event Types </span> </a> <nav class=md-nav aria-label="Event Types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#progress-event class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-usage_1 class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#notes_1 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation_1 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 事件类型 </span> </a> <nav class=md-nav aria-label=事件类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 注意 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_2 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation_2 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> <nav class=md-nav aria-label=TRANSLATION> <ul class=md-nav__list> <li class=md-nav__item> <a href=#event-types_1 class=md-nav__link> <span class=md-ellipsis> Event Types </span> </a> </li> <li class=md-nav__item> <a href=#event-data class=md-nav__link> <span class=md-ellipsis> Event Data </span> </a> <nav class=md-nav aria-label="Event Data"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#progress-event_1 class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event_1 class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event_1 class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event_1 class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#event-stream-format class=md-nav__link> <span class=md-ellipsis> Event Stream Format </span> </a> </li> <li class=md-nav__item> <a href=#client-implementation class=md-nav__link> <span class=md-ellipsis> Client Implementation </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=#completion class=md-nav__link> <span class=md-ellipsis> Completion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#output-language_2 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_3 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 事件流协议 </span> </a> <nav class=md-nav aria-label=事件流协议> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 事件类型 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 事件数据 </span> </a> <nav class=md-nav aria-label=事件数据> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 事件流格式 </span> </a> </li> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 客户端实现 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 错误处理 </span> </a> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 完成 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#progress-event_2 class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event_2 class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event_2 class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event_2 class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> <li class=md-nav__item> <a href=#example-usage_2 class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#output-language_3 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_4 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> <li class=md-nav__item> <a href=#_31 class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> <nav class=md-nav aria-label=使用示例> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-rectangle-event-shape class=md-nav__link> <span class=md-ellipsis> 1. Rectangle Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#2-circular-event-shape class=md-nav__link> <span class=md-ellipsis> 2. Circular Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#3-elliptical-event-shape class=md-nav__link> <span class=md-ellipsis> 3. Elliptical Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#4-custom-polygon-event-shape class=md-nav__link> <span class=md-ellipsis> 4. Custom Polygon Event Shape </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#progress-event_3 class=md-nav__link> <span class=md-ellipsis> Progress Event </span> </a> </li> <li class=md-nav__item> <a href=#result-event_3 class=md-nav__link> <span class=md-ellipsis> Result Event </span> </a> </li> <li class=md-nav__item> <a href=#error-event_3 class=md-nav__link> <span class=md-ellipsis> Error Event </span> </a> </li> <li class=md-nav__item> <a href=#done-event_3 class=md-nav__link> <span class=md-ellipsis> Done Event </span> </a> </li> <li class=md-nav__item> <a href=#example-usage_3 class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#output-language_4 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_5 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_32 class=md-nav__link> <span class=md-ellipsis> 进度事件 </span> </a> </li> <li class=md-nav__item> <a href=#_33 class=md-nav__link> <span class=md-ellipsis> 结果事件 </span> </a> </li> <li class=md-nav__item> <a href=#_34 class=md-nav__link> <span class=md-ellipsis> 错误事件 </span> </a> </li> <li class=md-nav__item> <a href=#_35 class=md-nav__link> <span class=md-ellipsis> 完成事件 </span> </a> </li> <li class=md-nav__item> <a href=#_36 class=md-nav__link> <span class=md-ellipsis> 使用示例 </span> </a> </li> <li class=md-nav__item> <a href=#output-language_5 class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> <li class=md-nav__item> <a href=#translation_6 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#introduction-this-guide-will-help-you-get-started-with-the-pdf2zh-python-package-well-cover-the-installation-process-and-basic-usage-to-get-you-up-and-running-quickly class=md-nav__link> <span class=md-ellipsis> Introduction: This guide will help you get started with the pdf2zh Python package. We'll cover the installation process and basic usage to get you up and running quickly. </span> </a> </li> <li class=md-nav__item> <a href=#what-is-pdf2zh class=md-nav__link> <span class=md-ellipsis> What is pdf2zh? </span> </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#supported-providers class=md-nav__link> <span class=md-ellipsis> Supported Providers </span> </a> </li> <li class=md-nav__item> <a href=#next-steps_1 class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=#need-help class=md-nav__link> <span class=md-ellipsis> Need Help? </span> </a> </li> <li class=md-nav__item> <a href=#translation_7 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_37 class=md-nav__link> <span class=md-ellipsis> 简介 </span> </a> </li> <li class=md-nav__item> <a href=#pdf2zh class=md-nav__link> <span class=md-ellipsis> 什么是 pdf2zh？ </span> </a> </li> <li class=md-nav__item> <a href=#_38 class=md-nav__link> <span class=md-ellipsis> 安装 </span> </a> </li> <li class=md-nav__item> <a href=#_39 class=md-nav__link> <span class=md-ellipsis> 快速开始 </span> </a> </li> <li class=md-nav__item> <a href=#_40 class=md-nav__link> <span class=md-ellipsis> 配置 </span> </a> </li> <li class=md-nav__item> <a href=#_41 class=md-nav__link> <span class=md-ellipsis> 支持的提供商 </span> </a> </li> <li class=md-nav__item> <a href=#_42 class=md-nav__link> <span class=md-ellipsis> 下一步 </span> </a> </li> <li class=md-nav__item> <a href=#_43 class=md-nav__link> <span class=md-ellipsis> 需要帮助？ </span> </a> </li> <li class=md-nav__item> <a href=#translation_8 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation_9 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#minimal-usage-example-sync class=md-nav__link> <span class=md-ellipsis> Minimal Usage Example (Sync) </span> </a> </li> <li class=md-nav__item> <a href=#key-parameters class=md-nav__link> <span class=md-ellipsis> Key Parameters </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_3 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_44 class=md-nav__link> <span class=md-ellipsis> 最小使用示例（异步） </span> </a> </li> <li class=md-nav__item> <a href=#_45 class=md-nav__link> <span class=md-ellipsis> 最小使用示例（同步） </span> </a> </li> <li class=md-nav__item> <a href=#_46 class=md-nav__link> <span class=md-ellipsis> 关键参数 </span> </a> <nav class=md-nav aria-label=关键参数> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-cancellation-policy class=md-nav__link> <span class=md-ellipsis> 1. Cancellation Policy </span> </a> </li> <li class=md-nav__item> <a href=#2-refund-policy class=md-nav__link> <span class=md-ellipsis> 2. Refund Policy </span> </a> </li> <li class=md-nav__item> <a href=#3-contact-us class=md-nav__link> <span class=md-ellipsis> 3. Contact Us </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation_10 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#_47 class=md-nav__link> <span class=md-ellipsis> 取消与退款政策 </span> </a> <nav class=md-nav aria-label=取消与退款政策> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 1. 取消政策 </span> </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> <span class=md-ellipsis> 2. 退款政策 </span> </a> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> <span class=md-ellipsis> 3. 联系我们 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_4 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> <nav class=md-nav aria-label="TRANSLATION RESULT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-rectangle-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 1. Rectangle Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#2-circular-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 2. Circular Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#3-elliptical-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 3. Elliptical Event Shape </span> </a> </li> <li class=md-nav__item> <a href=#4-custom-polygon-event-shape_1 class=md-nav__link> <span class=md-ellipsis> 4. Custom Polygon Event Shape </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation_11 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation_12 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translation_13 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> <li class=md-nav__item> <a href=#translated-text class=md-nav__link> <span class=md-ellipsis> TRANSLATED TEXT </span> </a> </li> <li class=md-nav__item> <a href=#_48 class=md-nav__link> <span class=md-ellipsis> 注意事项与最佳实践 </span> </a> </li> <li class=md-nav__item> <a href=#-help class=md-nav__link> <span class=md-ellipsis> - 使用 --help 查看所有可用选项。 </span> </a> <nav class=md-nav aria-label="- 使用 --help 查看所有可用选项。"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#translation_14 class=md-nav__link> <span class=md-ellipsis> TRANSLATION </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/edit/main/docs/zh/advanced/API/python.md title=编辑此页 class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/raw/main/docs/zh/advanced/API/python.md title=查看本页的源代码 class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1>API</h1> <blockquote> <p>For more details, see our <a href=https://pdf2zh-next.com/community/COMMUNITY.html>Community</a> and <a href=https://pdf2zh-next.com/community/FAQ.html>FAQ</a> pages.</p> </blockquote> <hr> <h3 id=output-language>OUTPUT LANGUAGE</h3> <p>zh</p> <hr> <h3 id=translation>TRANSLATION</h3> <div class="admonition note"> <p class=admonition-title>Note</p> <p>本文档可能包含 AI 生成的内容。虽然我们力求准确，但仍可能存在不准确之处。请通过以下方式报告任何问题：</p> <ul> <li><a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/issues>GitHub Issues</a></li> <li>社区贡献（欢迎提交 PR！）</li> </ul> <p>更多详情，请参阅我们的 <a href=https://pdf2zh-next.com/community/COMMUNITY.html>社区</a> 和 <a href=https://pdf2zh-next.com/community/FAQ.html>常见问题</a> 页面。 - ### Supported Languages: The following languages are supported by pdf2zh. You can use the language code to specify the source or target language.</p> </div> <table> <thead> <tr> <th>Language</th> <th>Code</th> <th>Notes</th> </tr> </thead> <tbody> <tr> <td>English</td> <td><code>en</code></td> <td>-</td> </tr> <tr> <td>Simplified Chinese</td> <td><code>zh</code></td> <td>-</td> </tr> <tr> <td>Traditional Chinese</td> <td><code>zh-Hant</code></td> <td>-</td> </tr> <tr> <td>Japanese</td> <td><code>ja</code></td> <td>-</td> </tr> <tr> <td>Korean</td> <td><code>ko</code></td> <td>-</td> </tr> <tr> <td>French</td> <td><code>fr</code></td> <td>-</td> </tr> <tr> <td>German</td> <td><code>de</code></td> <td>-</td> </tr> <tr> <td>Spanish</td> <td><code>es</code></td> <td>-</td> </tr> <tr> <td>Italian</td> <td><code>it</code></td> <td>-</td> </tr> <tr> <td>Portuguese</td> <td><code>pt</code></td> <td>-</td> </tr> <tr> <td>Russian</td> <td><code>ru</code></td> <td>-</td> </tr> <tr> <td>Arabic</td> <td><code>ar</code></td> <td>-</td> </tr> <tr> <td>Hindi</td> <td><code>hi</code></td> <td>-</td> </tr> <tr> <td>Bengali</td> <td><code>bn</code></td> <td>-</td> </tr> <tr> <td>Turkish</td> <td><code>tr</code></td> <td>-</td> </tr> <tr> <td>Vietnamese</td> <td><code>vi</code></td> <td>-</td> </tr> <tr> <td>Thai</td> <td><code>th</code></td> <td>-</td> </tr> <tr> <td>Dutch</td> <td><code>nl</code></td> <td>-</td> </tr> <tr> <td>Polish</td> <td><code>pl</code></td> <td>-</td> </tr> <tr> <td>Ukrainian</td> <td><code>uk</code></td> <td>-</td> </tr> <tr> <td>Greek</td> <td><code>el</code></td> <td>-</td> </tr> <tr> <td>Czech</td> <td><code>cs</code></td> <td>-</td> </tr> <tr> <td>Swedish</td> <td><code>sv</code></td> <td>-</td> </tr> <tr> <td>Danish</td> <td><code>da</code></td> <td>-</td> </tr> <tr> <td>Finnish</td> <td><code>fi</code></td> <td>-</td> </tr> <tr> <td>Norwegian</td> <td><code>no</code></td> <td>-</td> </tr> <tr> <td>Hungarian</td> <td><code>hu</code></td> <td>-</td> </tr> <tr> <td>Romanian</td> <td><code>ro</code></td> <td>-</td> </tr> <tr> <td>Bulgarian</td> <td><code>bg</code></td> <td>-</td> </tr> <tr> <td>Croatian</td> <td><code>hr</code></td> <td>-</td> </tr> <tr> <td>Slovak</td> <td><code>sk</code></td> <td>-</td> </tr> <tr> <td>Slovenian</td> <td><code>sl</code></td> <td>-</td> </tr> <tr> <td>Lithuanian</td> <td><code>lt</code></td> <td>-</td> </tr> <tr> <td>Latvian</td> <td><code>lv</code></td> <td>-</td> </tr> <tr> <td>Estonian</td> <td><code>et</code></td> <td>-</td> </tr> <tr> <td>Maltese</td> <td><code>mt</code></td> <td>-</td> </tr> <tr> <td>Irish</td> <td><code>ga</code></td> <td>-</td> </tr> <tr> <td>Welsh</td> <td><code>cy</code></td> <td>-</td> </tr> <tr> <td>Basque</td> <td><code>eu</code></td> <td>-</td> </tr> <tr> <td>Catalan</td> <td><code>ca</code></td> <td>-</td> </tr> <tr> <td>Galician</td> <td><code>gl</code></td> <td>-</td> </tr> <tr> <td>Icelandic</td> <td><code>is</code></td> <td>-</td> </tr> <tr> <td>Albanian</td> <td><code>sq</code></td> <td>-</td> </tr> <tr> <td>Serbian</td> <td><code>sr</code></td> <td>-</td> </tr> <tr> <td>Macedonian</td> <td><code>mk</code></td> <td>-</td> </tr> <tr> <td>Bosnian</td> <td><code>bs</code></td> <td>-</td> </tr> <tr> <td>Montenegrin</td> <td><code>cnr</code></td> <td>-</td> </tr> <tr> <td>Belarusian</td> <td><code>be</code></td> <td>-</td> </tr> <tr> <td>Armenian</td> <td><code>hy</code></td> <td>-</td> </tr> <tr> <td>Georgian</td> <td><code>ka</code></td> <td>-</td> </tr> <tr> <td>Azerbaijani</td> <td><code>az</code></td> <td>-</td> </tr> <tr> <td>Kazakh</td> <td><code>kk</code></td> <td>-</td> </tr> <tr> <td>Uzbek</td> <td><code>uz</code></td> <td>-</td> </tr> <tr> <td>Turkmen</td> <td><code>tk</code></td> <td>-</td> </tr> <tr> <td>Kyrgyz</td> <td><code>ky</code></td> <td>-</td> </tr> <tr> <td>Tajik</td> <td><code>tg</code></td> <td>-</td> </tr> <tr> <td>Persian</td> <td><code>fa</code></td> <td>-</td> </tr> <tr> <td>Pashto</td> <td><code>ps</code></td> <td>-</td> </tr> <tr> <td>Kurdish</td> <td><code>ku</code></td> <td>-</td> </tr> <tr> <td>Hebrew</td> <td><code>he</code></td> <td>-</td> </tr> <tr> <td>Yiddish</td> <td><code>yi</code></td> <td>-</td> </tr> <tr> <td>Amharic</td> <td><code>am</code></td> <td>-</td> </tr> <tr> <td>Tigrinya</td> <td><code>ti</code></td> <td>-</td> </tr> <tr> <td>Oromo</td> <td><code>om</code></td> <td>-</td> </tr> <tr> <td>Somali</td> <td><code>so</code></td> <td>-</td> </tr> <tr> <td>Swahili</td> <td><code>sw</code></td> <td>-</td> </tr> <tr> <td>Hausa</td> <td><code>ha</code></td> <td>-</td> </tr> <tr> <td>Yoruba</td> <td><code>yo</code></td> <td>-</td> </tr> <tr> <td>Igbo</td> <td><code>ig</code></td> <td>-</td> </tr> <tr> <td>Zulu</td> <td><code>zu</code></td> <td>-</td> </tr> <tr> <td>Afrikaans</td> <td><code>af</code></td> <td>-</td> </tr> <tr> <td>Malay</td> <td><code>ms</code></td> <td>-</td> </tr> <tr> <td>Indonesian</td> <td><code>id</code></td> <td>-</td> </tr> <tr> <td>Filipino</td> <td><code>tl</code></td> <td>-</td> </tr> <tr> <td>Maori</td> <td><code>mi</code></td> <td>-</td> </tr> <tr> <td>Hawaiian</td> <td><code>haw</code></td> <td>-</td> </tr> <tr> <td>Samoan</td> <td><code>sm</code></td> <td>-</td> </tr> <tr> <td>Tongan</td> <td><code>to</code></td> <td>-</td> </tr> <tr> <td>Fijian</td> <td><code>fj</code></td> <td>-</td> </tr> <tr> <td>Malayalam</td> <td><code>ml</code></td> <td>-</td> </tr> <tr> <td>Tamil</td> <td><code>ta</code></td> <td>-</td> </tr> <tr> <td>Telugu</td> <td><code>te</code></td> <td>-</td> </tr> <tr> <td>Kannada</td> <td><code>kn</code></td> <td>-</td> </tr> <tr> <td>Marathi</td> <td><code>mr</code></td> <td>-</td> </tr> <tr> <td>Gujarati</td> <td><code>gu</code></td> <td>-</td> </tr> <tr> <td>Punjabi</td> <td><code>pa</code></td> <td>-</td> </tr> <tr> <td>Nepali</td> <td><code>ne</code></td> <td>-</td> </tr> <tr> <td>Sinhala</td> <td><code>si</code></td> <td>-</td> </tr> <tr> <td>Burmese</td> <td><code>my</code></td> <td>-</td> </tr> <tr> <td>Khmer</td> <td><code>km</code></td> <td>-</td> </tr> <tr> <td>Lao</td> <td><code>lo</code></td> <td>-</td> </tr> <tr> <td>Mongolian</td> <td><code>mn</code></td> <td>-</td> </tr> <tr> <td>Tibetan</td> <td><code>bo</code></td> <td>-</td> </tr> <tr> <td>Uyghur</td> <td><code>ug</code></td> <td>-</td> </tr> <tr> <td>Zhuang</td> <td><code>za</code></td> <td>-</td> </tr> <tr> <td>Other languages</td> <td>-</td> <td>Please refer to the translator service documentation for supported languages.</td> </tr> </tbody> </table> <hr> <h3 id=translation-result>TRANSLATION RESULT</h3> <h3 id=_1>支持的语言</h3> <p>pdf2zh 支持以下语言。您可以使用语言代码指定源语言或目标语言。</p> <table> <thead> <tr> <th>语言</th> <th>代码</th> <th>备注</th> </tr> </thead> <tbody> <tr> <td>英语</td> <td><code>en</code></td> <td>-</td> </tr> <tr> <td>简体中文</td> <td><code>zh</code></td> <td>-</td> </tr> <tr> <td>繁体中文</td> <td><code>zh-Hant</code></td> <td>-</td> </tr> <tr> <td>日语</td> <td><code>ja</code></td> <td>-</td> </tr> <tr> <td>韩语</td> <td><code>ko</code></td> <td>-</td> </tr> <tr> <td>法语</td> <td><code>fr</code></td> <td>-</td> </tr> <tr> <td>德语</td> <td><code>de</code></td> <td>-</td> </tr> <tr> <td>西班牙语</td> <td><code>es</code></td> <td>-</td> </tr> <tr> <td>意大利语</td> <td><code>it</code></td> <td>-</td> </tr> <tr> <td>葡萄牙语</td> <td><code>pt</code></td> <td>-</td> </tr> <tr> <td>俄语</td> <td><code>ru</code></td> <td>-</td> </tr> <tr> <td>阿拉伯语</td> <td><code>ar</code></td> <td>-</td> </tr> <tr> <td>印地语</td> <td><code>hi</code></td> <td>-</td> </tr> <tr> <td>孟加拉语</td> <td><code>bn</code></td> <td>-</td> </tr> <tr> <td>土耳其语</td> <td><code>tr</code></td> <td>-</td> </tr> <tr> <td>越南语</td> <td><code>vi</code></td> <td>-</td> </tr> <tr> <td>泰语</td> <td><code>th</code></td> <td>-</td> </tr> <tr> <td>荷兰语</td> <td><code>nl</code></td> <td>-</td> </tr> <tr> <td>波兰语</td> <td><code>pl</code></td> <td>-</td> </tr> <tr> <td>乌克兰语</td> <td><code>uk</code></td> <td>-</td> </tr> <tr> <td>希腊语</td> <td><code>el</code></td> <td>-</td> </tr> <tr> <td>捷克语</td> <td><code>cs</code></td> <td>-</td> </tr> <tr> <td>瑞典语</td> <td><code>sv</code></td> <td>-</td> </tr> <tr> <td>丹麦语</td> <td><code>da</code></td> <td>-</td> </tr> <tr> <td>芬兰语</td> <td><code>fi</code></td> <td>-</td> </tr> <tr> <td>挪威语</td> <td><code>no</code></td> <td>-</td> </tr> <tr> <td>匈牙利语</td> <td><code>hu</code></td> <td>-</td> </tr> <tr> <td>罗马尼亚语</td> <td><code>ro</code></td> <td>-</td> </tr> <tr> <td>保加利亚语</td> <td><code>bg</code></td> <td>-</td> </tr> <tr> <td>克罗地亚语</td> <td><code>hr</code></td> <td>-</td> </tr> <tr> <td>斯洛伐克语</td> <td><code>sk</code></td> <td>-</td> </tr> <tr> <td>斯洛文尼亚语</td> <td><code>sl</code></td> <td>-</td> </tr> <tr> <td>立陶宛语</td> <td><code>lt</code></td> <td>-</td> </tr> <tr> <td>拉脱维亚语</td> <td><code>lv</code></td> <td>-</td> </tr> <tr> <td>爱沙尼亚语</td> <td><code>et</code></td> <td>-</td> </tr> <tr> <td>马耳他语</td> <td><code>mt</code></td> <td>-</td> </tr> <tr> <td>爱尔兰语</td> <td><code>ga</code></td> <td>-</td> </tr> <tr> <td>威尔士语</td> <td><code>cy</code></td> <td>-</td> </tr> <tr> <td>巴斯克语</td> <td><code>eu</code></td> <td>-</td> </tr> <tr> <td>加泰罗尼亚语</td> <td><code>ca</code></td> <td>-</td> </tr> <tr> <td>加利西亚语</td> <td><code>gl</code></td> <td>-</td> </tr> <tr> <td>冰岛语</td> <td><code>is</code></td> <td>-</td> </tr> <tr> <td>阿尔巴尼亚语</td> <td><code>sq</code></td> <td>-</td> </tr> <tr> <td>塞尔维亚语</td> <td><code>sr</code></td> <td>-</td> </tr> <tr> <td>马其顿语</td> <td><code>mk</code></td> <td>-</td> </tr> <tr> <td>波斯尼亚语</td> <td><code>bs</code></td> <td>-</td> </tr> <tr> <td>黑山语</td> <td><code>cnr</code></td> <td>-</td> </tr> <tr> <td>白俄罗斯语</td> <td><code>be</code></td> <td>-</td> </tr> <tr> <td>亚美尼亚语</td> <td><code>hy</code></td> <td>-</td> </tr> <tr> <td>格鲁吉亚语</td> <td><code>ka</code></td> <td>-</td> </tr> <tr> <td>阿塞拜疆语</td> <td><code>az</code></td> <td>-</td> </tr> <tr> <td>哈萨克语</td> <td><code>kk</code></td> <td>-</td> </tr> <tr> <td>乌兹别克语</td> <td><code>uz</code></td> <td>-</td> </tr> <tr> <td>土库曼语</td> <td><code>tk</code></td> <td>-</td> </tr> <tr> <td>吉尔吉斯语</td> <td><code>ky</code></td> <td>-</td> </tr> <tr> <td>塔吉克语</td> <td><code>tg</code></td> <td>-</td> </tr> <tr> <td>波斯语</td> <td><code>fa</code></td> <td>-</td> </tr> <tr> <td>普什图语</td> <td><code>ps</code></td> <td>-</td> </tr> <tr> <td>库尔德语</td> <td><code>ku</code></td> <td>-</td> </tr> <tr> <td>希伯来语</td> <td><code>he</code></td> <td>-</td> </tr> <tr> <td>意第绪语</td> <td><code>yi</code></td> <td>-</td> </tr> <tr> <td>阿姆哈拉语</td> <td><code>am</code></td> <td>-</td> </tr> <tr> <td>提格里尼亚语</td> <td><code>ti</code></td> <td>-</td> </tr> <tr> <td>奥罗莫语</td> <td><code>om</code></td> <td>-</td> </tr> <tr> <td>索马里语</td> <td><code>so</code></td> <td>-</td> </tr> <tr> <td>斯瓦希里语</td> <td><code>sw</code></td> <td>-</td> </tr> <tr> <td>豪萨语</td> <td><code>ha</code></td> <td>-</td> </tr> <tr> <td>约鲁巴语</td> <td><code>yo</code></td> <td>-</td> </tr> <tr> <td>伊博语</td> <td><code>ig</code></td> <td>-</td> </tr> <tr> <td>祖鲁语</td> <td><code>zu</code></td> <td>-</td> </tr> <tr> <td>南非荷兰语</td> <td><code>af</code></td> <td>-</td> </tr> <tr> <td>马来语</td> <td><code>ms</code></td> <td>-</td> </tr> <tr> <td>印尼语</td> <td><code>id</code></td> <td>-</td> </tr> <tr> <td>菲律宾语</td> <td><code>tl</code></td> <td>-</td> </tr> <tr> <td>毛利语</td> <td><code>mi</code></td> <td>-</td> </tr> <tr> <td>夏威夷语</td> <td><code>haw</code></td> <td>-</td> </tr> <tr> <td>萨摩亚语</td> <td><code>sm</code></td> <td>-</td> </tr> <tr> <td>汤加语</td> <td><code>to</code></td> <td>-</td> </tr> <tr> <td>斐济语</td> <td><code>fj</code></td> <td>-</td> </tr> <tr> <td>马拉雅拉姆语</td> <td><code>ml</code></td> <td>-</td> </tr> <tr> <td>泰米尔语</td> <td><code>ta</code></td> <td>-</td> </tr> <tr> <td>泰卢固语</td> <td><code>te</code></td> <td>-</td> </tr> <tr> <td>卡纳达语</td> <td><code>kn</code></td> <td>-</td> </tr> <tr> <td>马拉地语</td> <td><code>mr</code></td> <td>-</td> </tr> <tr> <td>古吉拉特语</td> <td><code>gu</code></td> <td>-</td> </tr> <tr> <td>旁遮普语</td> <td><code>pa</code></td> <td>-</td> </tr> <tr> <td>尼泊尔语</td> <td><code>ne</code></td> <td>-</td> </tr> <tr> <td>僧伽罗语</td> <td><code>si</code></td> <td>-</td> </tr> <tr> <td>缅甸语</td> <td><code>my</code></td> <td>-</td> </tr> <tr> <td>高棉语</td> <td><code>km</code></td> <td>-</td> </tr> <tr> <td>老挝语</td> <td><code>lo</code></td> <td>-</td> </tr> <tr> <td>蒙古语</td> <td><code>mn</code></td> <td>-</td> </tr> <tr> <td>藏语</td> <td><code>bo</code></td> <td>-</td> </tr> <tr> <td>维吾尔语</td> <td><code>ug</code></td> <td>-</td> </tr> <tr> <td>壮语</td> <td><code>za</code></td> <td>-</td> </tr> <tr> <td>其他语言</td> <td>-</td> <td>请参阅翻译服务文档以了解支持的语言。</td> </tr> </tbody> </table> <p><strong>Module</strong>: <code>pdf2zh.api.translate</code> <strong>Function</strong>: <code>do_translate_async_stream</code></p> <h3 id=description>Description</h3> <p>This function is used to translate documents asynchronously using a streaming approach, which returns a generator that yields translated segments in real-time. It is suitable for scenarios requiring immediate feedback, such as GUI applications or real-time translation services.</p> <h3 id=parameters>Parameters</h3> <ul> <li><code>file_path</code> (str): Path to the PDF file to be translated.</li> <li><code>target_lang</code> (str, optional): Target language code. Defaults to <code>"zh"</code>.</li> <li><code>source_lang</code> (str, optional): Source language code. Defaults to <code>"en"</code>. If set to <code>None</code>, the language will be detected automatically.</li> <li><code>translator</code> (str, optional): Translator service to use. Options include <code>"openai"</code>, <code>"aliyun"</code>, <code>"siliconflow"</code>, etc. Defaults to <code>"openai"</code>.</li> <li><code>translator_config</code> (dict, optional): Configuration for the translator service. Defaults to <code>None</code>.</li> <li><code>doc_config</code> (dict, optional): Configuration for document processing. Defaults to <code>None</code>.</li> <li><code>output_path</code> (str, optional): Path to save the translated document. If not provided, the result will not be saved to a file.</li> <li><code>callback</code> (callable, optional): Callback function to handle translated segments. It should accept a dictionary with segment information.</li> </ul> <h3 id=returns>Returns</h3> <ul> <li><code>generator</code>: A generator that yields dictionaries containing translated segments. Each dictionary has the following structure: <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=p>{</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=s2>&quot;segment_index&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>           <span class=c1># Index of the segment</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=s2>&quot;source_text&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>             <span class=c1># Original text of the segment</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=s2>&quot;translated_text&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>         <span class=c1># Translated text of the segment</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=s2>&quot;status&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>                  <span class=c1># Status of the segment (&quot;pending&quot;, &quot;translating&quot;, &quot;completed&quot;, &quot;error&quot;)</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=s2>&quot;error&quot;</span><span class=p>:</span> <span class=nb>str</span> <span class=ow>or</span> <span class=kc>None</span>            <span class=c1># Error message if any</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=p>}</span>
</span></code></pre></div></li> </ul> <h3 id=example-usage>Example Usage</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.api.translate</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=c1># Translate a document and process segments in real-time</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=k>for</span> <span class=n>segment</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=n>translator</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>    <span class=n>translator_config</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;your_api_key&quot;</span><span class=p>}</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=p>):</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Segment </span><span class=si>{</span><span class=n>segment</span><span class=p>[</span><span class=s1>&#39;segment_index&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>segment</span><span class=p>[</span><span class=s1>&#39;translated_text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>    <span class=k>if</span> <span class=n>segment</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>segment</span><span class=p>[</span><span class=s1>&#39;error&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=notes>Notes</h3> <ul> <li>The function processes the document in segments, allowing for real-time feedback.</li> <li>If <code>output_path</code> is provided, the translated document will be saved upon completion.</li> <li>The <code>callback</code> function can be used to handle each segment as it is translated, which is useful for updating UI elements or logging.</li> </ul> <hr> <h3 id=output-language_1>OUTPUT LANGUAGE</h3> <p>zh</p> <p>pdf2zh is a powerful tool for translating <code>PDF</code> files. It supports multiple translation services, including OpenAI, DeepSeek, Aliyun, and SiliconFlow, and allows for both online and offline processing.</p> <p>This guide will help you get started with pdf2zh. We'll cover the installation process and basic usage to get you up and running quickly.</p> <hr> <h3 id=what-youll-need>What You'll Need</h3> <ul> <li>A <code>PDF</code> file to translate</li> <li>An API key for your chosen translation service (if using online services)</li> <li>Basic familiarity with the command line</li> </ul> <hr> <h3 id=next-steps>Next Steps</h3> <ul> <li><a href=https://pdf2zh-next.com/getting-started/installation.html>Installation</a></li> <li><a href=https://pdf2zh-next.com/getting-started/USAGE_cli.html>Using Command Line</a></li> <li><a href=https://pdf2zh-next.com/getting-started/USAGE_webui.html>Using WebUI</a></li> </ul> <hr> <h3 id=_2>概述</h3> <p>pdf2zh 是一个强大的 <code>PDF</code> 文件翻译工具。它支持多种翻译服务，包括 OpenAI、DeepSeek、阿里云和硅基流动，并允许在线和离线处理。</p> <p>本指南将帮助您开始使用 pdf2zh。我们将介绍安装过程和基本用法，以便您快速上手。</p> <hr> <h3 id=_3>所需准备</h3> <ul> <li>要翻译的 <code>PDF</code> 文件</li> <li>您选择的翻译服务的 API 密钥（如果使用在线服务）</li> <li>对命令行的基本熟悉</li> </ul> <hr> <h3 id=_4>下一步</h3> <ul> <li><a href=https://pdf2zh-next.com/getting-started/installation.html>如何安装</a></li> <li><a href=https://pdf2zh-next.com/getting-started/USAGE_cli.html>使用命令行</a></li> <li><a href=https://pdf2zh-next.com/getting-started/USAGE_webui.html>使用 WebUI</a></li> <li>You can also use the high-level translate_async function which wraps this and returns a simple result.</li> </ul> <hr> <h3 id=translation-result_1>TRANSLATION RESULT</h3> <ul> <li>do_translate_async_stream 是底层的异步入口点，用于翻译单个 PDF 并产生事件流（进度/错误/完成）。</li> <li>它适用于构建您自己的 UI 或 CLI，您可以在其中获得实时进度并完全控制结果。</li> <li>它接受一个经过验证的 SettingsModel 和一个文件路径，并返回一个字典事件的异步生成器。</li> <li>您也可以使用高级的 translate_async 函数，它包装了此函数并返回一个简单的结果。</li> </ul> <p>The <code>Signature</code> class is used to generate a signature for a given string using a secret key. This signature can be used to verify the integrity and authenticity of the string.</p> <h4 id=constructor>Constructor</h4> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=ow>new</span><span class=w> </span><span class=nx>Signature</span><span class=p>(</span><span class=nx>secretKey</span><span class=o>:</span><span class=w> </span><span class=nx>string</span><span class=p>)</span>
</span></code></pre></div> <p>Creates a new <code>Signature</code> instance.</p> <ul> <li><code>secretKey</code> (string): The secret key used for generating the signature.</li> </ul> <h4 id=methods>Methods</h4> <h5 id=signdata-string-string><code>sign(data: string): string</code></h5> <p>Generates a signature for the given data string.</p> <ul> <li><code>data</code> (string): The data string to sign.</li> <li>Returns (string): The generated signature.</li> </ul> <h5 id=verifydata-string-signature-string-boolean><code>verify(data: string, signature: string): boolean</code></h5> <p>Verifies the signature of the given data string.</p> <ul> <li><code>data</code> (string): The data string to verify.</li> <li><code>signature</code> (string): The signature to verify against.</li> <li>Returns (boolean): <code>true</code> if the signature is valid, <code>false</code> otherwise.</li> </ul> <h4 id=example>Example</h4> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kd>const</span><span class=w> </span><span class=nx>signature</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Signature</span><span class=p>(</span><span class=s1>&#39;my-secret-key&#39;</span><span class=p>);</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kd>const</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Hello, World!&#39;</span><span class=p>;</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=kd>const</span><span class=w> </span><span class=nx>sig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signature</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>sig</span><span class=p>);</span><span class=w> </span><span class=c1>// Outputs the signature</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=kd>const</span><span class=w> </span><span class=nx>isValid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signature</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=nx>sig</span><span class=p>);</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>isValid</span><span class=p>);</span><span class=w> </span><span class=c1>// Outputs: true</span>
</span></code></pre></div> <hr> <h3 id=original-text>ORIGINAL TEXT</h3> <h3 id=_5>签名</h3> <p><code>Signature</code> 类用于使用密钥为给定字符串生成签名。此签名可用于验证字符串的完整性和真实性。</p> <h4 id=_6>构造函数</h4> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=ow>new</span><span class=w> </span><span class=nx>Signature</span><span class=p>(</span><span class=nx>secretKey</span><span class=o>:</span><span class=w> </span><span class=nx>string</span><span class=p>)</span>
</span></code></pre></div> <p>创建一个新的 <code>Signature</code> 实例。</p> <ul> <li><code>secretKey</code> (string): 用于生成签名的密钥。</li> </ul> <h4 id=_7>方法</h4> <h5 id=signdata-string-string_1><code>sign(data: string): string</code></h5> <p>为给定的数据字符串生成签名。</p> <ul> <li><code>data</code> (string): 要签名的数据字符串。</li> <li>返回 (string): 生成的签名。</li> </ul> <h5 id=verifydata-string-signature-string-boolean_1><code>verify(data: string, signature: string): boolean</code></h5> <p>验证给定数据字符串的签名。</p> <ul> <li><code>data</code> (string): 要验证的数据字符串。</li> <li><code>signature</code> (string): 要验证的签名。</li> <li>返回 (boolean): 如果签名有效则为 <code>true</code>，否则为 <code>false</code>。</li> </ul> <h4 id=_8>示例</h4> <p><div class="language-javascript highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kd>const</span><span class=w> </span><span class=nx>signature</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Signature</span><span class=p>(</span><span class=s1>&#39;my-secret-key&#39;</span><span class=p>);</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kd>const</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Hello, World!&#39;</span><span class=p>;</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kd>const</span><span class=w> </span><span class=nx>sig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signature</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>sig</span><span class=p>);</span><span class=w> </span><span class=c1>// 输出签名</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=kd>const</span><span class=w> </span><span class=nx>isValid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signature</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=nx>sig</span><span class=p>);</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>isValid</span><span class=p>);</span><span class=w> </span><span class=c1>// 输出：true</span>
</span></code></pre></div> - callback: Optional[Callable[[TranslateAsyncEvent], None]] = None. If provided, this callback will be called with each event. - Returns: AsyncGenerator[TranslateAsyncEvent, None]. Yields events as they occur.</p> <h3 id=event-types>Event Types</h3> <p>The function yields events of type <code>TranslateAsyncEvent</code>, which is a <code>TypedDict</code> with the following fields:</p> <ul> <li><code>type</code>: Literal["progress", "result", "error", "done"]</li> <li><code>data</code>: The data associated with the event. The structure depends on the event type.</li> </ul> <h4 id=progress-event>Progress Event</h4> <ul> <li><code>type</code>: "progress"</li> <li><code>data</code>: <code>ProgressData</code> with fields:</li> <li><code>current</code>: int. The current progress value.</li> <li><code>total</code>: int. The total progress value.</li> <li><code>message</code>: str. A human-readable message describing the current progress.</li> </ul> <h4 id=result-event>Result Event</h4> <ul> <li><code>type</code>: "result"</li> <li><code>data</code>: <code>ResultData</code> with fields:</li> <li><code>text</code>: str. The translated text.</li> <li><code>page</code>: int. The page number of the translated text.</li> </ul> <h4 id=error-event>Error Event</h4> <ul> <li><code>type</code>: "error"</li> <li><code>data</code>: <code>ErrorData</code> with fields:</li> <li><code>message</code>: str. A human-readable error message.</li> <li><code>code</code>: Optional[str]. An optional error code.</li> </ul> <h4 id=done-event>Done Event</h4> <ul> <li><code>type</code>: "done"</li> <li><code>data</code>: None</li> </ul> <h3 id=example-usage_1>Example Usage</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.models</span><span class=w> </span><span class=kn>import</span> <span class=n>SettingsModel</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>    <span class=n>settings</span> <span class=o>=</span> <span class=n>SettingsModel</span><span class=p>(</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>        <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>,</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>    <span class=p>)</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=s2>&quot;document.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;current&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;total&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;result&quot;</span><span class=p>:</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Page </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;done&quot;</span><span class=p>:</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation complete&quot;</span><span class=p>)</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notes_1>Notes</h3> <ul> <li>The function processes the document asynchronously, allowing for real-time feedback.</li> <li>The <code>callback</code> parameter can be used to handle events in a separate function.</li> <li>The function validates the settings before starting the translation.</li> </ul> <hr> <h3 id=translation_1>TRANSLATION</h3> <ul> <li>导入：<code>from pdf2zh_next.high_level import do_translate_async_stream</code></li> <li>调用：<code>async for event in do_translate_async_stream(settings, file): ...</code></li> <li>参数：</li> <li>settings: SettingsModel。必须有效；函数将调用 <code>settings.validate_settings()</code>。</li> <li>file: str | pathlib.Path。要翻译的单个 PDF。必须存在。</li> <li>callback: Optional[Callable[[TranslateAsyncEvent], None]] = None。如果提供，此回调函数将在每个事件发生时被调用。</li> <li>返回：AsyncGenerator[TranslateAsyncEvent, None]。在事件发生时生成事件。</li> </ul> <h3 id=_9>事件类型</h3> <p>函数生成类型为 <code>TranslateAsyncEvent</code> 的事件，这是一个包含以下字段的 <code>TypedDict</code>：</p> <ul> <li><code>type</code>: Literal["progress", "result", "error", "done"]</li> <li><code>data</code>: 与事件关联的数据。结构取决于事件类型。</li> </ul> <h4 id=_10>进度事件</h4> <ul> <li><code>type</code>: "progress"</li> <li><code>data</code>: <code>ProgressData</code>，包含字段：</li> <li><code>current</code>: int。当前进度值。</li> <li><code>total</code>: int。总进度值。</li> <li><code>message</code>: str。描述当前进度的人类可读消息。</li> </ul> <h4 id=_11>结果事件</h4> <ul> <li><code>type</code>: "result"</li> <li><code>data</code>: <code>ResultData</code>，包含字段：</li> <li><code>text</code>: str。翻译后的文本。</li> <li><code>page</code>: int。翻译文本的页码。</li> </ul> <h4 id=_12>错误事件</h4> <ul> <li><code>type</code>: "error"</li> <li><code>data</code>: <code>ErrorData</code>，包含字段：</li> <li><code>message</code>: str。人类可读的错误消息。</li> <li><code>code</code>: Optional[str]。可选的错误代码。</li> </ul> <h4 id=_13>完成事件</h4> <ul> <li><code>type</code>: "done"</li> <li><code>data</code>: None</li> </ul> <h3 id=_14>使用示例</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.models</span><span class=w> </span><span class=kn>import</span> <span class=n>SettingsModel</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>    <span class=n>settings</span> <span class=o>=</span> <span class=n>SettingsModel</span><span class=p>(</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>        <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>,</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>    <span class=p>)</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=s2>&quot;document.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;进度：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;current&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;total&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;result&quot;</span><span class=p>:</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;第 </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> 页：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;错误：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;done&quot;</span><span class=p>:</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;翻译完成&quot;</span><span class=p>)</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=_15>注意</h3> <ul> <li>该函数异步处理文档，允许实时反馈。</li> <li><code>callback</code> 参数可用于在单独的函数中处理事件。</li> <li>函数在开始翻译前会验证设置。</li> </ul> <p>This is a simple example. In practice, you may want to add more error handling and logging.</p> <p>For more advanced usage, see the <a href=https://pdf2zh.com/advanced>Advanced Guide</a>.</p> <hr> <h3 id=translation-result_2>TRANSLATION RESULT</h3> <p>注意：这是一个简单示例。在实际应用中，您可能需要添加更多错误处理和日志记录。</p> <p>有关更高级的用法，请参见 <a href=https://pdf2zh.com/advanced>高级指南</a>。 - The <code>settings</code> object is passed to the subprocess if used. It must be JSON-serializable. - The <code>callback</code> is called for each event. Events are documented in <a href=https://pdf2zh-next.com/advanced/EVENT_STREAM_CONTRACT.html>Event Stream Contract</a>. - This function is intended for use in GUI applications.</p> <hr> <h3 id=translation_2>TRANSLATION</h3> <ul> <li>此函数会忽略 settings.basic.input_files；仅翻译给定的 <code>file</code>。</li> <li>如果 <code>settings.basic.debug</code> 为 True，翻译在主进程中运行；否则在子进程中运行。两种情况下的事件模式是相同的。</li> <li>如果使用子进程，<code>settings</code> 对象会被传递给子进程。它必须是 JSON 可序列化的。</li> <li>每个事件都会调用 <code>callback</code>。事件记录在 <a href=https://pdf2zh-next.com/advanced/EVENT_STREAM_CONTRACT.html>事件流协议</a> 中。</li> <li>此函数旨在用于 GUI 应用程序。</li> </ul> <p>This document describes the event stream contract that the pdf2zh server uses to communicate with clients.</p> <h4 id=event-types_1>Event Types</h4> <p>The server sends events of the following types:</p> <ul> <li><code>progress</code>: Indicates the progress of the translation process.</li> <li><code>result</code>: Contains the translated text.</li> <li><code>error</code>: Indicates an error that occurred during the translation process.</li> <li><code>done</code>: Indicates that the translation process has completed.</li> </ul> <h4 id=event-data>Event Data</h4> <p>Each event is a JSON object with the following fields:</p> <ul> <li><code>type</code>: The type of the event. One of <code>progress</code>, <code>result</code>, <code>error</code>, or <code>done</code>.</li> <li><code>data</code>: The data associated with the event. The structure of the data depends on the event type.</li> </ul> <h5 id=progress-event_1>Progress Event</h5> <p>The <code>progress</code> event contains the following data:</p> <ul> <li><code>current</code>: The current progress value (number).</li> <li><code>total</code>: The total progress value (number).</li> <li><code>message</code>: A human-readable message describing the current progress (string).</li> </ul> <p>Example:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=p>{</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>    </span><span class=nt>&quot;current&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>    </span><span class=nt>&quot;total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translating page 5 of 10&quot;</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=p>}</span>
</span></code></pre></div> <h5 id=result-event_1>Result Event</h5> <p>The <code>result</code> event contains the following data:</p> <ul> <li><code>text</code>: The translated text (string).</li> <li><code>page</code>: The page number of the translated text (number).</li> </ul> <p>Example:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=p>{</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;result&quot;</span><span class=p>,</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nt>&quot;text&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;This is the translated text.&quot;</span><span class=p>,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=p>}</span>
</span></code></pre></div> <h5 id=error-event_1>Error Event</h5> <p>The <code>error</code> event contains the following data:</p> <ul> <li><code>message</code>: A human-readable error message (string).</li> <li><code>code</code>: An optional error code (string).</li> </ul> <p>Example:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=p>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Failed to translate page 5&quot;</span><span class=p>,</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;TRANSLATION_ERROR&quot;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=p>}</span>
</span></code></pre></div> <h5 id=done-event_1>Done Event</h5> <p>The <code>done</code> event contains no data. It indicates that the translation process has completed.</p> <p>Example:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=p>{</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;done&quot;</span><span class=p>,</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=p>}</span>
</span></code></pre></div> <h4 id=event-stream-format>Event Stream Format</h4> <p>The server sends events as Server-Sent Events (SSE). Each event is sent as a text message with the following format:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>event: &lt;event-type&gt;
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>data: &lt;json-data&gt;
</span></code></pre></div> <p>Where <code>&lt;event-type&gt;</code> is the type of the event (e.g., <code>progress</code>, <code>result</code>, <code>error</code>, <code>done</code>), and <code>&lt;json-data&gt;</code> is the JSON string of the event data.</p> <p>Example:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>event: progress
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>data: {&quot;current&quot;: 50, &quot;total&quot;: 100, &quot;message&quot;: &quot;Translating page 5 of 10&quot;}
</span></code></pre></div> <h4 id=client-implementation>Client Implementation</h4> <p>Clients should listen for events on the event stream and handle them accordingly. The following is an example of how to handle events in JavaScript:</p> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=kd>const</span><span class=w> </span><span class=nx>eventSource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>EventSource</span><span class=p>(</span><span class=s1>&#39;/translate/stream&#39;</span><span class=p>);</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=nx>eventSource</span><span class=p>.</span><span class=nx>onmessage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>  </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;progress&#39;</span><span class=o>:</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>      </span><span class=c1>// Update progress bar</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Progress: </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>current</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>total</span><span class=si>}</span><span class=sb> - </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;result&#39;</span><span class=o>:</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>      </span><span class=c1>// Append translated text</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Page </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>page</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>text</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;error&#39;</span><span class=o>:</span>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a><span class=w>      </span><span class=c1>// Handle error</span>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Error: </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;done&#39;</span><span class=o>:</span>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a><span class=w>      </span><span class=c1>// Translation complete</span>
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Translation complete&#39;</span><span class=p>);</span>
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a><span class=w>      </span><span class=nx>eventSource</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-14-24><a id=__codelineno-14-24 name=__codelineno-14-24 href=#__codelineno-14-24></a><span class=p>};</span>
</span></code></pre></div> <h4 id=error-handling>Error Handling</h4> <p>If an error occurs during the translation process, the server will send an <code>error</code> event and then close the connection. Clients should handle errors appropriately and close the event stream.</p> <h4 id=completion>Completion</h4> <p>When the translation process completes successfully, the server will send a <code>done</code> event and then close the connection. Clients should close the event stream upon receiving the <code>done</code> event.</p> <hr> <h3 id=output-language_2>OUTPUT LANGUAGE</h3> <p>zh</p> <hr> <h3 id=translation_3>TRANSLATION</h3> <h3 id=_16>事件流协议</h3> <p>本文档描述了 pdf2zh 服务器与客户端通信所用的事件流协议。</p> <h4 id=_17>事件类型</h4> <p>服务器发送以下类型的事件：</p> <ul> <li><code>progress</code>：指示翻译过程的进度。</li> <li><code>result</code>：包含翻译后的文本。</li> <li><code>error</code>：指示翻译过程中发生的错误。</li> <li><code>done</code>：指示翻译过程已完成。</li> </ul> <h4 id=_18>事件数据</h4> <p>每个事件都是一个包含以下字段的 JSON 对象：</p> <ul> <li><code>type</code>：事件类型。取值为 <code>progress</code>、<code>result</code>、<code>error</code> 或 <code>done</code> 之一。</li> <li><code>data</code>：与事件关联的数据。数据的结构取决于事件类型。</li> </ul> <h5 id=_19>进度事件</h5> <p><code>progress</code> 事件包含以下数据：</p> <ul> <li><code>current</code>：当前进度值（数字）。</li> <li><code>total</code>：总进度值（数字）。</li> <li><code>message</code>：描述当前进度的人类可读消息（字符串）。</li> </ul> <p>示例：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=nt>&quot;current&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=nt>&quot;total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;正在翻译第 5 页，共 10 页&quot;</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=p>}</span>
</span></code></pre></div> <h5 id=_20>结果事件</h5> <p><code>result</code> 事件包含以下数据：</p> <ul> <li><code>text</code>：翻译后的文本（字符串）。</li> <li><code>page</code>：翻译文本的页码（数字）。</li> </ul> <p>示例：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=p>{</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;result&quot;</span><span class=p>,</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class=nt>&quot;text&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;这是翻译后的文本。&quot;</span><span class=p>,</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=p>}</span>
</span></code></pre></div> <h5 id=_21>错误事件</h5> <p><code>error</code> 事件包含以下数据：</p> <ul> <li><code>message</code>：人类可读的错误消息（字符串）。</li> <li><code>code</code>：可选的错误代码（字符串）。</li> </ul> <p>示例：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=p>{</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;翻译第 5 页失败&quot;</span><span class=p>,</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;TRANSLATION_ERROR&quot;</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=p>}</span>
</span></code></pre></div> <h5 id=_22>完成事件</h5> <p><code>done</code> 事件不包含数据。它指示翻译过程已完成。</p> <p>示例：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;done&quot;</span><span class=p>,</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=p>}</span>
</span></code></pre></div> <h4 id=_23>事件流格式</h4> <p>服务器以服务器发送事件（SSE）的形式发送事件。每个事件都以文本消息的形式发送，格式如下：</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>event: &lt;事件类型&gt;
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>data: &lt;json 数据&gt;
</span></code></pre></div> <p>其中 <code>&lt;事件类型&gt;</code> 是事件的类型（例如 <code>progress</code>、<code>result</code>、<code>error</code>、<code>done</code>），<code>&lt;json 数据&gt;</code> 是事件数据的 JSON 字符串。</p> <p>示例：</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>event: progress
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>data: {&quot;current&quot;: 50, &quot;total&quot;: 100, &quot;message&quot;: &quot;正在翻译第 5 页，共 10 页&quot;}
</span></code></pre></div> <h4 id=_24>客户端实现</h4> <p>客户端应监听事件流上的事件并进行相应处理。以下是在 JavaScript 中处理事件的示例：</p> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=kd>const</span><span class=w> </span><span class=nx>eventSource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>EventSource</span><span class=p>(</span><span class=s1>&#39;/translate/stream&#39;</span><span class=p>);</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=nx>eventSource</span><span class=p>.</span><span class=nx>onmessage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;progress&#39;</span><span class=o>:</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>      </span><span class=c1>// 更新进度条</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`进度：</span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>current</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>total</span><span class=si>}</span><span class=sb> - </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;result&#39;</span><span class=o>:</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>      </span><span class=c1>// 追加翻译文本</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`第 </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>page</span><span class=si>}</span><span class=sb> 页：</span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>text</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;error&#39;</span><span class=o>:</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=w>      </span><span class=c1>// 处理错误</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`错误：</span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;done&#39;</span><span class=o>:</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a><span class=w>      </span><span class=c1>// 翻译完成</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20 href=#__codelineno-21-20></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;翻译完成&#39;</span><span class=p>);</span>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21 href=#__codelineno-21-21></a><span class=w>      </span><span class=nx>eventSource</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22 href=#__codelineno-21-22></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23 href=#__codelineno-21-23></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-21-24><a id=__codelineno-21-24 name=__codelineno-21-24 href=#__codelineno-21-24></a><span class=p>};</span>
</span></code></pre></div> <h4 id=_25>错误处理</h4> <p>如果在翻译过程中发生错误，服务器将发送一个 <code>error</code> 事件，然后关闭连接。客户端应适当地处理错误并关闭事件流。</p> <h4 id=_26>完成</h4> <p>当翻译过程成功完成时，服务器将发送一个 <code>done</code> 事件，然后关闭连接。客户端应在收到 <code>done</code> 事件后关闭事件流。 - <code>progress</code>: Indicates the progress of the translation process. - <code>result</code>: Contains the translated text. - <code>error</code>: Indicates an error that occurred during the translation process. - <code>done</code>: Indicates that the translation process has completed.</p> <p>Each event is a dictionary with the following structure: <div class="language-python highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=p>{</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>    <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># Event type: &quot;progress&quot;, &quot;result&quot;, &quot;error&quot;, or &quot;done&quot;</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>    <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=nb>dict</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>   <span class=c1># Event data (structure depends on event type)</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=progress-event_2>Progress Event</h3> <p>The <code>progress</code> event contains the following data: <div class="language-python highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=p>{</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>    <span class=s2>&quot;current&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>        <span class=c1># Current progress value</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>    <span class=s2>&quot;total&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>          <span class=c1># Total progress value</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># Human-readable progress message</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=result-event_2>Result Event</h3> <p>The <code>result</code> event contains the following data: <div class="language-python highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=p>{</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>    <span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># Translated text</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>    <span class=s2>&quot;page&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>           <span class=c1># Page number of the translated text</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=error-event_2>Error Event</h3> <p>The <code>error</code> event contains the following data: <div class="language-python highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=p>{</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># Human-readable error message</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>    <span class=s2>&quot;code&quot;</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>    <span class=c1># Optional error code</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=done-event_2>Done Event</h3> <p>The <code>done</code> event contains no data (<code>data</code> is <code>None</code>).</p> <h3 id=example-usage_2>Example Usage</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span><span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>)</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate_async</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;current&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;total&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;result&quot;</span><span class=p>:</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Page </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;done&quot;</span><span class=p>:</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation complete&quot;</span><span class=p>)</span>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <hr> <h3 id=output-language_3>OUTPUT LANGUAGE</h3> <p>zh</p> <hr> <h3 id=translation_4>TRANSLATION</h3> <p>异步生成器会产生类似 JSON 的字典事件，包含以下类型： - <code>progress</code>：指示翻译过程的进度。 - <code>result</code>：包含翻译后的文本。 - <code>error</code>：指示翻译过程中发生的错误。 - <code>done</code>：指示翻译过程已完成。</p> <p>每个事件都是一个具有以下结构的字典： <div class="language-python highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=p>{</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>    <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># 事件类型：&quot;progress&quot;、&quot;result&quot;、&quot;error&quot; 或 &quot;done&quot;</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>    <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=nb>dict</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>   <span class=c1># 事件数据（结构取决于事件类型）</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_27>进度事件</h3> <p><code>progress</code> 事件包含以下数据： <div class="language-python highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=p>{</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>    <span class=s2>&quot;current&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>        <span class=c1># 当前进度值</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>    <span class=s2>&quot;total&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>          <span class=c1># 总进度值</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># 人类可读的进度消息</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_28>结果事件</h3> <p><code>result</code> 事件包含以下数据： <div class="language-python highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=p>{</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>    <span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># 翻译后的文本</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>    <span class=s2>&quot;page&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>           <span class=c1># 翻译文本的页码</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_29>错误事件</h3> <p><code>error</code> 事件包含以下数据： <div class="language-python highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=p>{</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># 人类可读的错误消息</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>    <span class=s2>&quot;code&quot;</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>    <span class=c1># 可选的错误代码</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_30>完成事件</h3> <p><code>done</code> 事件不包含数据（<code>data</code> 为 <code>None</code>）。</p> <h3 id=_31>使用示例</h3> <p><div class="language-python highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span><span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>)</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate_async</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;进度：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;current&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;total&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;result&quot;</span><span class=p>:</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;第 </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> 页：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;错误：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;done&quot;</span><span class=p>:</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;翻译完成&quot;</span><span class=p>)</span>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> - ### Example Event Shapes: The following examples demonstrate how to use the <code>EventShape</code> class to define custom event shapes. Each example includes a brief description and the corresponding code snippet.</p> <h4 id=1-rectangle-event-shape>1. Rectangle Event Shape</h4> <p>A simple rectangular event shape with a fixed width and height.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=c1># Define a rectangle event shape</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=k>class</span><span class=w> </span><span class=nc>RectangleEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>):</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>=</span> <span class=n>width</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>        <span class=bp>self</span><span class=o>.</span><span class=n>height</span> <span class=o>=</span> <span class=n>height</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>        <span class=k>return</span> <span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>y</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>height</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>height</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=c1># Usage</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class=n>rect</span> <span class=o>=</span> <span class=n>RectangleEventShape</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Area: </span><span class=si>{</span><span class=n>rect</span><span class=o>.</span><span class=n>get_area</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (0,0): </span><span class=si>{</span><span class=n>rect</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (6,3): </span><span class=si>{</span><span class=n>rect</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=2-circular-event-shape>2. Circular Event Shape</h4> <p>A circular event shape with a fixed radius.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=c1># Define a circle event shape</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=k>class</span><span class=w> </span><span class=nc>CircleEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>radius</span><span class=p>):</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>radius</span> <span class=o>=</span> <span class=n>radius</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=k>def</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=n>y</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>radius</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>pi</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>radius</span><span class=o>**</span><span class=mi>2</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a><span class=c1># Usage</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=n>circle</span> <span class=o>=</span> <span class=n>CircleEventShape</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Area: </span><span class=si>{</span><span class=n>circle</span><span class=o>.</span><span class=n>get_area</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (0,0): </span><span class=si>{</span><span class=n>circle</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (4,3): </span><span class=si>{</span><span class=n>circle</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=3-elliptical-event-shape>3. Elliptical Event Shape</h4> <p>An elliptical event shape with major and minor axes.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=c1># Define an ellipse event shape</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=k>class</span><span class=w> </span><span class=nc>EllipseEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>a</span>  <span class=c1># semi-major axis</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>        <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>=</span> <span class=n>b</span>  <span class=c1># semi-minor axis</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>        <span class=k>return</span> <span class=p>(</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=n>y</span><span class=o>**</span><span class=mi>2</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>1</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>pi</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=c1># Usage</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=n>ellipse</span> <span class=o>=</span> <span class=n>EllipseEventShape</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Area: </span><span class=si>{</span><span class=n>ellipse</span><span class=o>.</span><span class=n>get_area</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (0,0): </span><span class=si>{</span><span class=n>ellipse</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (5,3): </span><span class=si>{</span><span class=n>ellipse</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=4-custom-polygon-event-shape>4. Custom Polygon Event Shape</h4> <p>A custom polygon event shape defined by a list of vertices.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=c1># Define a polygon event shape</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=k>class</span><span class=w> </span><span class=nc>PolygonEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vertices</span><span class=p>):</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=o>-</span> <span class=c1>### Notes &amp; Best Practices: - **Use `--model` to select a translation model.** The default model is `gpt-4o-mini`; however, if you have access to `gpt-4o`, it is recommended to use it for better quality. You can also use other models, such as `gemini-1.5-pro`, `claude-3-5-sonnet`, or `deepseek-chat` (for Chinese translations). For more information, see [Supported Languages](https://pdf2zh-next.com/advanced/SUPPORTED_LANGUAGES.html).</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>source</span><span class=o>-</span><span class=n>language</span> <span class=ow>and</span> <span class=o>--</span><span class=n>target</span><span class=o>-</span><span class=n>language</span><span class=err>`</span> <span class=n>to</span> <span class=n>specify</span> <span class=n>the</span> <span class=n>language</span><span class=o>.**</span> <span class=n>The</span> <span class=n>default</span> <span class=ow>is</span> <span class=n>to</span> <span class=n>automatically</span> <span class=n>detect</span> <span class=n>the</span> <span class=n>source</span> <span class=n>language</span> <span class=ow>and</span> <span class=n>translate</span> <span class=n>to</span> <span class=err>`</span><span class=n>zh</span><span class=err>`</span> <span class=p>(</span><span class=n>Simplified</span> <span class=n>Chinese</span><span class=p>)</span><span class=o>.</span> <span class=n>You</span> <span class=n>can</span> <span class=n>also</span> <span class=n>translate</span> <span class=n>to</span> <span class=n>other</span> <span class=n>languages</span><span class=p>,</span> <span class=n>such</span> <span class=k>as</span> <span class=err>`</span><span class=n>en</span><span class=err>`</span> <span class=p>(</span><span class=n>English</span><span class=p>),</span> <span class=err>`</span><span class=n>ja</span><span class=err>`</span> <span class=p>(</span><span class=n>Japanese</span><span class=p>),</span> <span class=err>`</span><span class=n>ko</span><span class=err>`</span> <span class=p>(</span><span class=n>Korean</span><span class=p>),</span> <span class=n>etc</span><span class=o>.</span> <span class=n>For</span> <span class=n>more</span> <span class=n>information</span><span class=p>,</span> <span class=n>see</span> <span class=p>[</span><span class=n>Language</span> <span class=n>Code</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>LANGUAGE_CODE</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=o>.</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>service</span><span class=err>`</span> <span class=n>to</span> <span class=n>select</span> <span class=n>a</span> <span class=n>translation</span> <span class=n>service</span><span class=o>.**</span> <span class=n>The</span> <span class=n>default</span> <span class=n>service</span> <span class=ow>is</span> <span class=err>`</span><span class=n>openai</span><span class=err>`</span><span class=p>;</span> <span class=n>you</span> <span class=n>can</span> <span class=n>also</span> <span class=n>use</span> <span class=err>`</span><span class=n>gemini</span><span class=err>`</span><span class=p>,</span> <span class=err>`</span><span class=n>claude</span><span class=err>`</span><span class=p>,</span> <span class=err>`</span><span class=n>deepseek</span><span class=err>`</span><span class=p>,</span> <span class=err>`</span><span class=n>azure</span><span class=err>`</span><span class=p>,</span> <span class=err>`</span><span class=n>aliyun</span><span class=err>`</span><span class=p>,</span> <span class=ow>or</span> <span class=err>`</span><span class=n>siliconflow</span><span class=err>`</span><span class=o>.</span> <span class=n>For</span> <span class=n>more</span> <span class=n>information</span><span class=p>,</span> <span class=n>see</span> <span class=p>[</span><span class=n>Documentation</span> <span class=n>of</span> <span class=n>Translation</span> <span class=n>Services</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>TRANSLATION_SERVICES</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=o>.</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>api</span><span class=o>-</span><span class=n>key</span><span class=err>`</span> <span class=n>to</span> <span class=n>provide</span> <span class=n>your</span> <span class=n>API</span> <span class=n>key</span><span class=o>.**</span> <span class=n>You</span> <span class=n>can</span> <span class=n>also</span> <span class=nb>set</span> <span class=n>the</span> <span class=n>API</span> <span class=n>key</span> <span class=n>via</span> <span class=n>the</span> <span class=n>environment</span> <span class=n>variable</span> <span class=err>`</span><span class=n>OPENAI_API_KEY</span><span class=err>`</span><span class=p>,</span> <span class=err>`</span><span class=n>GEMINI_API_KEY</span><span class=err>`</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span> <span class=n>For</span> <span class=n>more</span> <span class=n>information</span><span class=p>,</span> <span class=n>see</span> <span class=p>[</span><span class=n>Documentation</span> <span class=n>of</span> <span class=n>Translation</span> <span class=n>Services</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>TRANSLATION_SERVICES</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=o>.</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>output</span><span class=err>`</span> <span class=n>to</span> <span class=n>specify</span> <span class=n>the</span> <span class=n>output</span> <span class=n>file</span> <span class=n>path</span><span class=o>.**</span> <span class=n>The</span> <span class=n>default</span> <span class=ow>is</span> <span class=n>to</span> <span class=n>output</span> <span class=n>to</span> <span class=n>the</span> <span class=n>same</span> <span class=n>directory</span> <span class=k>as</span> <span class=n>the</span> <span class=nb>input</span> <span class=n>file</span> <span class=k>with</span> <span class=n>the</span> <span class=n>suffix</span> <span class=err>`</span><span class=n>_translated</span><span class=err>`</span> <span class=n>added</span><span class=o>.</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>page</span><span class=o>-</span><span class=nb>range</span><span class=err>`</span> <span class=n>to</span> <span class=n>specify</span> <span class=n>the</span> <span class=n>page</span> <span class=nb>range</span> <span class=n>to</span> <span class=n>translate</span><span class=o>.**</span> <span class=n>For</span> <span class=n>example</span><span class=p>,</span> <span class=err>`</span><span class=o>--</span><span class=n>page</span><span class=o>-</span><span class=nb>range</span> <span class=mi>1</span><span class=o>-</span><span class=mi>5</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>15</span><span class=o>-</span><span class=mi>20</span><span class=err>`</span> <span class=n>will</span> <span class=n>translate</span> <span class=n>pages</span> <span class=mi>1</span> <span class=n>to</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=ow>and</span> <span class=mi>15</span> <span class=n>to</span> <span class=mf>20.</span>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>batch</span><span class=err>`</span> <span class=n>to</span> <span class=n>process</span> <span class=n>multiple</span> <span class=n>files</span><span class=o>.**</span> <span class=n>For</span> <span class=n>example</span><span class=p>,</span> <span class=err>`</span><span class=o>--</span><span class=n>batch</span> <span class=o>*.</span><span class=n>pdf</span><span class=err>`</span> <span class=n>will</span> <span class=n>translate</span> <span class=nb>all</span> <span class=n>PDF</span> <span class=n>files</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>current</span> <span class=n>directory</span><span class=o>.</span>
</span><span id=__span-35-21><a id=__codelineno-35-21 name=__codelineno-35-21 href=#__codelineno-35-21></a>
</span><span id=__span-35-22><a id=__codelineno-35-22 name=__codelineno-35-22 href=#__codelineno-35-22></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>threads</span><span class=err>`</span> <span class=n>to</span> <span class=nb>set</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>concurrent</span> <span class=n>threads</span><span class=o>.**</span> <span class=n>The</span> <span class=n>default</span> <span class=ow>is</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>CPU</span> <span class=n>cores</span><span class=o>.</span> <span class=n>Increasing</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>threads</span> <span class=n>can</span> <span class=n>speed</span> <span class=n>up</span> <span class=n>processing</span><span class=p>,</span> <span class=n>but</span> <span class=n>may</span> <span class=n>also</span> <span class=n>increase</span> <span class=n>API</span> <span class=n>usage</span><span class=o>.</span>
</span><span id=__span-35-23><a id=__codelineno-35-23 name=__codelineno-35-23 href=#__codelineno-35-23></a>
</span><span id=__span-35-24><a id=__codelineno-35-24 name=__codelineno-35-24 href=#__codelineno-35-24></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>dry</span><span class=o>-</span><span class=n>run</span><span class=err>`</span> <span class=n>to</span> <span class=n>simulate</span> <span class=n>the</span> <span class=n>translation</span> <span class=n>process</span> <span class=n>without</span> <span class=n>actually</span> <span class=n>calling</span> <span class=n>the</span> <span class=n>API</span><span class=o>.**</span> <span class=n>This</span> <span class=ow>is</span> <span class=n>useful</span> <span class=k>for</span> <span class=n>checking</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>pages</span> <span class=ow>and</span> <span class=n>estimated</span> <span class=n>cost</span><span class=o>.</span>
</span><span id=__span-35-25><a id=__codelineno-35-25 name=__codelineno-35-25 href=#__codelineno-35-25></a>
</span><span id=__span-35-26><a id=__codelineno-35-26 name=__codelineno-35-26 href=#__codelineno-35-26></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>cost</span><span class=o>-</span><span class=n>limit</span><span class=err>`</span> <span class=n>to</span> <span class=nb>set</span> <span class=n>a</span> <span class=n>cost</span> <span class=n>limit</span><span class=o>.**</span> <span class=n>The</span> <span class=n>translation</span> <span class=n>will</span> <span class=n>stop</span> <span class=k>if</span> <span class=n>the</span> <span class=n>estimated</span> <span class=n>cost</span> <span class=n>exceeds</span> <span class=n>this</span> <span class=n>limit</span><span class=o>.</span>
</span><span id=__span-35-27><a id=__codelineno-35-27 name=__codelineno-35-27 href=#__codelineno-35-27></a>
</span><span id=__span-35-28><a id=__codelineno-35-28 name=__codelineno-35-28 href=#__codelineno-35-28></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>no</span><span class=o>-</span><span class=n>cache</span><span class=err>`</span> <span class=n>to</span> <span class=n>disable</span> <span class=n>caching</span><span class=o>.**</span> <span class=n>By</span> <span class=n>default</span><span class=p>,</span> <span class=n>translated</span> <span class=n>pages</span> <span class=n>are</span> <span class=n>cached</span> <span class=n>to</span> <span class=n>avoid</span> <span class=n>retranslating</span> <span class=n>the</span> <span class=n>same</span> <span class=n>content</span><span class=o>.</span> <span class=n>Use</span> <span class=n>this</span> <span class=n>option</span> <span class=n>to</span> <span class=n>force</span> <span class=n>retranslation</span><span class=o>.</span>
</span><span id=__span-35-29><a id=__codelineno-35-29 name=__codelineno-35-29 href=#__codelineno-35-29></a>
</span><span id=__span-35-30><a id=__codelineno-35-30 name=__codelineno-35-30 href=#__codelineno-35-30></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>cache</span><span class=o>-</span><span class=nb>dir</span><span class=err>`</span> <span class=n>to</span> <span class=n>specify</span> <span class=n>the</span> <span class=n>cache</span> <span class=n>directory</span><span class=o>.**</span> <span class=n>The</span> <span class=n>default</span> <span class=ow>is</span> <span class=err>`</span><span class=o>./.</span><span class=n>pdf2zh_cache</span><span class=err>`</span><span class=o>.</span>
</span><span id=__span-35-31><a id=__codelineno-35-31 name=__codelineno-35-31 href=#__codelineno-35-31></a>
</span><span id=__span-35-32><a id=__codelineno-35-32 name=__codelineno-35-32 href=#__codelineno-35-32></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>log</span><span class=o>-</span><span class=n>level</span><span class=err>`</span> <span class=n>to</span> <span class=nb>set</span> <span class=n>the</span> <span class=n>log</span> <span class=n>level</span><span class=o>.**</span> <span class=n>The</span> <span class=n>default</span> <span class=ow>is</span> <span class=err>`</span><span class=n>INFO</span><span class=err>`</span><span class=o>.</span> <span class=n>You</span> <span class=n>can</span> <span class=nb>set</span> <span class=n>it</span> <span class=n>to</span> <span class=err>`</span><span class=n>DEBUG</span><span class=err>`</span> <span class=k>for</span> <span class=n>more</span> <span class=n>detailed</span> <span class=n>logs</span><span class=o>.</span>
</span><span id=__span-35-33><a id=__codelineno-35-33 name=__codelineno-35-33 href=#__codelineno-35-33></a>
</span><span id=__span-35-34><a id=__codelineno-35-34 name=__codelineno-35-34 href=#__codelineno-35-34></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>config</span><span class=err>`</span> <span class=n>to</span> <span class=n>specify</span> <span class=n>a</span> <span class=n>configuration</span> <span class=n>file</span><span class=o>.**</span> <span class=n>You</span> <span class=n>can</span> <span class=n>save</span> <span class=n>commonly</span> <span class=n>used</span> <span class=n>options</span> <span class=ow>in</span> <span class=n>a</span> <span class=n>configuration</span> <span class=n>file</span> <span class=ow>and</span> <span class=n>load</span> <span class=n>them</span> <span class=k>with</span> <span class=n>this</span> <span class=n>option</span><span class=o>.</span>
</span><span id=__span-35-35><a id=__codelineno-35-35 name=__codelineno-35-35 href=#__codelineno-35-35></a>
</span><span id=__span-35-36><a id=__codelineno-35-36 name=__codelineno-35-36 href=#__codelineno-35-36></a><span class=o>-</span> <span class=o>**</span><span class=n>Use</span> <span class=err>`</span><span class=o>--</span><span class=n>help</span><span class=err>`</span> <span class=n>to</span> <span class=n>view</span> <span class=nb>all</span> <span class=n>available</span> <span class=n>options</span><span class=o>.**</span>
</span><span id=__span-35-37><a id=__codelineno-35-37 name=__codelineno-35-37 href=#__codelineno-35-37></a>
</span><span id=__span-35-38><a id=__codelineno-35-38 name=__codelineno-35-38 href=#__codelineno-35-38></a><span class=o>---</span>
</span><span id=__span-35-39><a id=__codelineno-35-39 name=__codelineno-35-39 href=#__codelineno-35-39></a>
</span><span id=__span-35-40><a id=__codelineno-35-40 name=__codelineno-35-40 href=#__codelineno-35-40></a><span class=c1>### TRANSLATED TEXT</span>
</span><span id=__span-35-41><a id=__codelineno-35-41 name=__codelineno-35-41 href=#__codelineno-35-41></a>
</span><span id=__span-35-42><a id=__codelineno-35-42 name=__codelineno-35-42 href=#__codelineno-35-42></a><span class=c1>### 注意事项与最佳实践</span>
</span><span id=__span-35-43><a id=__codelineno-35-43 name=__codelineno-35-43 href=#__codelineno-35-43></a>
</span><span id=__span-35-44><a id=__codelineno-35-44 name=__codelineno-35-44 href=#__codelineno-35-44></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>model</span><span class=err>`</span> <span class=n>选择翻译模型</span><span class=err>。</span><span class=o>**</span> <span class=n>默认模型是</span> <span class=err>`</span><span class=n>gpt</span><span class=o>-</span><span class=mi>4</span><span class=n>o</span><span class=o>-</span><span class=n>mini</span><span class=err>`；</span><span class=n>但是</span><span class=err>，</span><span class=n>如果您可以使用</span> <span class=err>`</span><span class=n>gpt</span><span class=o>-</span><span class=mi>4</span><span class=n>o</span><span class=err>`，</span><span class=n>推荐使用它以获得更好的质量</span><span class=err>。</span><span class=n>您也可以使用其他模型</span><span class=err>，</span><span class=n>例如</span> <span class=err>`</span><span class=n>gemini</span><span class=o>-</span><span class=mf>1.5</span><span class=o>-</span><span class=n>pro</span><span class=err>`、`</span><span class=n>claude</span><span class=o>-</span><span class=mi>3</span><span class=o>-</span><span class=mi>5</span><span class=o>-</span><span class=n>sonnet</span><span class=err>`</span> <span class=n>或</span> <span class=err>`</span><span class=n>deepseek</span><span class=o>-</span><span class=n>chat</span><span class=err>`（</span><span class=n>用于中文翻译</span><span class=err>）。</span><span class=n>更多信息请参见</span> <span class=p>[</span><span class=n>支持的语言</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>SUPPORTED_LANGUAGES</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=err>。</span>
</span><span id=__span-35-45><a id=__codelineno-35-45 name=__codelineno-35-45 href=#__codelineno-35-45></a>
</span><span id=__span-35-46><a id=__codelineno-35-46 name=__codelineno-35-46 href=#__codelineno-35-46></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>source</span><span class=o>-</span><span class=n>language</span><span class=err>`</span> <span class=n>和</span> <span class=err>`</span><span class=o>--</span><span class=n>target</span><span class=o>-</span><span class=n>language</span><span class=err>`</span> <span class=n>指定语言</span><span class=err>。</span><span class=o>**</span> <span class=n>默认会自动检测源语言并翻译为</span> <span class=err>`</span><span class=n>zh</span><span class=err>`（</span><span class=n>简体中文</span><span class=err>）。</span><span class=n>您也可以翻译为其他语言</span><span class=err>，</span><span class=n>例如</span> <span class=err>`</span><span class=n>en</span><span class=err>`（</span><span class=n>英语</span><span class=err>）、`</span><span class=n>ja</span><span class=err>`（</span><span class=n>日语</span><span class=err>）、`</span><span class=n>ko</span><span class=err>`（</span><span class=n>韩语</span><span class=err>）</span><span class=n>等</span><span class=err>。</span><span class=n>更多信息请参见</span> <span class=p>[</span><span class=n>语言代码</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>LANGUAGE_CODE</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=err>。</span>
</span><span id=__span-35-47><a id=__codelineno-35-47 name=__codelineno-35-47 href=#__codelineno-35-47></a>
</span><span id=__span-35-48><a id=__codelineno-35-48 name=__codelineno-35-48 href=#__codelineno-35-48></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>service</span><span class=err>`</span> <span class=n>选择翻译服务</span><span class=err>。</span><span class=o>**</span> <span class=n>默认服务是</span> <span class=err>`</span><span class=n>openai</span><span class=err>`；</span><span class=n>您也可以使用</span> <span class=err>`</span><span class=n>gemini</span><span class=err>`、`</span><span class=n>claude</span><span class=err>`、`</span><span class=n>deepseek</span><span class=err>`、`</span><span class=n>azure</span><span class=err>`、`</span><span class=n>aliyun</span><span class=err>`</span> <span class=n>或</span> <span class=err>`</span><span class=n>siliconflow</span><span class=err>`。</span><span class=n>更多信息请参见</span> <span class=p>[</span><span class=n>翻译服务文档</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>TRANSLATION_SERVICES</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=err>。</span>
</span><span id=__span-35-49><a id=__codelineno-35-49 name=__codelineno-35-49 href=#__codelineno-35-49></a>
</span><span id=__span-35-50><a id=__codelineno-35-50 name=__codelineno-35-50 href=#__codelineno-35-50></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>api</span><span class=o>-</span><span class=n>key</span><span class=err>`</span> <span class=n>提供您的</span> <span class=n>API</span> <span class=n>密钥</span><span class=err>。</span><span class=o>**</span> <span class=n>您也可以通过环境变量</span> <span class=err>`</span><span class=n>OPENAI_API_KEY</span><span class=err>`、`</span><span class=n>GEMINI_API_KEY</span><span class=err>`</span> <span class=n>等设置</span> <span class=n>API</span> <span class=n>密钥</span><span class=err>。</span><span class=n>更多信息请参见</span> <span class=p>[</span><span class=n>翻译服务文档</span><span class=p>](</span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>pdf2zh</span><span class=o>-</span><span class=nb>next</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>advanced</span><span class=o>/</span><span class=n>TRANSLATION_SERVICES</span><span class=o>.</span><span class=n>html</span><span class=p>)</span><span class=err>。</span>
</span><span id=__span-35-51><a id=__codelineno-35-51 name=__codelineno-35-51 href=#__codelineno-35-51></a>
</span><span id=__span-35-52><a id=__codelineno-35-52 name=__codelineno-35-52 href=#__codelineno-35-52></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>output</span><span class=err>`</span> <span class=n>指定输出文件路径</span><span class=err>。</span><span class=o>**</span> <span class=n>默认输出到与输入文件相同的目录</span><span class=err>，</span><span class=n>并添加后缀</span> <span class=err>`</span><span class=n>_translated</span><span class=err>`。</span>
</span><span id=__span-35-53><a id=__codelineno-35-53 name=__codelineno-35-53 href=#__codelineno-35-53></a>
</span><span id=__span-35-54><a id=__codelineno-35-54 name=__codelineno-35-54 href=#__codelineno-35-54></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>page</span><span class=o>-</span><span class=nb>range</span><span class=err>`</span> <span class=n>指定要翻译的页面范围</span><span class=err>。</span><span class=o>**</span> <span class=n>例如</span><span class=err>，`</span><span class=o>--</span><span class=n>page</span><span class=o>-</span><span class=nb>range</span> <span class=mi>1</span><span class=o>-</span><span class=mi>5</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>15</span><span class=o>-</span><span class=mi>20</span><span class=err>`</span> <span class=n>将翻译第</span> <span class=mi>1</span> <span class=n>到</span> <span class=mi>5</span> <span class=n>页</span><span class=err>、</span><span class=n>第</span> <span class=mi>10</span> <span class=n>页和第</span> <span class=mi>15</span> <span class=n>到</span> <span class=mi>20</span> <span class=n>页</span><span class=err>。</span>
</span><span id=__span-35-55><a id=__codelineno-35-55 name=__codelineno-35-55 href=#__codelineno-35-55></a>
</span><span id=__span-35-56><a id=__codelineno-35-56 name=__codelineno-35-56 href=#__codelineno-35-56></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>batch</span><span class=err>`</span> <span class=n>处理多个文件</span><span class=err>。</span><span class=o>**</span> <span class=n>例如</span><span class=err>，`</span><span class=o>--</span><span class=n>batch</span> <span class=o>*.</span><span class=n>pdf</span><span class=err>`</span> <span class=n>将翻译当前目录中的所有</span> <span class=n>PDF</span> <span class=n>文件</span><span class=err>。</span>
</span><span id=__span-35-57><a id=__codelineno-35-57 name=__codelineno-35-57 href=#__codelineno-35-57></a>
</span><span id=__span-35-58><a id=__codelineno-35-58 name=__codelineno-35-58 href=#__codelineno-35-58></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>threads</span><span class=err>`</span> <span class=n>设置并发线程数</span><span class=err>。</span><span class=o>**</span> <span class=n>默认是</span> <span class=n>CPU</span> <span class=n>核心数</span><span class=err>。</span><span class=n>增加线程数可以加快处理速度</span><span class=err>，</span><span class=n>但也可能增加</span> <span class=n>API</span> <span class=n>使用量</span><span class=err>。</span>
</span><span id=__span-35-59><a id=__codelineno-35-59 name=__codelineno-35-59 href=#__codelineno-35-59></a>
</span><span id=__span-35-60><a id=__codelineno-35-60 name=__codelineno-35-60 href=#__codelineno-35-60></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>dry</span><span class=o>-</span><span class=n>run</span><span class=err>`</span> <span class=n>模拟翻译过程而不实际调用</span> <span class=n>API</span><span class=err>。</span><span class=o>**</span> <span class=n>这对于检查页面数和估算成本很有用</span><span class=err>。</span>
</span><span id=__span-35-61><a id=__codelineno-35-61 name=__codelineno-35-61 href=#__codelineno-35-61></a>
</span><span id=__span-35-62><a id=__codelineno-35-62 name=__codelineno-35-62 href=#__codelineno-35-62></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>cost</span><span class=o>-</span><span class=n>limit</span><span class=err>`</span> <span class=n>设置成本限制</span><span class=err>。</span><span class=o>**</span> <span class=n>如果估算成本超过此限制</span><span class=err>，</span><span class=n>翻译将停止</span><span class=err>。</span>
</span><span id=__span-35-63><a id=__codelineno-35-63 name=__codelineno-35-63 href=#__codelineno-35-63></a>
</span><span id=__span-35-64><a id=__codelineno-35-64 name=__codelineno-35-64 href=#__codelineno-35-64></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>no</span><span class=o>-</span><span class=n>cache</span><span class=err>`</span> <span class=n>禁用缓存</span><span class=err>。</span><span class=o>**</span> <span class=n>默认情况下</span><span class=err>，</span><span class=n>已翻译的页面会被缓存以避免重复翻译相同内容</span><span class=err>。</span><span class=n>使用此选项可强制重新翻译</span><span class=err>。</span>
</span><span id=__span-35-65><a id=__codelineno-35-65 name=__codelineno-35-65 href=#__codelineno-35-65></a>
</span><span id=__span-35-66><a id=__codelineno-35-66 name=__codelineno-35-66 href=#__codelineno-35-66></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>cache</span><span class=o>-</span><span class=nb>dir</span><span class=err>`</span> <span class=n>指定缓存目录</span><span class=err>。</span><span class=o>**</span> <span class=n>默认是</span> <span class=err>`</span><span class=o>./.</span><span class=n>pdf2zh_cache</span><span class=err>`。</span>
</span><span id=__span-35-67><a id=__codelineno-35-67 name=__codelineno-35-67 href=#__codelineno-35-67></a>
</span><span id=__span-35-68><a id=__codelineno-35-68 name=__codelineno-35-68 href=#__codelineno-35-68></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>log</span><span class=o>-</span><span class=n>level</span><span class=err>`</span> <span class=n>设置日志级别</span><span class=err>。</span><span class=o>**</span> <span class=n>默认是</span> <span class=err>`</span><span class=n>INFO</span><span class=err>`。</span><span class=n>您可以将其设置为</span> <span class=err>`</span><span class=n>DEBUG</span><span class=err>`</span> <span class=n>以获取更详细的日志</span><span class=err>。</span>
</span><span id=__span-35-69><a id=__codelineno-35-69 name=__codelineno-35-69 href=#__codelineno-35-69></a>
</span><span id=__span-35-70><a id=__codelineno-35-70 name=__codelineno-35-70 href=#__codelineno-35-70></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>config</span><span class=err>`</span> <span class=n>指定配置文件</span><span class=err>。</span><span class=o>**</span> <span class=n>您可以将常用选项保存在配置文件中</span><span class=err>，</span><span class=n>并通过此选项加载它们</span><span class=err>。</span>
</span><span id=__span-35-71><a id=__codelineno-35-71 name=__codelineno-35-71 href=#__codelineno-35-71></a>
</span><span id=__span-35-72><a id=__codelineno-35-72 name=__codelineno-35-72 href=#__codelineno-35-72></a><span class=o>-</span> <span class=o>**</span><span class=n>使用</span> <span class=err>`</span><span class=o>--</span><span class=n>help</span><span class=err>`</span> <span class=n>查看所有可用选项</span><span class=err>。</span><span class=o>**</span>
</span><span id=__span-35-73><a id=__codelineno-35-73 name=__codelineno-35-73 href=#__codelineno-35-73></a>
</span><span id=__span-35-74><a id=__codelineno-35-74 name=__codelineno-35-74 href=#__codelineno-35-74></a><span class=o>---</span>
</span><span id=__span-35-75><a id=__codelineno-35-75 name=__codelineno-35-75 href=#__codelineno-35-75></a>
</span><span id=__span-35-76><a id=__codelineno-35-76 name=__codelineno-35-76 href=#__codelineno-35-76></a><span class=c1>### BYPASS LIST</span>
</span><span id=__span-35-77><a id=__codelineno-35-77 name=__codelineno-35-77 href=#__codelineno-35-77></a>
</span><span id=__span-35-78><a id=__codelineno-35-78 name=__codelineno-35-78 href=#__codelineno-35-78></a><span class=o>-</span> <span class=n>pdf2zh</span>
</span><span id=__span-35-79><a id=__codelineno-35-79 name=__codelineno-35-79 href=#__codelineno-35-79></a><span class=o>-</span> <span class=n>PDFMathTranslate</span>
</span><span id=__span-35-80><a id=__codelineno-35-80 name=__codelineno-35-80 href=#__codelineno-35-80></a><span class=o>-</span> <span class=o>---</span>
</span><span id=__span-35-81><a id=__codelineno-35-81 name=__codelineno-35-81 href=#__codelineno-35-81></a>
</span><span id=__span-35-82><a id=__codelineno-35-82 name=__codelineno-35-82 href=#__codelineno-35-82></a><span class=o>---</span>
</span><span id=__span-35-83><a id=__codelineno-35-83 name=__codelineno-35-83 href=#__codelineno-35-83></a>
</span><span id=__span-35-84><a id=__codelineno-35-84 name=__codelineno-35-84 href=#__codelineno-35-84></a><span class=c1>### ORIGINAL TEXT</span>
</span><span id=__span-35-85><a id=__codelineno-35-85 name=__codelineno-35-85 href=#__codelineno-35-85></a>
</span><span id=__span-35-86><a id=__codelineno-35-86 name=__codelineno-35-86 href=#__codelineno-35-86></a><span class=n>The</span> <span class=k>async</span> <span class=n>generator</span> <span class=n>yields</span> <span class=n>JSON</span><span class=o>-</span><span class=n>like</span> <span class=nb>dict</span> <span class=n>events</span> <span class=k>with</span> <span class=n>the</span> <span class=n>following</span> <span class=n>types</span><span class=p>:</span>
</span><span id=__span-35-87><a id=__codelineno-35-87 name=__codelineno-35-87 href=#__codelineno-35-87></a><span class=o>-</span> <span class=err>`</span><span class=n>progress</span><span class=err>`</span><span class=p>:</span> <span class=n>Indicates</span> <span class=n>the</span> <span class=n>progress</span> <span class=n>of</span> <span class=n>the</span> <span class=n>translation</span> <span class=n>process</span><span class=o>.</span>
</span><span id=__span-35-88><a id=__codelineno-35-88 name=__codelineno-35-88 href=#__codelineno-35-88></a><span class=o>-</span> <span class=err>`</span><span class=n>result</span><span class=err>`</span><span class=p>:</span> <span class=n>Contains</span> <span class=n>the</span> <span class=n>translated</span> <span class=n>text</span><span class=o>.</span>
</span><span id=__span-35-89><a id=__codelineno-35-89 name=__codelineno-35-89 href=#__codelineno-35-89></a><span class=o>-</span> <span class=err>`</span><span class=n>error</span><span class=err>`</span><span class=p>:</span> <span class=n>Indicates</span> <span class=n>an</span> <span class=n>error</span> <span class=n>that</span> <span class=n>occurred</span> <span class=n>during</span> <span class=n>the</span> <span class=n>translation</span> <span class=n>process</span><span class=o>.</span>
</span><span id=__span-35-90><a id=__codelineno-35-90 name=__codelineno-35-90 href=#__codelineno-35-90></a><span class=o>-</span> <span class=err>`</span><span class=n>done</span><span class=err>`</span><span class=p>:</span> <span class=n>Indicates</span> <span class=n>that</span> <span class=n>the</span> <span class=n>translation</span> <span class=n>process</span> <span class=n>has</span> <span class=n>completed</span><span class=o>.</span>
</span><span id=__span-35-91><a id=__codelineno-35-91 name=__codelineno-35-91 href=#__codelineno-35-91></a>
</span><span id=__span-35-92><a id=__codelineno-35-92 name=__codelineno-35-92 href=#__codelineno-35-92></a><span class=n>Each</span> <span class=n>event</span> <span class=ow>is</span> <span class=n>a</span> <span class=n>dictionary</span> <span class=k>with</span> <span class=n>the</span> <span class=n>following</span> <span class=n>structure</span><span class=p>:</span>
</span><span id=__span-35-93><a id=__codelineno-35-93 name=__codelineno-35-93 href=#__codelineno-35-93></a><span class=err>```</span><span class=n>python</span>
</span><span id=__span-35-94><a id=__codelineno-35-94 name=__codelineno-35-94 href=#__codelineno-35-94></a><span class=p>{</span>
</span><span id=__span-35-95><a id=__codelineno-35-95 name=__codelineno-35-95 href=#__codelineno-35-95></a>    <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># Event type: &quot;progress&quot;, &quot;result&quot;, &quot;error&quot;, or &quot;done&quot;</span>
</span><span id=__span-35-96><a id=__codelineno-35-96 name=__codelineno-35-96 href=#__codelineno-35-96></a>    <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=nb>dict</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>   <span class=c1># Event data (structure depends on event type)</span>
</span><span id=__span-35-97><a id=__codelineno-35-97 name=__codelineno-35-97 href=#__codelineno-35-97></a><span class=p>}</span>
</span></code></pre></div> <h3 id=progress-event_3>Progress Event</h3> <p>The <code>progress</code> event contains the following data: <div class="language-python highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=p>{</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>    <span class=s2>&quot;current&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>        <span class=c1># Current progress value</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>    <span class=s2>&quot;total&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>          <span class=c1># Total progress value</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># Human-readable progress message</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=result-event_3>Result Event</h3> <p>The <code>result</code> event contains the following data: <div class="language-python highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=p>{</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>    <span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># Translated text</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>    <span class=s2>&quot;page&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>           <span class=c1># Page number of the translated text</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=error-event_3>Error Event</h3> <p>The <code>error</code> event contains the following data: <div class="language-python highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=p>{</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># Human-readable error message</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>    <span class=s2>&quot;code&quot;</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>    <span class=c1># Optional error code</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=done-event_3>Done Event</h3> <p>The <code>done</code> event contains no data (<code>data</code> is <code>None</code>).</p> <h3 id=example-usage_3>Example Usage</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span><span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>)</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate_async</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;current&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;total&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;result&quot;</span><span class=p>:</span>
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Page </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;done&quot;</span><span class=p>:</span>
</span><span id=__span-39-15><a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation complete&quot;</span><span class=p>)</span>
</span><span id=__span-39-16><a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a>
</span><span id=__span-39-17><a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <hr> <h3 id=output-language_4>OUTPUT LANGUAGE</h3> <p>zh</p> <hr> <h3 id=translation_5>TRANSLATION</h3> <p>异步生成器会产生类似 JSON 的字典事件，包含以下类型： - <code>progress</code>：指示翻译过程的进度。 - <code>result</code>：包含翻译后的文本。 - <code>error</code>：指示翻译过程中发生的错误。 - <code>done</code>：指示翻译过程已完成。</p> <p>每个事件都是一个具有以下结构的字典： <div class="language-python highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=p>{</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>    <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># 事件类型：&quot;progress&quot;、&quot;result&quot;、&quot;error&quot; 或 &quot;done&quot;</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>    <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=nb>dict</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>   <span class=c1># 事件数据（结构取决于事件类型）</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_32>进度事件</h3> <p><code>progress</code> 事件包含以下数据： <div class="language-python highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=p>{</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>    <span class=s2>&quot;current&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>        <span class=c1># 当前进度值</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>    <span class=s2>&quot;total&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>          <span class=c1># 总进度值</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># 人类可读的进度消息</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_33>结果事件</h3> <p><code>result</code> 事件包含以下数据： <div class="language-python highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=p>{</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>    <span class=s2>&quot;text&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>           <span class=c1># 翻译后的文本</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>    <span class=s2>&quot;page&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>           <span class=c1># 翻译文本的页码</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_34>错误事件</h3> <p><code>error</code> 事件包含以下数据： <div class="language-python highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=p>{</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>        <span class=c1># 人类可读的错误消息</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>    <span class=s2>&quot;code&quot;</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>    <span class=c1># 可选的错误代码</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=_35>完成事件</h3> <p><code>done</code> 事件不包含数据（<code>data</code> 为 <code>None</code>）。</p> <h3 id=_36>使用示例</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span><span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>)</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate_async</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;进度：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;current&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;total&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;result&quot;</span><span class=p>:</span>
</span><span id=__span-44-11><a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;第 </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> 页：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;text&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-44-12><a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-44-13><a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;错误：</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;message&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-44-14><a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a>        <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;done&quot;</span><span class=p>:</span>
</span><span id=__span-44-15><a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;翻译完成&quot;</span><span class=p>)</span>
</span><span id=__span-44-16><a id=__codelineno-44-16 name=__codelineno-44-16 href=#__codelineno-44-16></a>
</span><span id=__span-44-17><a id=__codelineno-44-17 name=__codelineno-44-17 href=#__codelineno-44-17></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <ul> <li><code>stage</code>: optional stage name where error occurred</li> </ul> <hr> <h3 id=output-language_5>OUTPUT LANGUAGE</h3> <p>zh</p> <hr> <h3 id=translation_6>TRANSLATION</h3> <ul> <li>阶段摘要事件：<code>stage_summary</code>（可选，可能首先出现）</li> <li> <p>字段</p> <ul> <li><code>type</code>: "stage_summary"</li> <li><code>stages</code>: 对象列表 <code>{ "name": str, "percent": float }</code>，描述预估的工作分布</li> <li><code>part_index</code>: 对于此摘要事件可能为 0</li> <li><code>total_parts</code>: 总部分数（&gt;= 1）</li> </ul> </li> <li> <p>进度事件：<code>progress_start</code>、<code>progress_update</code>、<code>progress_end</code></p> </li> <li> <p>公共字段</p> <ul> <li><code>type</code>: 上述类型之一</li> <li><code>stage</code>: 人类可读的阶段名称（例如，“解析 PDF 并创建中间表示”、“翻译段落”、“保存 PDF”）</li> <li><code>stage_progress</code>: [0, 100] 内的浮点数，表示当前阶段内的进度</li> <li><code>overall_progress</code>: [0, 100] 内的浮点数，表示整体进度</li> <li><code>part_index</code>: 当前部分索引（进度事件通常从 1 开始）</li> <li><code>total_parts</code>: 总部分数（&gt;= 1）。大文档可能会自动拆分。</li> <li><code>stage_current</code>: 阶段内的当前步骤</li> <li><code>stage_total</code>: 阶段内的总步骤数</li> </ul> </li> <li> <p>完成事件：<code>finish</code></p> </li> <li> <p>字段</p> <ul> <li><code>type</code>: "finish"</li> <li><code>translate_result</code>: 一个提供最终输出的<strong>对象</strong>（注意：不是字典，而是类实例）</li> <li><code>original_pdf_path</code>: 输入 PDF 的路径</li> <li><code>mono_pdf_path</code>: 单语翻译 PDF 的路径（或 None）</li> <li><code>dual_pdf_path</code>: 双语翻译 PDF 的路径（或 None）</li> <li><code>no_watermark_mono_pdf_path</code>: 无水印单语输出的路径（如果生成了），否则为 None</li> <li><code>no_watermark_dual_pdf_path</code>: 无水印双语输出的路径（如果生成了），否则为 None</li> <li><code>auto_extracted_glossary_path</code>: 自动提取的术语表 CSV 的路径（或 None）</li> <li><code>total_seconds</code>: 经过的秒数（浮点数）</li> <li><code>peak_memory_usage</code>: 翻译过程中的近似峰值内存使用量（浮点数；具体单位取决于实现）</li> </ul> </li> <li> <p>错误事件：<code>error</code></p> </li> <li>字段<ul> <li><code>type</code>: "error"</li> <li><code>error</code>: 人类可读的错误消息</li> <li><code>error_type</code>: <code>BabeldocError</code>、<code>SubprocessError</code>、<code>IPCError</code>、<code>SubprocessCrashError</code> 等之一</li> <li><code>details</code>: 可选的详细信息（例如，原始错误或回溯）</li> <li><code>stage</code>: 错误发生时的可选阶段名称</li> </ul> </li> <li> <h3 id=introduction-this-guide-will-help-you-get-started-with-the-pdf2zh-python-package-well-cover-the-installation-process-and-basic-usage-to-get-you-up-and-running-quickly>Introduction: This guide will help you get started with the <code>pdf2zh</code> Python package. We'll cover the installation process and basic usage to get you up and running quickly.</h3> </li> </ul> <hr> <h3 id=what-is-pdf2zh>What is <code>pdf2zh</code>?</h3> <p><code>pdf2zh</code> is a powerful Python library for translating PDF documents. It supports multiple translation services and provides both synchronous and asynchronous interfaces.</p> <p>Key features include:</p> <ul> <li>Support for multiple translation providers (OpenAI, Gemini, Claude, etc.)</li> <li>Both synchronous and asynchronous APIs</li> <li>Flexible configuration options</li> <li>Batch processing capabilities</li> <li>Caching to avoid redundant translations</li> </ul> <hr> <h3 id=installation>Installation</h3> <p>You can install <code>pdf2zh</code> using pip:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a>pip<span class=w> </span>install<span class=w> </span>pdf2zh
</span></code></pre></div> <p>For the latest development version, you can install directly from GitHub:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a>pip<span class=w> </span>install<span class=w> </span>git+https://github.com/your-username/pdf2zh.git
</span></code></pre></div> <hr> <h3 id=quick-start>Quick Start</h3> <p>Here's a minimal example to translate a PDF document:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>SyncTranslator</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=c1># Initialize the translator</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=n>translator</span> <span class=o>=</span> <span class=n>SyncTranslator</span><span class=p>(</span>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a>    <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a>    <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key-here&quot;</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=p>)</span>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=c1># Translate a PDF</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=n>result</span> <span class=o>=</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a>    <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a>    <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;translated_document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a>    <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-47-14><a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a><span class=p>)</span>
</span><span id=__span-47-15><a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a>
</span><span id=__span-47-16><a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed! Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>For asynchronous usage:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>        <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key-here&quot;</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a>    <span class=p>)</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a>
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a>        <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-48-12><a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a>        <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;translated_document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-48-13><a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-48-14><a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a>    <span class=p>)</span>
</span><span id=__span-48-15><a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>
</span><span id=__span-48-16><a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed! Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-48-17><a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a>
</span><span id=__span-48-18><a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <hr> <h3 id=configuration>Configuration</h3> <p>You can configure various aspects of the translation process:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>SyncTranslator</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=n>translator</span> <span class=o>=</span> <span class=n>SyncTranslator</span><span class=p>(</span>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>    <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>    <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key-here&quot;</span><span class=p>,</span>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>    <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-4&quot;</span><span class=p>,</span>  <span class=c1># Specify model</span>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a>    <span class=n>source_language</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>  <span class=c1># Source language (auto-detected if not specified)</span>
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a>    <span class=n>cache_enabled</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># Enable caching</span>
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a>    <span class=n>cache_dir</span><span class=o>=</span><span class=s2>&quot;./cache&quot;</span>  <span class=c1># Custom cache directory</span>
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a><span class=p>)</span>
</span></code></pre></div> <hr> <h3 id=supported-providers>Supported Providers</h3> <p><code>pdf2zh</code> supports multiple translation providers:</p> <ul> <li>OpenAI (<code>openai</code>)</li> <li>Google Gemini (<code>gemini</code>)</li> <li>Anthropic Claude (<code>claude</code>)</li> <li>DeepSeek (<code>deepseek</code>)</li> <li>Azure OpenAI (<code>azure</code>)</li> <li>Aliyun (<code>aliyun</code>)</li> <li>SiliconFlow (<code>siliconflow</code>)</li> </ul> <p>Each provider requires its own API key and may have different configuration options.</p> <hr> <h3 id=next-steps_1>Next Steps</h3> <ul> <li>Learn about advanced configuration options</li> <li>Explore batch processing capabilities</li> <li>Understand error handling and logging</li> <li>Check out the API reference for detailed documentation</li> </ul> <hr> <h3 id=need-help>Need Help?</h3> <p>If you encounter any issues or have questions:</p> <ul> <li>Check the <a href=https://pdf2zh.com/faq>FAQ</a></li> <li>Join our <a href=https://pdf2zh.com/community>Community</a></li> <li>Open an issue on <a href=https://github.com/your-username/pdf2zh/issues>GitHub</a></li> </ul> <hr> <h3 id=translation_7>TRANSLATION</h3> <h3 id=_37>简介</h3> <p>本指南将帮助您开始使用 <code>pdf2zh</code> Python 包。我们将介绍安装过程和基本用法，以便您快速上手。</p> <hr> <h3 id=pdf2zh>什么是 <code>pdf2zh</code>？</h3> <p><code>pdf2zh</code> 是一个功能强大的 Python 库，用于翻译 PDF 文档。它支持多种翻译服务，并提供同步和异步接口。</p> <p>主要功能包括：</p> <ul> <li>支持多种翻译提供商（OpenAI、Gemini、Claude 等）</li> <li>同步和异步 API</li> <li>灵活的配置选项</li> <li>批处理能力</li> <li>缓存以避免重复翻译</li> </ul> <hr> <h3 id=_38>安装</h3> <p>您可以使用 pip 安装 <code>pdf2zh</code>：</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a>pip<span class=w> </span>install<span class=w> </span>pdf2zh
</span></code></pre></div> <p>要安装最新的开发版本，可以直接从 GitHub 安装：</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a>pip<span class=w> </span>install<span class=w> </span>git+https://github.com/your-username/pdf2zh.git
</span></code></pre></div> <hr> <h3 id=_39>快速开始</h3> <p>以下是一个翻译 PDF 文档的最小示例：</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>SyncTranslator</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=c1># 初始化翻译器</span>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=n>translator</span> <span class=o>=</span> <span class=n>SyncTranslator</span><span class=p>(</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a>    <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a>    <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key-here&quot;</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=p>)</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a><span class=c1># 翻译 PDF</span>
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=n>result</span> <span class=o>=</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a>    <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-52-12><a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a>    <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;translated_document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-52-13><a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a>    <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-52-14><a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a><span class=p>)</span>
</span><span id=__span-52-15><a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a>
</span><span id=__span-52-16><a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed! Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>异步使用方式：</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span>
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a>        <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key-here&quot;</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a>    <span class=p>)</span>
</span><span id=__span-53-9><a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a>
</span><span id=__span-53-10><a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-53-11><a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a>        <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-53-12><a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a>        <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;translated_document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-53-13><a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-53-14><a id=__codelineno-53-14 name=__codelineno-53-14 href=#__codelineno-53-14></a>    <span class=p>)</span>
</span><span id=__span-53-15><a id=__codelineno-53-15 name=__codelineno-53-15 href=#__codelineno-53-15></a>
</span><span id=__span-53-16><a id=__codelineno-53-16 name=__codelineno-53-16 href=#__codelineno-53-16></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed! Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-53-17><a id=__codelineno-53-17 name=__codelineno-53-17 href=#__codelineno-53-17></a>
</span><span id=__span-53-18><a id=__codelineno-53-18 name=__codelineno-53-18 href=#__codelineno-53-18></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <hr> <h3 id=_40>配置</h3> <p>您可以配置翻译过程的各个方面：</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>SyncTranslator</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=n>translator</span> <span class=o>=</span> <span class=n>SyncTranslator</span><span class=p>(</span>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>    <span class=n>provider</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>    <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key-here&quot;</span><span class=p>,</span>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>    <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-4&quot;</span><span class=p>,</span>  <span class=c1># 指定模型</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>    <span class=n>source_language</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>  <span class=c1># 源语言（如果未指定则自动检测）</span>
</span><span id=__span-54-8><a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a>    <span class=n>cache_enabled</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># 启用缓存</span>
</span><span id=__span-54-9><a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a>    <span class=n>cache_dir</span><span class=o>=</span><span class=s2>&quot;./cache&quot;</span>  <span class=c1># 自定义缓存目录</span>
</span><span id=__span-54-10><a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a><span class=p>)</span>
</span></code></pre></div> <hr> <h3 id=_41>支持的提供商</h3> <p><code>pdf2zh</code> 支持多种翻译提供商：</p> <ul> <li>OpenAI (<code>openai</code>)</li> <li>Google Gemini (<code>gemini</code>)</li> <li>Anthropic Claude (<code>claude</code>)</li> <li>DeepSeek (<code>deepseek</code>)</li> <li>Azure OpenAI (<code>azure</code>)</li> <li>阿里云 (<code>aliyun</code>)</li> <li>硅基流动 (<code>siliconflow</code>)</li> </ul> <p>每个提供商都需要自己的 API 密钥，并且可能有不同的配置选项。</p> <hr> <h3 id=_42>下一步</h3> <ul> <li>了解高级配置选项</li> <li>探索批处理能力</li> <li>理解错误处理和日志记录</li> <li>查看 API 参考以获取详细文档</li> </ul> <hr> <h3 id=_43>需要帮助？</h3> <p>如果您遇到任何问题或有疑问：</p> <ul> <li>查看 <a href=https://pdf2zh.com/faq>常见问题</a></li> <li>加入我们的 <a href=https://pdf2zh.com/community>社区</a></li> <li>在 <a href=https://github.com/your-username/pdf2zh/issues>GitHub</a> 上提交问题</li> </ul> <p>If <code>source_lang</code> is set to <code>None</code>, the function will attempt to detect the language of the document automatically. This is useful when you are unsure of the source language.</p> <hr> <h3 id=translation_8>TRANSLATION</h3> <p>重要行为：如果 <code>source_lang</code> 设置为 <code>None</code>，该函数将尝试自动检测文档的语言。当您不确定源语言时，这非常有用。 - The <code>finish</code> event will not be emitted if an error occurs.</p> <hr> <h3 id=translation_9>TRANSLATION</h3> <ul> <li>在进度开始之前，可能会发出一个可选的 <code>stage_summary</code>。</li> <li>在某些失败情况下，生成器将首先产生一个 <code>error</code> 事件，然后引发一个派生自 <code>TranslationError</code> 的异常。您应该同时检查错误事件并准备捕获异常。</li> <li><code>progress_update</code> 事件可能会重复出现相同的值；如有必要，消费者应进行去抖处理。</li> <li>当您收到 <code>finish</code> 事件时，停止消费流。</li> <li>如果发生错误，将不会发出 <code>finish</code> 事件。</li> </ul> <p>The following is a minimal example of using <code>pdf2zh</code> asynchronously:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>    <span class=c1># Initialize Translator</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a>        <span class=n>provider</span> <span class=o>=</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=c1># Choose translation service provider</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a>        <span class=n>api_key</span> <span class=o>=</span> <span class=s2>&quot;your_api_key_here&quot;</span><span class=p>,</span> <span class=c1># Your API key</span>
</span><span id=__span-55-9><a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>    <span class=p>)</span>
</span><span id=__span-55-10><a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a>
</span><span id=__span-55-11><a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>    <span class=c1># Translate PDF</span>
</span><span id=__span-55-12><a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-55-13><a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a>        <span class=n>input_file</span> <span class=o>=</span> <span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=c1># Path to the PDF file to be translated</span>
</span><span id=__span-55-14><a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a>        <span class=n>output_file</span> <span class=o>=</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span> <span class=c1># Path to save the translated PDF</span>
</span><span id=__span-55-15><a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>        <span class=n>target_language</span> <span class=o>=</span> <span class=s2>&quot;zh&quot;</span><span class=p>,</span> <span class=c1># Target language code (zh for Chinese)</span>
</span><span id=__span-55-16><a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a>    <span class=p>)</span>
</span><span id=__span-55-17><a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a>
</span><span id=__span-55-18><a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed. Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-55-19><a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a>
</span><span id=__span-55-20><a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=minimal-usage-example-sync>Minimal Usage Example (Sync)</h3> <p>If you prefer synchronous code, you can use the sync interface:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>SyncTranslator</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=c1># Initialize Translator</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=n>translator</span> <span class=o>=</span> <span class=n>SyncTranslator</span><span class=p>(</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a>    <span class=n>provider</span> <span class=o>=</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=c1># Choose translation service provider</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a>    <span class=n>api_key</span> <span class=o>=</span> <span class=s2>&quot;your_api_key_here&quot;</span><span class=p>,</span> <span class=c1># Your API key</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a><span class=p>)</span>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=c1># Translate PDF</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a><span class=n>result</span> <span class=o>=</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a>    <span class=n>input_file</span> <span class=o>=</span> <span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=c1># Path to the PDF file to be translated</span>
</span><span id=__span-56-12><a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a>    <span class=n>output_file</span> <span class=o>=</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span> <span class=c1># Path to save the translated PDF</span>
</span><span id=__span-56-13><a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a>    <span class=n>target_language</span> <span class=o>=</span> <span class=s2>&quot;zh&quot;</span><span class=p>,</span> <span class=c1># Target language code (zh for Chinese)</span>
</span><span id=__span-56-14><a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a><span class=p>)</span>
</span><span id=__span-56-15><a id=__codelineno-56-15 name=__codelineno-56-15 href=#__codelineno-56-15></a>
</span><span id=__span-56-16><a id=__codelineno-56-16 name=__codelineno-56-16 href=#__codelineno-56-16></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed. Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=key-parameters>Key Parameters</h3> <ul> <li><code>provider</code>: Translation service provider (e.g., "openai", "gemini", "siliconflow", etc.)</li> <li><code>api_key</code>: Your API key for the chosen provider</li> <li><code>input_file</code>: Path to the input PDF file</li> <li><code>output_file</code>: Path to save the translated PDF</li> <li><code>target_language</code>: Target language code (e.g., "zh" for Chinese)</li> </ul> <hr> <h3 id=translation-result_3>TRANSLATION RESULT</h3> <h3 id=_44>最小使用示例（异步）</h3> <p>以下是一个异步使用 <code>pdf2zh</code> 的最小示例：</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>Translator</span>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a>    <span class=c1># 初始化 Translator</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>Translator</span><span class=p>(</span>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a>        <span class=n>provider</span> <span class=o>=</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=c1># 选择翻译服务提供商</span>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a>        <span class=n>api_key</span> <span class=o>=</span> <span class=s2>&quot;your_api_key_here&quot;</span><span class=p>,</span> <span class=c1># 你的 API 密钥</span>
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>    <span class=p>)</span>
</span><span id=__span-57-10><a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a>
</span><span id=__span-57-11><a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a>    <span class=c1># 翻译 PDF</span>
</span><span id=__span-57-12><a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-57-13><a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>        <span class=n>input_file</span> <span class=o>=</span> <span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=c1># 待翻译的 PDF 文件路径</span>
</span><span id=__span-57-14><a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a>        <span class=n>output_file</span> <span class=o>=</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span> <span class=c1># 保存翻译后 PDF 的路径</span>
</span><span id=__span-57-15><a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a>        <span class=n>target_language</span> <span class=o>=</span> <span class=s2>&quot;zh&quot;</span><span class=p>,</span> <span class=c1># 目标语言代码（zh 表示中文）</span>
</span><span id=__span-57-16><a id=__codelineno-57-16 name=__codelineno-57-16 href=#__codelineno-57-16></a>    <span class=p>)</span>
</span><span id=__span-57-17><a id=__codelineno-57-17 name=__codelineno-57-17 href=#__codelineno-57-17></a>
</span><span id=__span-57-18><a id=__codelineno-57-18 name=__codelineno-57-18 href=#__codelineno-57-18></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed. Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-57-19><a id=__codelineno-57-19 name=__codelineno-57-19 href=#__codelineno-57-19></a>
</span><span id=__span-57-20><a id=__codelineno-57-20 name=__codelineno-57-20 href=#__codelineno-57-20></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=_45>最小使用示例（同步）</h3> <p>如果你更喜欢同步代码，可以使用同步接口：</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>SyncTranslator</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=c1># 初始化 Translator</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=n>translator</span> <span class=o>=</span> <span class=n>SyncTranslator</span><span class=p>(</span>
</span><span id=__span-58-5><a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a>    <span class=n>provider</span> <span class=o>=</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=c1># 选择翻译服务提供商</span>
</span><span id=__span-58-6><a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a>    <span class=n>api_key</span> <span class=o>=</span> <span class=s2>&quot;your_api_key_here&quot;</span><span class=p>,</span> <span class=c1># 你的 API 密钥</span>
</span><span id=__span-58-7><a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=p>)</span>
</span><span id=__span-58-8><a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a>
</span><span id=__span-58-9><a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=c1># 翻译 PDF</span>
</span><span id=__span-58-10><a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a><span class=n>result</span> <span class=o>=</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-58-11><a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a>    <span class=n>input_file</span> <span class=o>=</span> <span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=c1># 待翻译的 PDF 文件路径</span>
</span><span id=__span-58-12><a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a>    <span class=n>output_file</span> <span class=o>=</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span> <span class=c1># 保存翻译后 PDF 的路径</span>
</span><span id=__span-58-13><a id=__codelineno-58-13 name=__codelineno-58-13 href=#__codelineno-58-13></a>    <span class=n>target_language</span> <span class=o>=</span> <span class=s2>&quot;zh&quot;</span><span class=p>,</span> <span class=c1># 目标语言代码（zh 表示中文）</span>
</span><span id=__span-58-14><a id=__codelineno-58-14 name=__codelineno-58-14 href=#__codelineno-58-14></a><span class=p>)</span>
</span><span id=__span-58-15><a id=__codelineno-58-15 name=__codelineno-58-15 href=#__codelineno-58-15></a>
</span><span id=__span-58-16><a id=__codelineno-58-16 name=__codelineno-58-16 href=#__codelineno-58-16></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed. Output saved to: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>output_file</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=_46>关键参数</h3> <ul> <li><code>provider</code>: 翻译服务提供商（例如 "openai"、"gemini"、"siliconflow" 等）</li> <li><code>api_key</code>: 你所选提供商的 API 密钥</li> <li><code>input_file</code>: 输入 PDF 文件的路径</li> <li><code>output_file</code>: 保存翻译后 PDF 的路径</li> <li><code>target_language</code>: 目标语言代码（例如 "zh" 表示中文） <div class="language-python highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=c1># Assume you already have a valid SettingsModel instance named `settings`</span>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=c1># and a PDF file path</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a>
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>translate_one</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Path</span><span class=p>):</span>
</span><span id=__span-59-9><a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-59-10><a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf_path</span><span class=p>):</span>
</span><span id=__span-59-11><a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a>            <span class=n>etype</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
</span><span id=__span-59-12><a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a>
</span><span id=__span-59-13><a id=__codelineno-59-13 name=__codelineno-59-13 href=#__codelineno-59-13></a>            <span class=k>if</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;stage_summary&quot;</span><span class=p>:</span>
</span><span id=__span-59-14><a id=__codelineno-59-14 name=__codelineno-59-14 href=#__codelineno-59-14></a>                <span class=c1># Optional pre-flight summary of stages</span>
</span><span id=__span-59-15><a id=__codelineno-59-15 name=__codelineno-59-15 href=#__codelineno-59-15></a>                <span class=n>stages</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stages&quot;</span><span class=p>,</span> <span class=p>[])</span>
</span><span id=__span-59-16><a id=__codelineno-59-16 name=__codelineno-59-16 href=#__codelineno-59-16></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Stage summary:&quot;</span><span class=p>,</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>s</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>s</span><span class=p>[</span><span class=s1>&#39;percent&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>stages</span><span class=p>))</span>
</span><span id=__span-59-17><a id=__codelineno-59-17 name=__codelineno-59-17 href=#__codelineno-59-17></a>
</span><span id=__span-59-18><a id=__codelineno-59-18 name=__codelineno-59-18 href=#__codelineno-59-18></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;progress_start&quot;</span><span class=p>,</span> <span class=s2>&quot;progress_update&quot;</span><span class=p>,</span> <span class=s2>&quot;progress_end&quot;</span><span class=p>}:</span>
</span><span id=__span-59-19><a id=__codelineno-59-19 name=__codelineno-59-19 href=#__codelineno-59-19></a>                <span class=n>stage</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stage&quot;</span><span class=p>)</span>
</span><span id=__span-59-20><a id=__codelineno-59-20 name=__codelineno-59-20 href=#__codelineno-59-20></a>                <span class=n>stage_prog</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stage_progress&quot;</span><span class=p>)</span>  <span class=c1># 0..100</span>
</span><span id=__span-59-21><a id=__codelineno-59-21 name=__codelineno-59-21 href=#__codelineno-59-21></a>                <span class=n>overall</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;overall_progress&quot;</span><span class=p>)</span>  <span class=c1># 0..100</span>
</span><span id=__span-59-22><a id=__codelineno-59-22 name=__codelineno-59-22 href=#__codelineno-59-22></a>                <span class=n>part_i</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;part_index&quot;</span><span class=p>)</span>
</span><span id=__span-59-23><a id=__codelineno-59-23 name=__codelineno-59-23 href=#__codelineno-59-23></a>                <span class=n>part_n</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;total_parts&quot;</span><span class=p>)</span>
</span><span id=__span-59-24><a id=__codelineno-59-24 name=__codelineno-59-24 href=#__codelineno-59-24></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[</span><span class=si>{</span><span class=n>etype</span><span class=si>}</span><span class=s2>] </span><span class=si>{</span><span class=n>stage</span><span class=si>}</span><span class=s2> | stage </span><span class=si>{</span><span class=n>stage_prog</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% | overall </span><span class=si>{</span><span class=n>overall</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% (part </span><span class=si>{</span><span class=n>part_i</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>part_n</span><span class=si>}</span><span class=s2>)&quot;</span><span class=p>)</span>
</span><span id=__span-59-25><a id=__codelineno-59-25 name=__codelineno-59-25 href=#__codelineno-59-25></a>
</span><span id=__span-59-26><a id=__codelineno-59-26 name=__codelineno-59-26 href=#__codelineno-59-26></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-59-27><a id=__codelineno-59-27 name=__codelineno-59-27 href=#__codelineno-59-27></a>                <span class=c1># You will also get a raised exception after this yield</span>
</span><span id=__span-59-28><a id=__codelineno-59-28 name=__codelineno-59-28 href=#__codelineno-59-28></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[error]&quot;</span><span class=p>,</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error&quot;</span><span class=p>),</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error_type&quot;</span><span class=p>))</span>
</span><span id=__span-59-29><a id=__codelineno-59-29 name=__codelineno-59-29 href=#__codelineno-59-29></a>
</span><span id=__span-59-30><a id=__codelineno-59-30 name=__codelineno-59-30 href=#__codelineno-59-30></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;finish&quot;</span><span class=p>:</span>
</span><span id=__span-59-31><a id=__codelineno-59-31 name=__codelineno-59-31 href=#__codelineno-59-31></a>                <span class=n>result</span> <span class=o>=</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;translate_result&quot;</span><span class=p>]</span>
</span><span id=__span-59-32><a id=__codelineno-59-32 name=__codelineno-59-32 href=#__codelineno-59-32></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Done in&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;total_seconds&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span> <span class=s2>&quot;s&quot;</span><span class=p>)</span>
</span><span id=__span-59-33><a id=__codelineno-59-33 name=__codelineno-59-33 href=#__codelineno-59-33></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Mono:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;mono_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-59-34><a id=__codelineno-59-34 name=__codelineno-59-34 href=#__codelineno-59-34></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Dual:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;dual_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-59-35><a id=__codelineno-59-35 name=__codelineno-59-35 href=#__codelineno-59-35></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;No-watermark Mono:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;no_watermark_mono_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-59-36><a id=__codelineno-59-36 name=__codelineno-59-36 href=#__codelineno-59-36></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;No-watermark Dual:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;no_watermark_dual_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-59-37><a id=__codelineno-59-37 name=__codelineno-59-37 href=#__codelineno-59-37></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Glossary:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;auto_extracted_glossary_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-59-38><a id=__codelineno-59-38 name=__codelineno-59-38 href=#__codelineno-59-38></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Peak memory:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;peak_memory_usage&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-59-39><a id=__codelineno-59-39 name=__codelineno-59-39 href=#__codelineno-59-39></a>                <span class=k>break</span>
</span><span id=__span-59-40><a id=__codelineno-59-40 name=__codelineno-59-40 href=#__codelineno-59-40></a>
</span><span id=__span-59-41><a id=__codelineno-59-41 name=__codelineno-59-41 href=#__codelineno-59-41></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span><span id=__span-59-42><a id=__codelineno-59-42 name=__codelineno-59-42 href=#__codelineno-59-42></a>        <span class=c1># Catch exceptions raised by the stream after an error event</span>
</span><span id=__span-59-43><a id=__codelineno-59-43 name=__codelineno-59-43 href=#__codelineno-59-43></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation failed:&quot;</span><span class=p>,</span> <span class=n>exc</span><span class=p>)</span>
</span><span id=__span-59-44><a id=__codelineno-59-44 name=__codelineno-59-44 href=#__codelineno-59-44></a>
</span><span id=__span-59-45><a id=__codelineno-59-45 name=__codelineno-59-45 href=#__codelineno-59-45></a><span class=c1># asyncio.run(translate_one(settings, &quot;/path/to/file.pdf&quot;))</span>
</span></code></pre></div></li> </ul> <p>and Refund Policy</p> <p><strong>Last Updated: 2024-09-10</strong></p> <h4 id=1-cancellation-policy>1. Cancellation Policy</h4> <p>You may cancel your subscription at any time. Upon cancellation, you will continue to have access to the paid features until the end of your current billing period. After that, your account will revert to the free plan.</p> <p>To cancel your subscription, please follow these steps:</p> <ol> <li>Log in to your account.</li> <li>Navigate to the <a href=https://pdf2zh.com/billing>Billing</a> page.</li> <li>Click on the "Cancel Subscription" button.</li> <li>Follow the on-screen instructions to confirm the cancellation.</li> </ol> <h4 id=2-refund-policy>2. Refund Policy</h4> <p>We offer refunds under the following circumstances:</p> <ul> <li><strong>Technical Issues</strong>: If you experience persistent technical issues that prevent you from using the service, and our support team is unable to resolve them within a reasonable time.</li> <li><strong>Billing Errors</strong>: In case of duplicate charges or other billing errors.</li> </ul> <p>Refund requests must be submitted within 14 days of the charge date. To request a refund, please contact our support team at <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a> with the following information:</p> <ul> <li>Your account email</li> <li>The date of the charge</li> <li>A detailed description of the issue</li> </ul> <p>Please note that we do not offer refunds for:</p> <ul> <li>Change of mind or dissatisfaction with the service</li> <li>Non-use of the service</li> <li>Partial months of service</li> </ul> <h4 id=3-contact-us>3. Contact Us</h4> <p>If you have any questions about this Cancellation and Refund Policy, please contact us at <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a>.</p> <hr> <h3 id=translation_10>TRANSLATION</h3> <h3 id=_47>取消与退款政策</h3> <p><strong>最后更新：2024-09-10</strong></p> <h4 id=1>1. 取消政策</h4> <p>您可以随时取消您的订阅。取消后，您将继续享有付费功能的使用权限，直至当前计费周期结束。此后，您的账户将恢复为免费计划。</p> <p>要取消订阅，请按照以下步骤操作：</p> <ol> <li>登录您的账户。</li> <li>导航至 <a href=https://pdf2zh.com/billing>Billing</a> 页面。</li> <li>点击“取消订阅”按钮。</li> <li>按照屏幕上的指示确认取消。</li> </ol> <h4 id=2>2. 退款政策</h4> <p>我们在以下情况下提供退款：</p> <ul> <li><strong>技术问题</strong>：如果您遇到持续的技术问题导致无法使用服务，且我们的支持团队无法在合理时间内解决。</li> <li><strong>计费错误</strong>：发生重复扣款或其他计费错误时。</li> </ul> <p>退款请求必须在扣款日期后的 14 天内提交。要申请退款，请通过 <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a> 联系我们的支持团队，并提供以下信息：</p> <ul> <li>您的账户邮箱</li> <li>扣款日期</li> <li>问题的详细描述</li> </ul> <p>请注意，以下情况不予退款：</p> <ul> <li>改变主意或对服务不满意</li> <li>未使用服务</li> <li>部分月份的服务</li> </ul> <h4 id=3>3. 联系我们</h4> <p>如果您对此取消与退款政策有任何疑问，请通过 <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a> 联系我们。</p> <hr> <p>If you want to cancel the translation, you can call the <code>cancel()</code> method on the task.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>do_translate_async_stream</span><span class=p>(</span><span class=o>...</span><span class=p>))</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a><span class=c1># ... later ...</span>
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span></code></pre></div> <hr> <h3 id=translation-result_4>TRANSLATION RESULT</h3> <p>您可以取消消耗流的任务。取消操作会传播到底层的翻译过程。 如果您想取消翻译，可以在任务上调用 <code>cancel()</code> 方法。</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>do_translate_async_stream</span><span class=p>(</span><span class=o>...</span><span class=p>))</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=c1># ... 稍后 ...</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span></code></pre></div> <div class="language-python highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>cancellable</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a>    <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>_consume</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>))</span>
</span><span id=__span-62-6><a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>1.0</span><span class=p>)</span>  <span class=c1># let it start</span>
</span><span id=__span-62-7><a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a>    <span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span><span id=__span-62-8><a id=__codelineno-62-8 name=__codelineno-62-8 href=#__codelineno-62-8></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-62-9><a id=__codelineno-62-9 name=__codelineno-62-9 href=#__codelineno-62-9></a>        <span class=k>await</span> <span class=n>task</span>
</span><span id=__span-62-10><a id=__codelineno-62-10 name=__codelineno-62-10 href=#__codelineno-62-10></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-62-11><a id=__codelineno-62-11 name=__codelineno-62-11 href=#__codelineno-62-11></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Cancelled&quot;</span><span class=p>)</span>
</span><span id=__span-62-12><a id=__codelineno-62-12 name=__codelineno-62-12 href=#__codelineno-62-12></a>
</span><span id=__span-62-13><a id=__codelineno-62-13 name=__codelineno-62-13 href=#__codelineno-62-13></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_consume</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-62-14><a id=__codelineno-62-14 name=__codelineno-62-14 href=#__codelineno-62-14></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-62-15><a id=__codelineno-62-15 name=__codelineno-62-15 href=#__codelineno-62-15></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;finish&quot;</span><span class=p>:</span>
</span><span id=__span-62-16><a id=__codelineno-62-16 name=__codelineno-62-16 href=#__codelineno-62-16></a>            <span class=k>break</span>
</span></code></pre></div> <p>The following examples demonstrate how to use the <code>EventShape</code> class to define custom event shapes. Each example includes a brief description and the corresponding code snippet.</p> <h4 id=1-rectangle-event-shape_1>1. Rectangle Event Shape</h4> <p>A simple rectangular event shape with a fixed width and height.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=c1># Define a rectangle event shape</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a><span class=k>class</span><span class=w> </span><span class=nc>RectangleEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>):</span>
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>=</span> <span class=n>width</span>
</span><span id=__span-63-8><a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a>        <span class=bp>self</span><span class=o>.</span><span class=n>height</span> <span class=o>=</span> <span class=n>height</span>
</span><span id=__span-63-9><a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a>
</span><span id=__span-63-10><a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span><span id=__span-63-11><a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a>        <span class=k>return</span> <span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>y</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>height</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>
</span><span id=__span-63-12><a id=__codelineno-63-12 name=__codelineno-63-12 href=#__codelineno-63-12></a>
</span><span id=__span-63-13><a id=__codelineno-63-13 name=__codelineno-63-13 href=#__codelineno-63-13></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-63-14><a id=__codelineno-63-14 name=__codelineno-63-14 href=#__codelineno-63-14></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>height</span>
</span><span id=__span-63-15><a id=__codelineno-63-15 name=__codelineno-63-15 href=#__codelineno-63-15></a>
</span><span id=__span-63-16><a id=__codelineno-63-16 name=__codelineno-63-16 href=#__codelineno-63-16></a><span class=c1># Usage</span>
</span><span id=__span-63-17><a id=__codelineno-63-17 name=__codelineno-63-17 href=#__codelineno-63-17></a><span class=n>rect</span> <span class=o>=</span> <span class=n>RectangleEventShape</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span><span id=__span-63-18><a id=__codelineno-63-18 name=__codelineno-63-18 href=#__codelineno-63-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Area: </span><span class=si>{</span><span class=n>rect</span><span class=o>.</span><span class=n>get_area</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-63-19><a id=__codelineno-63-19 name=__codelineno-63-19 href=#__codelineno-63-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (0,0): </span><span class=si>{</span><span class=n>rect</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-63-20><a id=__codelineno-63-20 name=__codelineno-63-20 href=#__codelineno-63-20></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (6,3): </span><span class=si>{</span><span class=n>rect</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=2-circular-event-shape_1>2. Circular Event Shape</h4> <p>A circular event shape with a fixed radius.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=c1># Define a circle event shape</span>
</span><span id=__span-64-5><a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a><span class=k>class</span><span class=w> </span><span class=nc>CircleEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-64-6><a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>radius</span><span class=p>):</span>
</span><span id=__span-64-7><a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>radius</span> <span class=o>=</span> <span class=n>radius</span>
</span><span id=__span-64-8><a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a>
</span><span id=__span-64-9><a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a>    <span class=k>def</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span><span id=__span-64-10><a id=__codelineno-64-10 name=__codelineno-64-10 href=#__codelineno-64-10></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=n>y</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>radius</span>
</span><span id=__span-64-11><a id=__codelineno-64-11 name=__codelineno-64-11 href=#__codelineno-64-11></a>
</span><span id=__span-64-12><a id=__codelineno-64-12 name=__codelineno-64-12 href=#__codelineno-64-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-64-13><a id=__codelineno-64-13 name=__codelineno-64-13 href=#__codelineno-64-13></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>pi</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>radius</span><span class=o>**</span><span class=mi>2</span>
</span><span id=__span-64-14><a id=__codelineno-64-14 name=__codelineno-64-14 href=#__codelineno-64-14></a>
</span><span id=__span-64-15><a id=__codelineno-64-15 name=__codelineno-64-15 href=#__codelineno-64-15></a><span class=c1># Usage</span>
</span><span id=__span-64-16><a id=__codelineno-64-16 name=__codelineno-64-16 href=#__codelineno-64-16></a><span class=n>circle</span> <span class=o>=</span> <span class=n>CircleEventShape</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span><span id=__span-64-17><a id=__codelineno-64-17 name=__codelineno-64-17 href=#__codelineno-64-17></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Area: </span><span class=si>{</span><span class=n>circle</span><span class=o>.</span><span class=n>get_area</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-64-18><a id=__codelineno-64-18 name=__codelineno-64-18 href=#__codelineno-64-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (0,0): </span><span class=si>{</span><span class=n>circle</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-64-19><a id=__codelineno-64-19 name=__codelineno-64-19 href=#__codelineno-64-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (4,3): </span><span class=si>{</span><span class=n>circle</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=3-elliptical-event-shape_1>3. Elliptical Event Shape</h4> <p>An elliptical event shape with major and minor axes.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a>
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=c1># Define an ellipse event shape</span>
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a><span class=k>class</span><span class=w> </span><span class=nc>EllipseEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-65-6><a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span><span id=__span-65-7><a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>a</span>  <span class=c1># semi-major axis</span>
</span><span id=__span-65-8><a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a>        <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>=</span> <span class=n>b</span>  <span class=c1># semi-minor axis</span>
</span><span id=__span-65-9><a id=__codelineno-65-9 name=__codelineno-65-9 href=#__codelineno-65-9></a>
</span><span id=__span-65-10><a id=__codelineno-65-10 name=__codelineno-65-10 href=#__codelineno-65-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span><span id=__span-65-11><a id=__codelineno-65-11 name=__codelineno-65-11 href=#__codelineno-65-11></a>        <span class=k>return</span> <span class=p>(</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=n>y</span><span class=o>**</span><span class=mi>2</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>1</span>
</span><span id=__span-65-12><a id=__codelineno-65-12 name=__codelineno-65-12 href=#__codelineno-65-12></a>
</span><span id=__span-65-13><a id=__codelineno-65-13 name=__codelineno-65-13 href=#__codelineno-65-13></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-65-14><a id=__codelineno-65-14 name=__codelineno-65-14 href=#__codelineno-65-14></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>pi</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span>
</span><span id=__span-65-15><a id=__codelineno-65-15 name=__codelineno-65-15 href=#__codelineno-65-15></a>
</span><span id=__span-65-16><a id=__codelineno-65-16 name=__codelineno-65-16 href=#__codelineno-65-16></a><span class=c1># Usage</span>
</span><span id=__span-65-17><a id=__codelineno-65-17 name=__codelineno-65-17 href=#__codelineno-65-17></a><span class=n>ellipse</span> <span class=o>=</span> <span class=n>EllipseEventShape</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span><span id=__span-65-18><a id=__codelineno-65-18 name=__codelineno-65-18 href=#__codelineno-65-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Area: </span><span class=si>{</span><span class=n>ellipse</span><span class=o>.</span><span class=n>get_area</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-65-19><a id=__codelineno-65-19 name=__codelineno-65-19 href=#__codelineno-65-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (0,0): </span><span class=si>{</span><span class=n>ellipse</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-65-20><a id=__codelineno-65-20 name=__codelineno-65-20 href=#__codelineno-65-20></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Contains (5,3): </span><span class=si>{</span><span class=n>ellipse</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=4-custom-polygon-event-shape_1>4. Custom Polygon Event Shape</h4> <p>A custom polygon event shape defined by a list of vertices.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a><span class=kn>from</span><span class=w> </span><span class=nn>event_shape</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-66-3><a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a>
</span><span id=__span-66-4><a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=c1># Define a polygon event shape</span>
</span><span id=__span-66-5><a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=k>class</span><span class=w> </span><span class=nc>PolygonEventShape</span><span class=p>(</span><span class=n>EventShape</span><span class=p>):</span>
</span><span id=__span-66-6><a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vertices</span><span class=p>):</span>
</span><span id=__span-66-7><a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span><span id=__span-66-8><a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a><span class=n>json</span>
</span><span id=__span-66-9><a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a><span class=p>{</span>
</span><span id=__span-66-10><a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a>  <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-66-11><a id=__codelineno-66-11 name=__codelineno-66-11 href=#__codelineno-66-11></a>  <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-66-12><a id=__codelineno-66-12 name=__codelineno-66-12 href=#__codelineno-66-12></a>    <span class=s2>&quot;stage&quot;</span><span class=p>:</span> <span class=s2>&quot;translation&quot;</span><span class=p>,</span>
</span><span id=__span-66-13><a id=__codelineno-66-13 name=__codelineno-66-13 href=#__codelineno-66-13></a>    <span class=s2>&quot;progress&quot;</span><span class=p>:</span> <span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-66-14><a id=__codelineno-66-14 name=__codelineno-66-14 href=#__codelineno-66-14></a>    <span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=s2>&quot;Translation completed for 5 out of 10 pages&quot;</span>
</span><span id=__span-66-15><a id=__codelineno-66-15 name=__codelineno-66-15 href=#__codelineno-66-15></a>  <span class=p>}</span>
</span><span id=__span-66-16><a id=__codelineno-66-16 name=__codelineno-66-16 href=#__codelineno-66-16></a><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=translation_11>TRANSLATION</h3> <p>阶段摘要事件（示例）：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=p>{</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=w>    </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;translation&quot;</span><span class=p>,</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translation completed for 5 out of 10 pages&quot;</span>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-67-8><a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a><span class=p>}</span>
</span><span id=__span-67-9><a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a><span class=err>```jso</span><span class=kc>n</span>
</span><span id=__span-67-10><a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a><span class=p>{</span>
</span><span id=__span-67-11><a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-67-12><a id=__codelineno-67-12 name=__codelineno-67-12 href=#__codelineno-67-12></a><span class=w>  </span><span class=nt>&quot;stages&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-67-13><a id=__codelineno-67-13 name=__codelineno-67-13 href=#__codelineno-67-13></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Parse PDF and Create Intermediate Representation&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1086</span><span class=p>},</span>
</span><span id=__span-67-14><a id=__codelineno-67-14 name=__codelineno-67-14 href=#__codelineno-67-14></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DetectScannedFile&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0188</span><span class=p>},</span>
</span><span id=__span-67-15><a id=__codelineno-67-15 name=__codelineno-67-15 href=#__codelineno-67-15></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Parse Page Layout&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1079</span><span class=p>}</span>
</span><span id=__span-67-16><a id=__codelineno-67-16 name=__codelineno-67-16 href=#__codelineno-67-16></a><span class=w>    </span><span class=c1>// ... more stages ...</span>
</span><span id=__span-67-17><a id=__codelineno-67-17 name=__codelineno-67-17 href=#__codelineno-67-17></a><span class=w>  </span><span class=p>],</span>
</span><span id=__span-67-18><a id=__codelineno-67-18 name=__codelineno-67-18 href=#__codelineno-67-18></a><span class=w>  </span><span class=nt>&quot;part_index&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-67-19><a id=__codelineno-67-19 name=__codelineno-67-19 href=#__codelineno-67-19></a><span class=w>  </span><span class=nt>&quot;total_parts&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-67-20><a id=__codelineno-67-20 name=__codelineno-67-20 href=#__codelineno-67-20></a><span class=p>}</span>
</span></code></pre></div> <p>json { "type": "progress", "data": { "current": 5, "total": 10, "message": "Translating page 5 of 10" } } <div class="language-text highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a>Result event (example):
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a>```json
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a>{
</span><span id=__span-68-5><a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a>    &quot;type&quot;: &quot;result&quot;,
</span><span id=__span-68-6><a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>    &quot;data&quot;: {
</span><span id=__span-68-7><a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a>        &quot;text&quot;: &quot;This is the translated text.&quot;,
</span><span id=__span-68-8><a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a>        &quot;page&quot;: 5
</span><span id=__span-68-9><a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a>    }
</span><span id=__span-68-10><a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a>}
</span></code></pre></div></p> <p>Error event (example):</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=p>{</span>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=w>        </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Failed to translate page 5&quot;</span><span class=p>,</span>
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=w>        </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;TRANSLATION_ERROR&quot;</span>
</span><span id=__span-69-6><a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-69-7><a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a><span class=p>}</span>
</span></code></pre></div> <p>Done event (example):</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=p>{</span>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;done&quot;</span><span class=p>,</span>
</span><span id=__span-70-3><a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-70-4><a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=translation_12>TRANSLATION</h3> <p>进度事件（示例）：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=p>{</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span>
</span><span id=__span-71-3><a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-71-4><a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=w>        </span><span class=nt>&quot;current&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-71-5><a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=w>        </span><span class=nt>&quot;total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
</span><span id=__span-71-6><a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a><span class=w>        </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;正在翻译第 5 页，共 10 页&quot;</span>
</span><span id=__span-71-7><a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-71-8><a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=p>}</span>
</span></code></pre></div> <p>结果事件（示例）：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=p>{</span>
</span><span id=__span-72-2><a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;result&quot;</span><span class=p>,</span>
</span><span id=__span-72-3><a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-72-4><a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a><span class=w>        </span><span class=nt>&quot;text&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;这是翻译后的文本。&quot;</span><span class=p>,</span>
</span><span id=__span-72-5><a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a><span class=w>        </span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span>
</span><span id=__span-72-6><a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-72-7><a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a><span class=p>}</span>
</span></code></pre></div> <p>错误事件（示例）：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=p>{</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-73-3><a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-73-4><a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a><span class=w>        </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;翻译第 5 页失败&quot;</span><span class=p>,</span>
</span><span id=__span-73-5><a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a><span class=w>        </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;TRANSLATION_ERROR&quot;</span>
</span><span id=__span-73-6><a id=__codelineno-73-6 name=__codelineno-73-6 href=#__codelineno-73-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-73-7><a id=__codelineno-73-7 name=__codelineno-73-7 href=#__codelineno-73-7></a><span class=p>}</span>
</span></code></pre></div> <p>完成事件（示例）：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=p>{</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;done&quot;</span><span class=p>,</span>
</span><span id=__span-74-3><a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-74-4><a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a><span class=p>}</span>
</span><span id=__span-74-5><a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a><span class=err>```jso</span><span class=kc>n</span>
</span><span id=__span-74-6><a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a><span class=p>{</span>
</span><span id=__span-74-7><a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress_update&quot;</span><span class=p>,</span>
</span><span id=__span-74-8><a id=__codelineno-74-8 name=__codelineno-74-8 href=#__codelineno-74-8></a><span class=w>  </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translate Paragraphs&quot;</span><span class=p>,</span>
</span><span id=__span-74-9><a id=__codelineno-74-9 name=__codelineno-74-9 href=#__codelineno-74-9></a><span class=w>  </span><span class=nt>&quot;stage_progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>2.04</span><span class=p>,</span>
</span><span id=__span-74-10><a id=__codelineno-74-10 name=__codelineno-74-10 href=#__codelineno-74-10></a><span class=w>  </span><span class=nt>&quot;stage_current&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-74-11><a id=__codelineno-74-11 name=__codelineno-74-11 href=#__codelineno-74-11></a><span class=w>  </span><span class=nt>&quot;stage_total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>49</span><span class=p>,</span>
</span><span id=__span-74-12><a id=__codelineno-74-12 name=__codelineno-74-12 href=#__codelineno-74-12></a><span class=w>  </span><span class=nt>&quot;overall_progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>53.44</span><span class=p>,</span>
</span><span id=__span-74-13><a id=__codelineno-74-13 name=__codelineno-74-13 href=#__codelineno-74-13></a><span class=w>  </span><span class=nt>&quot;part_index&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-74-14><a id=__codelineno-74-14 name=__codelineno-74-14 href=#__codelineno-74-14></a><span class=w>  </span><span class=nt>&quot;total_parts&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-74-15><a id=__codelineno-74-15 name=__codelineno-74-15 href=#__codelineno-74-15></a><span class=p>}</span>
</span></code></pre></div> <p>json { "type": "finish", "data": { "total_pages": 10, "total_tokens": 1500, "total_cost": 0.015, "output_file": "/path/to/output.pdf" } } <div class="language-text highlight"><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a>---
</span><span id=__span-75-2><a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a>
</span><span id=__span-75-3><a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a>### TRANSLATION
</span><span id=__span-75-4><a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a>
</span><span id=__span-75-5><a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a>完成事件（示例）：
</span><span id=__span-75-6><a id=__codelineno-75-6 name=__codelineno-75-6 href=#__codelineno-75-6></a>
</span><span id=__span-75-7><a id=__codelineno-75-7 name=__codelineno-75-7 href=#__codelineno-75-7></a>```json
</span><span id=__span-75-8><a id=__codelineno-75-8 name=__codelineno-75-8 href=#__codelineno-75-8></a>{
</span><span id=__span-75-9><a id=__codelineno-75-9 name=__codelineno-75-9 href=#__codelineno-75-9></a>  &quot;type&quot;: &quot;finish&quot;,
</span><span id=__span-75-10><a id=__codelineno-75-10 name=__codelineno-75-10 href=#__codelineno-75-10></a>  &quot;data&quot;: {
</span><span id=__span-75-11><a id=__codelineno-75-11 name=__codelineno-75-11 href=#__codelineno-75-11></a>    &quot;total_pages&quot;: 10,
</span><span id=__span-75-12><a id=__codelineno-75-12 name=__codelineno-75-12 href=#__codelineno-75-12></a>    &quot;total_tokens&quot;: 1500,
</span><span id=__span-75-13><a id=__codelineno-75-13 name=__codelineno-75-13 href=#__codelineno-75-13></a>    &quot;total_cost&quot;: 0.015,
</span><span id=__span-75-14><a id=__codelineno-75-14 name=__codelineno-75-14 href=#__codelineno-75-14></a>    &quot;output_file&quot;: &quot;/path/to/output.pdf&quot;
</span><span id=__span-75-15><a id=__codelineno-75-15 name=__codelineno-75-15 href=#__codelineno-75-15></a>  }
</span><span id=__span-75-16><a id=__codelineno-75-16 name=__codelineno-75-16 href=#__codelineno-75-16></a>}
</span><span id=__span-75-17><a id=__codelineno-75-17 name=__codelineno-75-17 href=#__codelineno-75-17></a>```json
</span><span id=__span-75-18><a id=__codelineno-75-18 name=__codelineno-75-18 href=#__codelineno-75-18></a>{
</span><span id=__span-75-19><a id=__codelineno-75-19 name=__codelineno-75-19 href=#__codelineno-75-19></a>  &quot;type&quot;: &quot;finish&quot;,
</span><span id=__span-75-20><a id=__codelineno-75-20 name=__codelineno-75-20 href=#__codelineno-75-20></a>  &quot;translate_result&quot;: {
</span><span id=__span-75-21><a id=__codelineno-75-21 name=__codelineno-75-21 href=#__codelineno-75-21></a>    &quot;original_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.pdf&quot;,
</span><span id=__span-75-22><a id=__codelineno-75-22 name=__codelineno-75-22 href=#__codelineno-75-22></a>    &quot;mono_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.mono.pdf&quot;,
</span><span id=__span-75-23><a id=__codelineno-75-23 name=__codelineno-75-23 href=#__codelineno-75-23></a>    &quot;dual_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.dual.pdf&quot;,
</span><span id=__span-75-24><a id=__codelineno-75-24 name=__codelineno-75-24 href=#__codelineno-75-24></a>    &quot;no_watermark_mono_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.no_watermark.zh-CN.mono.pdf&quot;,
</span><span id=__span-75-25><a id=__codelineno-75-25 name=__codelineno-75-25 href=#__codelineno-75-25></a>    &quot;no_watermark_dual_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.no_watermark.zh-CN.dual.pdf&quot;,
</span><span id=__span-75-26><a id=__codelineno-75-26 name=__codelineno-75-26 href=#__codelineno-75-26></a>    &quot;auto_extracted_glossary_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.glossary.csv&quot;,
</span><span id=__span-75-27><a id=__codelineno-75-27 name=__codelineno-75-27 href=#__codelineno-75-27></a>    &quot;total_seconds&quot;: 42.83,
</span><span id=__span-75-28><a id=__codelineno-75-28 name=__codelineno-75-28 href=#__codelineno-75-28></a>    &quot;peak_memory_usage&quot;: 4651.55
</span><span id=__span-75-29><a id=__codelineno-75-29 name=__codelineno-75-29 href=#__codelineno-75-29></a>  }
</span><span id=__span-75-30><a id=__codelineno-75-30 name=__codelineno-75-30 href=#__codelineno-75-30></a>}
</span></code></pre></div></p> <p><code>{"type": "error", "data": {"message": "Failed to translate page 5", "code": "TRANSLATION_ERROR"}}</code></p> <hr> <h3 id=translation_13>TRANSLATION</h3> <p>错误事件（示例）：<code>{"type": "error", "data": {"message": "Failed to translate page 5", "code": "TRANSLATION_ERROR"}}</code> <div class="language-json highlight"><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=p>{</span>
</span><span id=__span-76-2><a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-76-3><a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Babeldoc translation error: &lt;message&gt;&quot;</span><span class=p>,</span>
</span><span id=__span-76-4><a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a><span class=w>  </span><span class=nt>&quot;error_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;BabeldocError&quot;</span><span class=p>,</span>
</span><span id=__span-76-5><a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a><span class=w>  </span><span class=nt>&quot;details&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;optional original error or traceback&gt;&quot;</span>
</span><span id=__span-76-6><a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a><span class=p>}</span>
</span></code></pre></div></p> <ul> <li> <p><strong>Use <code>--model</code> to select a translation model.</strong> The default model is <code>gpt-4o-mini</code>; however, if you have access to <code>gpt-4o</code>, it is recommended to use it for better quality. You can also use other models, such as <code>gemini-1.5-pro</code>, <code>claude-3-5-sonnet</code>, or <code>deepseek-chat</code> (for Chinese translations). For more information, see <a href=https://pdf2zh-next.com/advanced/SUPPORTED_LANGUAGES.html>Supported Languages</a>.</p> </li> <li> <p><strong>Use <code>--source-language</code> and <code>--target-language</code> to specify the language.</strong> The default is to automatically detect the source language and translate to <code>zh</code> (Simplified Chinese). You can also translate to other languages, such as <code>en</code> (English), <code>ja</code> (Japanese), <code>ko</code> (Korean), etc. For more information, see <a href=https://pdf2zh-next.com/advanced/LANGUAGE_CODE.html>Language Code</a>.</p> </li> <li> <p><strong>Use <code>--service</code> to select a translation service.</strong> The default service is <code>openai</code>; you can also use <code>gemini</code>, <code>claude</code>, <code>deepseek</code>, <code>azure</code>, <code>aliyun</code>, or <code>siliconflow</code>. For more information, see <a href=https://pdf2zh-next.com/advanced/TRANSLATION_SERVICES.html>Documentation of Translation Services</a>.</p> </li> <li> <p><strong>Use <code>--api-key</code> to provide your API key.</strong> You can also set the API key via the environment variable <code>OPENAI_API_KEY</code>, <code>GEMINI_API_KEY</code>, etc. For more information, see <a href=https://pdf2zh-next.com/advanced/TRANSLATION_SERVICES.html>Documentation of Translation Services</a>.</p> </li> <li> <p><strong>Use <code>--output</code> to specify the output file path.</strong> The default is to output to the same directory as the input file with the suffix <code>_translated</code> added.</p> </li> <li> <p><strong>Use <code>--page-range</code> to specify the page range to translate.</strong> For example, <code>--page-range 1-5,10,15-20</code> will translate pages 1 to 5, 10, and 15 to 20.</p> </li> <li> <p><strong>Use <code>--batch</code> to process multiple files.</strong> For example, <code>--batch *.pdf</code> will translate all PDF files in the current directory.</p> </li> <li> <p><strong>Use <code>--threads</code> to set the number of concurrent threads.</strong> The default is the number of CPU cores. Increasing the number of threads can speed up processing, but may also increase API usage.</p> </li> <li> <p><strong>Use <code>--dry-run</code> to simulate the translation process without actually calling the API.</strong> This is useful for checking the number of pages and estimated cost.</p> </li> <li> <p><strong>Use <code>--cost-limit</code> to set a cost limit.</strong> The translation will stop if the estimated cost exceeds this limit.</p> </li> <li> <p><strong>Use <code>--no-cache</code> to disable caching.</strong> By default, translated pages are cached to avoid retranslating the same content. Use this option to force retranslation.</p> </li> <li> <p><strong>Use <code>--cache-dir</code> to specify the cache directory.</strong> The default is <code>./.pdf2zh_cache</code>.</p> </li> <li> <p><strong>Use <code>--log-level</code> to set the log level.</strong> The default is <code>INFO</code>. You can set it to <code>DEBUG</code> for more detailed logs.</p> </li> <li> <p><strong>Use <code>--config</code> to specify a configuration file.</strong> You can save commonly used options in a configuration file and load them with this option.</p> </li> <li> <p><strong>Use <code>--help</code> to view all available options.</strong></p> </li> </ul> <hr> <h3 id=translated-text>TRANSLATED TEXT</h3> <h3 id=_48>注意事项与最佳实践</h3> <ul> <li> <p><strong>使用 <code>--model</code> 选择翻译模型。</strong> 默认模型是 <code>gpt-4o-mini</code>；但是，如果您可以使用 <code>gpt-4o</code>，推荐使用它以获得更好的质量。您也可以使用其他模型，例如 <code>gemini-1.5-pro</code>、<code>claude-3-5-sonnet</code> 或 <code>deepseek-chat</code>（用于中文翻译）。更多信息请参见 <a href=https://pdf2zh-next.com/advanced/SUPPORTED_LANGUAGES.html>支持的语言</a>。</p> </li> <li> <p><strong>使用 <code>--source-language</code> 和 <code>--target-language</code> 指定语言。</strong> 默认会自动检测源语言并翻译为 <code>zh</code>（简体中文）。您也可以翻译为其他语言，例如 <code>en</code>（英语）、<code>ja</code>（日语）、<code>ko</code>（韩语）等。更多信息请参见 <a href=https://pdf2zh-next.com/advanced/LANGUAGE_CODE.html>语言代码</a>。</p> </li> <li> <p><strong>使用 <code>--service</code> 选择翻译服务。</strong> 默认服务是 <code>openai</code>；您也可以使用 <code>gemini</code>、<code>claude</code>、<code>deepseek</code>、<code>azure</code>、<code>aliyun</code> 或 <code>siliconflow</code>。更多信息请参见 <a href=https://pdf2zh-next.com/advanced/TRANSLATION_SERVICES.html>翻译服务文档</a>。</p> </li> <li> <p><strong>使用 <code>--api-key</code> 提供您的 API 密钥。</strong> 您也可以通过环境变量 <code>OPENAI_API_KEY</code>、<code>GEMINI_API_KEY</code> 等设置 API 密钥。更多信息请参见 <a href=https://pdf2zh-next.com/advanced/TRANSLATION_SERVICES.html>翻译服务文档</a>。</p> </li> <li> <p><strong>使用 <code>--output</code> 指定输出文件路径。</strong> 默认输出到与输入文件相同的目录，并添加后缀 <code>_translated</code>。</p> </li> <li> <p><strong>使用 <code>--page-range</code> 指定要翻译的页面范围。</strong> 例如，<code>--page-range 1-5,10,15-20</code> 将翻译第 1 到 5 页、第 10 页和第 15 到 20 页。</p> </li> <li> <p><strong>使用 <code>--batch</code> 处理多个文件。</strong> 例如，<code>--batch *.pdf</code> 将翻译当前目录中的所有 PDF 文件。</p> </li> <li> <p><strong>使用 <code>--threads</code> 设置并发线程数。</strong> 默认是 CPU 核心数。增加线程数可以加快处理速度，但也可能增加 API 使用量。</p> </li> <li> <p><strong>使用 <code>--dry-run</code> 模拟翻译过程而不实际调用 API。</strong> 这对于检查页面数和估算成本很有用。</p> </li> <li> <p><strong>使用 <code>--cost-limit</code> 设置成本限制。</strong> 如果估算成本超过此限制，翻译将停止。</p> </li> <li> <p><strong>使用 <code>--no-cache</code> 禁用缓存。</strong> 默认情况下，已翻译的页面会被缓存以避免重复翻译相同内容。使用此选项可强制重新翻译。</p> </li> <li> <p><strong>使用 <code>--cache-dir</code> 指定缓存目录。</strong> 默认是 <code>./.pdf2zh_cache</code>。</p> </li> <li> <p><strong>使用 <code>--log-level</code> 设置日志级别。</strong> 默认是 <code>INFO</code>。您可以将其设置为 <code>DEBUG</code> 以获取更详细的日志。</p> </li> <li> <p><strong>使用 <code>--config</code> 指定配置文件。</strong> 您可以将常用选项保存在配置文件中，并通过此选项加载它们。</p> </li> </ul> <h2 id=-help>- <strong>使用 <code>--help</code> 查看所有可用选项。</strong></h2> <h3 id=translation_14>TRANSLATION</h3> <ul> <li>始终处理生成器中的错误事件和异常。</li> <li>在 <code>finish</code> 时中断循环以避免不必要的工作。</li> <li>在调用前确保 <code>file</code> 存在且 <code>settings.validate_settings()</code> 通过。</li> <li>大型文档可能会被拆分；使用 <code>part_index/total_parts</code> 和 <code>overall_progress</code> 来驱动您的 UI。</li> <li>如果您的 UI 对重复的相同更新敏感，请对 <code>progress_update</code> 进行防抖处理。</li> <li><code>report_interval</code>（SettingsModel）：仅控制 <code>progress_update</code> 事件的发出频率。它不影响 <code>stage_summary</code>、<code>progress_start</code>、<code>progress_end</code> 或 <code>finish</code>。默认值为 0.1 秒，最小允许值为 0.05 秒。根据进度监视器逻辑，当 <code>stage_total &lt;= 3</code> 时，更新不受 <code>report_interval</code> 的限制。</li> </ul> <div align=right> <h6><small>本页面的部分内容由 GPT 翻译，可能包含错误。</small></h6> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年11月24日 12:48:22 UTC">2025年11月24日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年11月24日 12:48:22 UTC">2025年11月24日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=贡献者> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg> </span> <nav> <a href=mailto:shidingbo31415@163.com>pppppop</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../../supported_languages.html class="md-footer__link md-footer__link--prev" aria-label="上一页: 支持的语言"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> 上一页 </span> <div class=md-ellipsis> 支持的语言 </div> </div> </a> <a href=../../FAQ.html class="md-footer__link md-footer__link--next" aria-label="下一页: 常见问题"> <div class=md-footer__title> <span class=md-footer__direction> 下一页 </span> <div class=md-ellipsis> 常见问题 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/pdf2zh-next/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>