<!doctype html><html lang=zh-TW class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="PDF scientific paper translation and bilingual comparison."><meta name=author content=awwaawwa><link rel=canonical href=https://pdf2zh-next.com/zh_TW/advanced/API/python.html><link rel=prev href=../../supported_languages.html><link rel=next href=../../FAQ.html><link rel=alternate href=../../../advanced/API/python.html hreflang=en><link rel=alternate href=../../../zh/advanced/API/python.html hreflang=zh><link rel=alternate href=python.html hreflang=zh_TW><link rel=alternate href=../../../ja/advanced/API/python.html hreflang=ja><link rel=alternate href=../../../ko/advanced/API/python.html hreflang=ko><link rel=alternate href=../../../fr/advanced/API/python.html hreflang=fr><link rel=alternate href=../../../de/advanced/API/python.html hreflang=de><link rel=alternate href=../../../es/advanced/API/python.html hreflang=es><link rel=alternate href=../../../ru/advanced/API/python.html hreflang=ru><link rel=alternate href=../../../it/advanced/API/python.html hreflang=it><link rel=alternate href=../../../pt/advanced/API/python.html hreflang=pt><link rel=icon href=../../../images/logo_photo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>API - PDFMathTranslate</title><link rel=stylesheet href=../../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Red Hat Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#supported-languages class=md-skip> 跳轉到 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=頁首> <a href=../../index.html title=PDFMathTranslate class="md-header__button md-logo" aria-label=PDFMathTranslate data-md-component=logo> <img src=../../../images/logo_photo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PDFMathTranslate </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=pink data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label=選擇語言> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../../../advanced/API/python.html hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=../../../zh/advanced/API/python.html hreflang=zh class=md-select__link> 简体中文 </a> </li> <li class=md-select__item> <a href=python.html hreflang=zh_TW class=md-select__link> 繁體中文 </a> </li> <li class=md-select__item> <a href=../../../ja/advanced/API/python.html hreflang=ja class=md-select__link> 日本語 </a> </li> <li class=md-select__item> <a href=../../../ko/advanced/API/python.html hreflang=ko class=md-select__link> 한국어 </a> </li> <li class=md-select__item> <a href=../../../fr/advanced/API/python.html hreflang=fr class=md-select__link> Français </a> </li> <li class=md-select__item> <a href=../../../de/advanced/API/python.html hreflang=de class=md-select__link> Deutsch </a> </li> <li class=md-select__item> <a href=../../../es/advanced/API/python.html hreflang=es class=md-select__link> Español </a> </li> <li class=md-select__item> <a href=../../../ru/advanced/API/python.html hreflang=ru class=md-select__link> Русский </a> </li> <li class=md-select__item> <a href=../../../it/advanced/API/python.html hreflang=it class=md-select__link> Italiano </a> </li> <li class=md-select__item> <a href=../../../pt/advanced/API/python.html hreflang=pt class=md-select__link> Português </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜尋 placeholder=搜尋 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=搜尋> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清除 aria-label=清除 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜尋引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next title=前往倉庫 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> PDFMathTranslate/PDFMathTranslate-next </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=標籤 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 首頁 </a> </li> <li class=md-tabs__item> <a href=../../getting-started/getting-started.html class=md-tabs__link> 開始使用 </a> </li> <li class=md-tabs__item> <a href=../advanced.html class=md-tabs__link> 高級選項 </a> </li> <li class=md-tabs__item> <a href=../../supported_languages.html class=md-tabs__link> 支持的語言 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=python.html class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../FAQ.html class=md-tabs__link> 常見問題 </a> </li> <li class=md-tabs__item> <a href=../../community/Contribution-Guide.html class=md-tabs__link> 社區 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=導覽列 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=PDFMathTranslate class="md-nav__button md-logo" aria-label=PDFMathTranslate data-md-component=logo> <img src=../../../images/logo_photo.svg alt=logo> </a> PDFMathTranslate </label> <div class=md-nav__source> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next title=前往倉庫 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> PDFMathTranslate/PDFMathTranslate-next </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 首頁 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 開始使用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 開始使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/getting-started.html class=md-nav__link> <span class=md-ellipsis> 快速開始 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 如何安裝 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 如何安裝 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_winexe.html class=md-nav__link> <span class=md-ellipsis> Windows EXE </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_docker.html class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_uv.html class=md-nav__link> <span class=md-ellipsis> UV </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 如何使用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 如何使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/USAGE_commandline.html class=md-nav__link> <span class=md-ellipsis> 命令行 </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/USAGE_webui.html class=md-nav__link> <span class=md-ellipsis> WebUI </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/guaguastandup/zotero-pdf2zh class=md-nav__link> <span class=md-ellipsis> guaguastandup/zotero-pdf2zh </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> 高級選項 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 高級選項 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../advanced.html class=md-nav__link> <span class=md-ellipsis> 高級選項 </span> </a> </li> <li class=md-nav__item> <a href=../Language-Codes.html class=md-nav__link> <span class=md-ellipsis> 語言代碼 </span> </a> </li> <li class=md-nav__item> <a href=../Documentation-of-Translation-Services.html class=md-nav__link> <span class=md-ellipsis> 翻譯服務文檔 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Translation Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Translation Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../TranslationServices/Aliyun.html class=md-nav__link> <span class=md-ellipsis> 阿里雲 </span> </a> </li> <li class=md-nav__item> <a href=../TranslationServices/SiliconFlow.html class=md-nav__link> <span class=md-ellipsis> 硅基流動 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../supported_languages.html class=md-nav__link> <span class=md-ellipsis> 支持的語言 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=python.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> API </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目錄> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目錄 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#supported-languages class=md-nav__link> <span class=md-ellipsis> Supported Languages </span> </a> <nav class=md-nav aria-label="Supported Languages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notes class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#translation-result class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 支持的語言 </span> </a> <nav class=md-nav aria-label=支持的語言> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> <li class=md-nav__item> <a href=#function-signature class=md-nav__link> <span class=md-ellipsis> Function Signature </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#return-value class=md-nav__link> <span class=md-ellipsis> Return Value </span> </a> </li> <li class=md-nav__item> <a href=#example-usage class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#notes_1 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#language-codes class=md-nav__link> <span class=md-ellipsis> Language Codes </span> </a> </li> <li class=md-nav__item> <a href=#notes_2 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#examples_1 class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#supported-languages_1 class=md-nav__link> <span class=md-ellipsis> Supported Languages </span> </a> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_1 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 語言代碼 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 支持的語言 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 結論 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_2 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#parameters_1 class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#return-value_1 class=md-nav__link> <span class=md-ellipsis> Return Value </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#notes_3 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_3 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 函數簽名 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 參數 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 返回值 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#eventmodel class=md-nav__link> <span class=md-ellipsis> EventModel </span> </a> </li> <li class=md-nav__item> <a href=#example_1 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#notes_4 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_4 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#eventmodel_1 class=md-nav__link> <span class=md-ellipsis> EventModel </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#command-line-usage class=md-nav__link> <span class=md-ellipsis> Command Line Usage </span> </a> <nav class=md-nav aria-label="Command Line Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#options class=md-nav__link> <span class=md-ellipsis> Options </span> </a> </li> <li class=md-nav__item> <a href=#examples_2 class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#configuration-file class=md-nav__link> <span class=md-ellipsis> Configuration File </span> </a> </li> <li class=md-nav__item> <a href=#environment-variables class=md-nav__link> <span class=md-ellipsis> Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=#notes_5 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#output class=md-nav__link> <span class=md-ellipsis> OUTPUT </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 命令行使用 </span> </a> <nav class=md-nav aria-label=命令行使用> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 選項 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 配置文件 </span> </a> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 環境變數 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_5 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> <nav class=md-nav aria-label="TRANSLATION RESULT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#event-types class=md-nav__link> <span class=md-ellipsis> Event Types </span> </a> </li> <li class=md-nav__item> <a href=#event-data class=md-nav__link> <span class=md-ellipsis> Event Data </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-status-events class=md-nav__link> <span class=md-ellipsis> Event Data for status Events </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-progress-events class=md-nav__link> <span class=md-ellipsis> Event Data for progress Events </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-result-events class=md-nav__link> <span class=md-ellipsis> Event Data for result Events </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-error-events class=md-nav__link> <span class=md-ellipsis> Event Data for error Events </span> </a> </li> <li class=md-nav__item> <a href=#example_2 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_6 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 事件串流合約 </span> </a> <nav class=md-nav aria-label=事件串流合約> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 事件類型 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#status class=md-nav__link> <span class=md-ellipsis> status 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#progress class=md-nav__link> <span class=md-ellipsis> progress 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#result class=md-nav__link> <span class=md-ellipsis> result 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#error class=md-nav__link> <span class=md-ellipsis> error 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_7 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_8 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_9 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_10 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#minimal-usage-example-sync-minimal-usage-example-sync class=md-nav__link> <span class=md-ellipsis> Minimal Usage Example (Sync) {#minimal-usage-example-sync} </span> </a> </li> <li class=md-nav__item> <a href=#output_1 class=md-nav__link> <span class=md-ellipsis> OUTPUT </span> </a> </li> <li class=md-nav__item> <a href=#- class=md-nav__link> <span class=md-ellipsis> 最小使用範例（異步） {#最小使用範例 - 異步} </span> </a> </li> <li class=md-nav__item> <a href=#-_1 class=md-nav__link> <span class=md-ellipsis> 最小使用範例（同步） {#最小使用範例 - 同步} </span> </a> </li> <li class=md-nav__item> <a href=#output_2 class=md-nav__link> <span class=md-ellipsis> OUTPUT </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 取消政策 </span> </a> </li> <li class=md-nav__item> <a href=#example_3 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#notes_6 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_11 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_12 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 事件形狀範例 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_13 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_14 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_15 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_16 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#output-language class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#zh_tw class=md-nav__link> <span class=md-ellipsis> zh_TW </span> </a> <nav class=md-nav aria-label=zh_TW> <ul class=md-nav__list> <li class=md-nav__item> <a href=#translation-result_17 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../FAQ.html class=md-nav__link> <span class=md-ellipsis> 常見問題 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> 社區 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> 社區 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../community/Contribution-Guide.html class=md-nav__link> <span class=md-ellipsis> Contribution-Guide </span> </a> </li> <li class=md-nav__item> <a href=../../community/Translate-Contribution-Guide.html class=md-nav__link> <span class=md-ellipsis> 文檔翻譯貢獻指南 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目錄> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目錄 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#supported-languages class=md-nav__link> <span class=md-ellipsis> Supported Languages </span> </a> <nav class=md-nav aria-label="Supported Languages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notes class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#translation-result class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 支持的語言 </span> </a> <nav class=md-nav aria-label=支持的語言> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> <li class=md-nav__item> <a href=#function-signature class=md-nav__link> <span class=md-ellipsis> Function Signature </span> </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#return-value class=md-nav__link> <span class=md-ellipsis> Return Value </span> </a> </li> <li class=md-nav__item> <a href=#example-usage class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> </li> <li class=md-nav__item> <a href=#notes_1 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#language-codes class=md-nav__link> <span class=md-ellipsis> Language Codes </span> </a> </li> <li class=md-nav__item> <a href=#notes_2 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#examples_1 class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#supported-languages_1 class=md-nav__link> <span class=md-ellipsis> Supported Languages </span> </a> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_1 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 語言代碼 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 支持的語言 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 結論 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_2 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#parameters_1 class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class=md-nav__item> <a href=#return-value_1 class=md-nav__link> <span class=md-ellipsis> Return Value </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#notes_3 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_3 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 函數簽名 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 參數 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 返回值 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 示例 </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#eventmodel class=md-nav__link> <span class=md-ellipsis> EventModel </span> </a> </li> <li class=md-nav__item> <a href=#example_1 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#notes_4 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_4 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#eventmodel_1 class=md-nav__link> <span class=md-ellipsis> EventModel </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#command-line-usage class=md-nav__link> <span class=md-ellipsis> Command Line Usage </span> </a> <nav class=md-nav aria-label="Command Line Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#options class=md-nav__link> <span class=md-ellipsis> Options </span> </a> </li> <li class=md-nav__item> <a href=#examples_2 class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#configuration-file class=md-nav__link> <span class=md-ellipsis> Configuration File </span> </a> </li> <li class=md-nav__item> <a href=#environment-variables class=md-nav__link> <span class=md-ellipsis> Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=#notes_5 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#output class=md-nav__link> <span class=md-ellipsis> OUTPUT </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 命令行使用 </span> </a> <nav class=md-nav aria-label=命令行使用> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 選項 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 配置文件 </span> </a> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 環境變數 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_5 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> <nav class=md-nav aria-label="TRANSLATION RESULT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#event-types class=md-nav__link> <span class=md-ellipsis> Event Types </span> </a> </li> <li class=md-nav__item> <a href=#event-data class=md-nav__link> <span class=md-ellipsis> Event Data </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-status-events class=md-nav__link> <span class=md-ellipsis> Event Data for status Events </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-progress-events class=md-nav__link> <span class=md-ellipsis> Event Data for progress Events </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-result-events class=md-nav__link> <span class=md-ellipsis> Event Data for result Events </span> </a> </li> <li class=md-nav__item> <a href=#event-data-for-error-events class=md-nav__link> <span class=md-ellipsis> Event Data for error Events </span> </a> </li> <li class=md-nav__item> <a href=#example_2 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_6 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 事件串流合約 </span> </a> <nav class=md-nav aria-label=事件串流合約> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 事件類型 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#status class=md-nav__link> <span class=md-ellipsis> status 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#progress class=md-nav__link> <span class=md-ellipsis> progress 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#result class=md-nav__link> <span class=md-ellipsis> result 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#error class=md-nav__link> <span class=md-ellipsis> error 事件的事件數據 </span> </a> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#translation-result_7 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_8 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_9 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_10 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#minimal-usage-example-sync-minimal-usage-example-sync class=md-nav__link> <span class=md-ellipsis> Minimal Usage Example (Sync) {#minimal-usage-example-sync} </span> </a> </li> <li class=md-nav__item> <a href=#output_1 class=md-nav__link> <span class=md-ellipsis> OUTPUT </span> </a> </li> <li class=md-nav__item> <a href=#- class=md-nav__link> <span class=md-ellipsis> 最小使用範例（異步） {#最小使用範例 - 異步} </span> </a> </li> <li class=md-nav__item> <a href=#-_1 class=md-nav__link> <span class=md-ellipsis> 最小使用範例（同步） {#最小使用範例 - 同步} </span> </a> </li> <li class=md-nav__item> <a href=#output_2 class=md-nav__link> <span class=md-ellipsis> OUTPUT </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 取消政策 </span> </a> </li> <li class=md-nav__item> <a href=#example_3 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#notes_6 class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_11 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 範例 </span> </a> </li> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 注意事項 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_12 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 事件形狀範例 </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_13 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_14 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_15 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#translation-result_16 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> <li class=md-nav__item> <a href=#output-language class=md-nav__link> <span class=md-ellipsis> OUTPUT LANGUAGE </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#zh_tw class=md-nav__link> <span class=md-ellipsis> zh_TW </span> </a> <nav class=md-nav aria-label=zh_TW> <ul class=md-nav__list> <li class=md-nav__item> <a href=#translation-result_17 class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/edit/main/docs/zh_TW/advanced/API/python.md title=編輯此頁 class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/raw/main/docs/zh_TW/advanced/API/python.md title=查看此頁原始碼 class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1>API</h1> <blockquote> <p>For more details, see <a href=https://pdf2zh-next.com/community/FOR_TRANSLATORS.md>For Translators</a>.</p> </blockquote> <h2 id=supported-languages>Supported Languages</h2> <p><code>pdf2zh</code> supports a wide range of languages for translation. The following table lists the supported languages and their corresponding language codes.</p> <table> <thead> <tr> <th>Language</th> <th>Code</th> <th>Language</th> <th>Code</th> </tr> </thead> <tbody> <tr> <td>Afrikaans</td> <td><code>af</code></td> <td>Korean</td> <td><code>ko</code></td> </tr> <tr> <td>Albanian</td> <td><code>sq</code></td> <td>Latvian</td> <td><code>lv</code></td> </tr> <tr> <td>Amharic</td> <td><code>am</code></td> <td>Lithuanian</td> <td><code>lt</code></td> </tr> <tr> <td>Arabic</td> <td><code>ar</code></td> <td>Macedonian</td> <td><code>mk</code></td> </tr> <tr> <td>Armenian</td> <td><code>hy</code></td> <td>Malay</td> <td><code>ms</code></td> </tr> <tr> <td>Azerbaijani</td> <td><code>az</code></td> <td>Malayalam</td> <td><code>ml</code></td> </tr> <tr> <td>Basque</td> <td><code>eu</code></td> <td>Maltese</td> <td><code>mt</code></td> </tr> <tr> <td>Belarusian</td> <td><code>be</code></td> <td>Maori</td> <td><code>mi</code></td> </tr> <tr> <td>Bengali</td> <td><code>bn</code></td> <td>Marathi</td> <td><code>mr</code></td> </tr> <tr> <td>Bosnian</td> <td><code>bs</code></td> <td>Mongolian</td> <td><code>mn</code></td> </tr> <tr> <td>Bulgarian</td> <td><code>bg</code></td> <td>Nepali</td> <td><code>ne</code></td> </tr> <tr> <td>Catalan</td> <td><code>ca</code></td> <td>Norwegian</td> <td><code>no</code></td> </tr> <tr> <td>Cebuano</td> <td><code>ceb</code></td> <td>Nyanja</td> <td><code>ny</code></td> </tr> <tr> <td>Chinese (Simplified)</td> <td><code>zh-CN</code></td> <td>Odia</td> <td><code>or</code></td> </tr> <tr> <td>Chinese (Traditional)</td> <td><code>zh-TW</code></td> <td>Pashto</td> <td><code>ps</code></td> </tr> <tr> <td>Corsican</td> <td><code>co</code></td> <td>Persian</td> <td><code>fa</code></td> </tr> <tr> <td>Croatian</td> <td><code>hr</code></td> <td>Polish</td> <td><code>pl</code></td> </tr> <tr> <td>Czech</td> <td><code>cs</code></td> <td>Portuguese</td> <td><code>pt</code></td> </tr> <tr> <td>Danish</td> <td><code>da</code></td> <td>Punjabi</td> <td><code>pa</code></td> </tr> <tr> <td>Dutch</td> <td><code>nl</code></td> <td>Romanian</td> <td><code>ro</code></td> </tr> <tr> <td>English</td> <td><code>en</code></td> <td>Russian</td> <td><code>ru</code></td> </tr> <tr> <td>Esperanto</td> <td><code>eo</code></td> <td>Samoan</td> <td><code>sm</code></td> </tr> <tr> <td>Estonian</td> <td><code>et</code></td> <td>Scots Gaelic</td> <td><code>gd</code></td> </tr> <tr> <td>Filipino</td> <td><code>fil</code></td> <td>Serbian</td> <td><code>sr</code></td> </tr> <tr> <td>Finnish</td> <td><code>fi</code></td> <td>Sesotho</td> <td><code>st</code></td> </tr> <tr> <td>French</td> <td><code>fr</code></td> <td>Shona</td> <td><code>sn</code></td> </tr> <tr> <td>Galician</td> <td><code>gl</code></td> <td>Sindhi</td> <td><code>sd</code></td> </tr> <tr> <td>Georgian</td> <td><code>ka</code></td> <td>Sinhala</td> <td><code>si</code></td> </tr> <tr> <td>German</td> <td><code>de</code></td> <td>Slovak</td> <td><code>sk</code></td> </tr> <tr> <td>Greek</td> <td><code>el</code></td> <td>Slovenian</td> <td><code>sl</code></td> </tr> <tr> <td>Gujarati</td> <td><code>gu</code></td> <td>Somali</td> <td><code>so</code></td> </tr> <tr> <td>Haitian Creole</td> <td><code>ht</code></td> <td>Spanish</td> <td><code>es</code></td> </tr> <tr> <td>Hausa</td> <td><code>ha</code></td> <td>Sundanese</td> <td><code>su</code></td> </tr> <tr> <td>Hawaiian</td> <td><code>haw</code></td> <td>Swahili</td> <td><code>sw</code></td> </tr> <tr> <td>Hebrew</td> <td><code>he</code></td> <td>Swedish</td> <td><code>sv</code></td> </tr> <tr> <td>Hindi</td> <td><code>hi</code></td> <td>Tajik</td> <td><code>tg</code></td> </tr> <tr> <td>Hmong</td> <td><code>hmn</code></td> <td>Tamil</td> <td><code>ta</code></td> </tr> <tr> <td>Hungarian</td> <td><code>hu</code></td> <td>Tatar</td> <td><code>tt</code></td> </tr> <tr> <td>Icelandic</td> <td><code>is</code></td> <td>Telugu</td> <td><code>te</code></td> </tr> <tr> <td>Igbo</td> <td><code>ig</code></td> <td>Thai</td> <td><code>th</code></td> </tr> <tr> <td>Indonesian</td> <td><code>id</code></td> <td>Turkish</td> <td><code>tr</code></td> </tr> <tr> <td>Irish</td> <td><code>ga</code></td> <td>Turkmen</td> <td><code>tk</code></td> </tr> <tr> <td>Italian</td> <td><code>it</code></td> <td>Ukrainian</td> <td><code>uk</code></td> </tr> <tr> <td>Japanese</td> <td><code>ja</code></td> <td>Urdu</td> <td><code>ur</code></td> </tr> <tr> <td>Javanese</td> <td><code>jv</code></td> <td>Uyghur</td> <td><code>ug</code></td> </tr> <tr> <td>Kannada</td> <td><code>kn</code></td> <td>Uzbek</td> <td><code>uz</code></td> </tr> <tr> <td>Kazakh</td> <td><code>kk</code></td> <td>Vietnamese</td> <td><code>vi</code></td> </tr> <tr> <td>Khmer</td> <td><code>km</code></td> <td>Welsh</td> <td><code>cy</code></td> </tr> <tr> <td>Kinyarwanda</td> <td><code>rw</code></td> <td>Xhosa</td> <td><code>xh</code></td> </tr> <tr> <td>Kurdish</td> <td><code>ku</code></td> <td>Yiddish</td> <td><code>yi</code></td> </tr> <tr> <td>Kyrgyz</td> <td><code>ky</code></td> <td>Yoruba</td> <td><code>yo</code></td> </tr> <tr> <td>Lao</td> <td><code>lo</code></td> <td>Zulu</td> <td><code>zu</code></td> </tr> </tbody> </table> <h3 id=notes>Notes</h3> <ul> <li>The language codes follow the ISO 639-1 standard where applicable.</li> <li>For Chinese, both Simplified (<code>zh-CN</code>) and Traditional (<code>zh-TW</code>) are supported.</li> <li>The tool automatically detects the source language if not specified.</li> </ul> <h3 id=examples>Examples</h3> <p>To translate a PDF from English to Chinese (Simplified), use the following command:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pdf2zh<span class=w> </span>--source-lang<span class=w> </span>en<span class=w> </span>--target-lang<span class=w> </span>zh-CN<span class=w> </span>input.pdf
</span></code></pre></div> <p>For more advanced usage, see the <a href=https://pdf2zh-next.com/advanced/ADVANCED.md>Advanced Options</a> documentation.</p> <hr> <h3 id=translation-result>TRANSLATION RESULT</h3> <div class="admonition note"> <p class=admonition-title>Note</p> <p>本文檔可能包含 AI 生成的內容。雖然我們力求準確，但可能仍存在不準確之處。請透過以下方式報告任何問題：</p> <ul> <li><a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/issues>GitHub Issues</a></li> <li>社區貢獻（歡迎提交 PR！）</li> </ul> <p>更多詳細信息，請參閱 <a href=https://pdf2zh-next.com/community/FOR_TRANSLATORS.md>文檔翻譯貢獻指南</a>。</p> </div> <h2 id=_1>支持的語言</h2> <p><code>pdf2zh</code> 支持多種語言進行翻譯。下表列出了支持的語言及其對應的語言代碼。</p> <table> <thead> <tr> <th>語言</th> <th>代碼</th> <th>語言</th> <th>代碼</th> </tr> </thead> <tbody> <tr> <td>南非荷蘭語</td> <td><code>af</code></td> <td>韓語</td> <td><code>ko</code></td> </tr> <tr> <td>阿爾巴尼亞語</td> <td><code>sq</code></td> <td>拉脫維亞語</td> <td><code>lv</code></td> </tr> <tr> <td>阿姆哈拉語</td> <td><code>am</code></td> <td>立陶宛語</td> <td><code>lt</code></td> </tr> <tr> <td>阿拉伯語</td> <td><code>ar</code></td> <td>馬其頓語</td> <td><code>mk</code></td> </tr> <tr> <td>亞美尼亞語</td> <td><code>hy</code></td> <td>馬來語</td> <td><code>ms</code></td> </tr> <tr> <td>阿塞拜疆語</td> <td><code>az</code></td> <td>馬拉雅拉姆語</td> <td><code>ml</code></td> </tr> <tr> <td>巴斯克語</td> <td><code>eu</code></td> <td>馬耳他語</td> <td><code>mt</code></td> </tr> <tr> <td>白俄羅斯語</td> <td><code>be</code></td> <td>毛利語</td> <td><code>mi</code></td> </tr> <tr> <td>孟加拉語</td> <td><code>bn</code></td> <td>馬拉地語</td> <td><code>mr</code></td> </tr> <tr> <td>波斯尼亞語</td> <td><code>bs</code></td> <td>蒙古語</td> <td><code>mn</code></td> </tr> <tr> <td>保加利亞語</td> <td><code>bg</code></td> <td>尼泊爾語</td> <td><code>ne</code></td> </tr> <tr> <td>加泰羅尼亞語</td> <td><code>ca</code></td> <td>挪威語</td> <td><code>no</code></td> </tr> <tr> <td>宿務語</td> <td><code>ceb</code></td> <td>尼揚賈語</td> <td><code>ny</code></td> </tr> <tr> <td>中文（簡體）</td> <td><code>zh-CN</code></td> <td>奧里亞語</td> <td><code>or</code></td> </tr> <tr> <td>中文（繁體）</td> <td><code>zh-TW</code></td> <td>普什圖語</td> <td><code>ps</code></td> </tr> <tr> <td>科西嘉語</td> <td><code>co</code></td> <td>波斯語</td> <td><code>fa</code></td> </tr> <tr> <td>克羅地亞語</td> <td><code>hr</code></td> <td>波蘭語</td> <td><code>pl</code></td> </tr> <tr> <td>捷克語</td> <td><code>cs</code></td> <td>葡萄牙語</td> <td><code>pt</code></td> </tr> <tr> <td>丹麥語</td> <td><code>da</code></td> <td>旁遮普語</td> <td><code>pa</code></td> </tr> <tr> <td>荷蘭語</td> <td><code>nl</code></td> <td>羅馬尼亞語</td> <td><code>ro</code></td> </tr> <tr> <td>英語</td> <td><code>en</code></td> <td>俄語</td> <td><code>ru</code></td> </tr> <tr> <td>世界語</td> <td><code>eo</code></td> <td>薩摩亞語</td> <td><code>sm</code></td> </tr> <tr> <td>愛沙尼亞語</td> <td><code>et</code></td> <td>蘇格蘭蓋爾語</td> <td><code>gd</code></td> </tr> <tr> <td>菲律賓語</td> <td><code>fil</code></td> <td>塞爾維亞語</td> <td><code>sr</code></td> </tr> <tr> <td>芬蘭語</td> <td><code>fi</code></td> <td>塞索托語</td> <td><code>st</code></td> </tr> <tr> <td>法語</td> <td><code>fr</code></td> <td>紹納語</td> <td><code>sn</code></td> </tr> <tr> <td>加利西亞語</td> <td><code>gl</code></td> <td>信德語</td> <td><code>sd</code></td> </tr> <tr> <td>格魯吉亞語</td> <td><code>ka</code></td> <td>僧伽羅語</td> <td><code>si</code></td> </tr> <tr> <td>德語</td> <td><code>de</code></td> <td>斯洛伐克語</td> <td><code>sk</code></td> </tr> <tr> <td>希臘語</td> <td><code>el</code></td> <td>斯洛文尼亞語</td> <td><code>sl</code></td> </tr> <tr> <td>古吉拉特語</td> <td><code>gu</code></td> <td>索馬里語</td> <td><code>so</code></td> </tr> <tr> <td>海地克里奧爾語</td> <td><code>ht</code></td> <td>西班牙語</td> <td><code>es</code></td> </tr> <tr> <td>豪薩語</td> <td><code>ha</code></td> <td>巽他語</td> <td><code>su</code></td> </tr> <tr> <td>夏威夷語</td> <td><code>haw</code></td> <td>斯瓦希里語</td> <td><code>sw</code></td> </tr> <tr> <td>希伯來語</td> <td><code>he</code></td> <td>瑞典語</td> <td><code>sv</code></td> </tr> <tr> <td>印地語</td> <td><code>hi</code></td> <td>塔吉克語</td> <td><code>tg</code></td> </tr> <tr> <td>苗語</td> <td><code>hmn</code></td> <td>泰米爾語</td> <td><code>ta</code></td> </tr> <tr> <td>匈牙利語</td> <td><code>hu</code></td> <td>韃靼語</td> <td><code>tt</code></td> </tr> <tr> <td>冰島語</td> <td><code>is</code></td> <td>泰盧固語</td> <td><code>te</code></td> </tr> <tr> <td>伊博語</td> <td><code>ig</code></td> <td>泰語</td> <td><code>th</code></td> </tr> <tr> <td>印度尼西亞語</td> <td><code>id</code></td> <td>土耳其語</td> <td><code>tr</code></td> </tr> <tr> <td>愛爾蘭語</td> <td><code>ga</code></td> <td>土庫曼語</td> <td><code>tk</code></td> </tr> <tr> <td>意大利語</td> <td><code>it</code></td> <td>烏克蘭語</td> <td><code>uk</code></td> </tr> <tr> <td>日語</td> <td><code>ja</code></td> <td>烏爾都語</td> <td><code>ur</code></td> </tr> <tr> <td>爪哇語</td> <td><code>jv</code></td> <td>維吾爾語</td> <td><code>ug</code></td> </tr> <tr> <td>卡納達語</td> <td><code>kn</code></td> <td>烏茲別克語</td> <td><code>uz</code></td> </tr> <tr> <td>哈薩克語</td> <td><code>kk</code></td> <td>越南語</td> <td><code>vi</code></td> </tr> <tr> <td>高棉語</td> <td><code>km</code></td> <td>威爾士語</td> <td><code>cy</code></td> </tr> <tr> <td>盧旺達語</td> <td><code>rw</code></td> <td>科薩語</td> <td><code>xh</code></td> </tr> <tr> <td>庫爾德語</td> <td><code>ku</code></td> <td>意第緒語</td> <td><code>yi</code></td> </tr> <tr> <td>吉爾吉斯語</td> <td><code>ky</code></td> <td>約魯巴語</td> <td><code>yo</code></td> </tr> <tr> <td>老撾語</td> <td><code>lo</code></td> <td>祖魯語</td> <td><code>zu</code></td> </tr> </tbody> </table> <h3 id=_2>注意事項</h3> <ul> <li>語言代碼在適用時遵循 ISO 639-1 標準。</li> <li>對於中文，支持簡體（<code>zh-CN</code>）和繁體（<code>zh-TW</code>）。</li> <li>如果未指定源語言，工具會自動檢測。</li> </ul> <h3 id=_3>示例</h3> <p>要將 PDF 從英語翻譯成中文（簡體），請使用以下命令：</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>pdf2zh<span class=w> </span>--source-lang<span class=w> </span>en<span class=w> </span>--target-lang<span class=w> </span>zh-CN<span class=w> </span>input.pdf
</span></code></pre></div> <p>有關更高級的用法，請參閱 <a href=https://pdf2zh-next.com/advanced/ADVANCED.md>高級選項</a> 文檔。</p> <p><code>do_translate_async_stream</code> is a function that allows you to translate a PDF file asynchronously and stream the results.</p> <h3 id=function-signature>Function Signature</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>    <span class=n>file</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Path</span><span class=p>,</span> <span class=nb>bytes</span><span class=p>],</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>    <span class=n>target_lang</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>    <span class=n>source_lang</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>    <span class=n>page_range</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>    <span class=n>output_type</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>    <span class=n>output_file</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>    <span class=n>api_key</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>    <span class=n>api_base</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>    <span class=n>model</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>    <span class=n>stream</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>dict</span><span class=p>]:</span>
</span></code></pre></div> <h3 id=parameters>Parameters</h3> <ul> <li><code>file</code>: The PDF file to translate. It can be a file path, a <code>Path</code> object, or bytes.</li> <li><code>target_lang</code>: The target language code (e.g., 'zh' for Chinese).</li> <li><code>source_lang</code>: The source language code (e.g., 'en' for English). If not provided, it will be auto-detected.</li> <li><code>page_range</code>: The range of pages to translate (e.g., '1-5,10').</li> <li><code>output_type</code>: The output type. Can be 'markdown', 'pdf', or 'text'. Default is 'markdown'.</li> <li><code>output_file</code>: The path to save the translated file. If not provided, the result will be returned as a stream.</li> <li><code>api_key</code>: Your API key for the translation service. If not provided, it will use the default key.</li> <li><code>api_base</code>: The base URL for the API. If not provided, it will use the default URL.</li> <li><code>model</code>: The model to use for translation. If not provided, it will use the default model.</li> <li><code>stream</code>: Whether to stream the results. Default is True.</li> <li><code>**kwargs</code>: Additional keyword arguments.</li> </ul> <h3 id=return-value>Return Value</h3> <p>Returns an asynchronous iterator that yields dictionaries with translation results. Each dictionary may contain: - <code>type</code>: The type of data (e.g., 'text', 'page', 'progress'). - <code>data</code>: The actual data (e.g., translated text, page number, progress percentage).</p> <h3 id=example-usage>Example Usage</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>        <span class=n>file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>        <span class=n>page_range</span><span class=o>=</span><span class=s2>&quot;1-5&quot;</span><span class=p>,</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>        <span class=n>output_type</span><span class=o>=</span><span class=s2>&quot;markdown&quot;</span><span class=p>,</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>,</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>    <span class=p>):</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>        <span class=k>if</span> <span class=n>chunk</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;text&quot;</span><span class=p>:</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>            <span class=nb>print</span><span class=p>(</span><span class=n>chunk</span><span class=p>[</span><span class=s2>&quot;data&quot;</span><span class=p>])</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>        <span class=k>elif</span> <span class=n>chunk</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>chunk</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>%&quot;</span><span class=p>)</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notes_1>Notes</h3> <ul> <li>This function is asynchronous and must be used with <code>async for</code>.</li> <li>The streaming feature allows you to process translated content as it becomes available, which is useful for large documents.</li> <li>If <code>output_file</code> is provided, the translated file will be saved to that path, and the stream will contain progress updates instead of content.</li> </ul> <hr> <p>Now, please translate the above content into zh_TW.</p> <p>This document provides a comprehensive guide to the supported languages in <code>pdf2zh</code>.</p> <p><code>pdf2zh</code> supports a wide range of languages, enabling you to translate PDF documents from various source languages into Chinese. This guide details the language codes and other relevant information for each supported language.</p> <h3 id=language-codes>Language Codes</h3> <p>The following table lists all supported languages along with their corresponding language codes. These codes are used in the configuration files and command-line arguments to specify the source and target languages for translation.</p> <table> <thead> <tr> <th>Language</th> <th>Language Code</th> </tr> </thead> <tbody> <tr> <td>Afrikaans</td> <td><code>af</code></td> </tr> <tr> <td>Arabic</td> <td><code>ar</code></td> </tr> <tr> <td>Bulgarian</td> <td><code>bg</code></td> </tr> <tr> <td>Bengali</td> <td><code>bn</code></td> </tr> <tr> <td>Catalan</td> <td><code>ca</code></td> </tr> <tr> <td>Czech</td> <td><code>cs</code></td> </tr> <tr> <td>Danish</td> <td><code>da</code></td> </tr> <tr> <td>German</td> <td><code>de</code></td> </tr> <tr> <td>Greek</td> <td><code>el</code></td> </tr> <tr> <td>English</td> <td><code>en</code></td> </tr> <tr> <td>Spanish</td> <td><code>es</code></td> </tr> <tr> <td>Estonian</td> <td><code>et</code></td> </tr> <tr> <td>Persian</td> <td><code>fa</code></td> </tr> <tr> <td>Finnish</td> <td><code>fi</code></td> </tr> <tr> <td>Filipino</td> <td><code>fil</code></td> </tr> <tr> <td>French</td> <td><code>fr</code></td> </tr> <tr> <td>Gujarati</td> <td><code>gu</code></td> </tr> <tr> <td>Hebrew</td> <td><code>he</code></td> </tr> <tr> <td>Hindi</td> <td><code>hi</code></td> </tr> <tr> <td>Croatian</td> <td><code>hr</code></td> </tr> <tr> <td>Hungarian</td> <td><code>hu</code></td> </tr> <tr> <td>Indonesian</td> <td><code>id</code></td> </tr> <tr> <td>Italian</td> <td><code>it</code></td> </tr> <tr> <td>Japanese</td> <td><code>ja</code></td> </tr> <tr> <td>Kannada</td> <td><code>kn</code></td> </tr> <tr> <td>Korean</td> <td><code>ko</code></td> </tr> <tr> <td>Lithuanian</td> <td><code>lt</code></td> </tr> <tr> <td>Latvian</td> <td><code>lv</code></td> </tr> <tr> <td>Macedonian</td> <td><code>mk</code></td> </tr> <tr> <td>Malayalam</td> <td><code>ml</code></td> </tr> <tr> <td>Marathi</td> <td><code>mr</code></td> </tr> <tr> <td>Malay</td> <td><code>ms</code></td> </tr> <tr> <td>Nepali</td> <td><code>ne</code></td> </tr> <tr> <td>Dutch</td> <td><code>nl</code></td> </tr> <tr> <td>Norwegian</td> <td><code>no</code></td> </tr> <tr> <td>Punjabi</td> <td><code>pa</code></td> </tr> <tr> <td>Polish</td> <td><code>pl</code></td> </tr> <tr> <td>Portuguese</td> <td><code>pt</code></td> </tr> <tr> <td>Romanian</td> <td><code>ro</code></td> </tr> <tr> <td>Russian</td> <td><code>ru</code></td> </tr> <tr> <td>Slovak</td> <td><code>sk</code></td> </tr> <tr> <td>Slovenian</td> <td><code>sl</code></td> </tr> <tr> <td>Somali</td> <td><code>so</code></td> </tr> <tr> <td>Albanian</td> <td><code>sq</code></td> </tr> <tr> <td>Serbian</td> <td><code>sr</code></td> </tr> <tr> <td>Swedish</td> <td><code>sv</code></td> </tr> <tr> <td>Swahili</td> <td><code>sw</code></td> </tr> <tr> <td>Tamil</td> <td><code>ta</code></td> </tr> <tr> <td>Telugu</td> <td><code>te</code></td> </tr> <tr> <td>Thai</td> <td><code>th</code></td> </tr> <tr> <td>Turkish</td> <td><code>tr</code></td> </tr> <tr> <td>Ukrainian</td> <td><code>uk</code></td> </tr> <tr> <td>Urdu</td> <td><code>ur</code></td> </tr> <tr> <td>Vietnamese</td> <td><code>vi</code></td> </tr> <tr> <td>Chinese</td> <td><code>zh</code></td> </tr> </tbody> </table> <h3 id=notes_2>Notes</h3> <ul> <li>The language codes follow the ISO 639-1 standard.</li> <li>For languages with multiple dialects or regional variations (e.g., Chinese), the base language code is used. Specific variants can be specified if supported by the translation service.</li> <li>Ensure that the translation service you are using supports the specified language pair. For more details, refer to the <a href=translation.md>Documentation of Translation Services</a>.</li> </ul> <h3 id=examples_1>Examples</h3> <p>Here are some examples of how to use language codes in configuration files and command-line arguments:</p> <p><strong>Configuration File (<code>config.yaml</code>):</strong></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>source_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">en</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nt>target_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zh</span>
</span></code></pre></div> <p><strong>Command Line:</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>pdf2zh<span class=w> </span>--source-language<span class=w> </span>en<span class=w> </span>--target-language<span class=w> </span>zh<span class=w> </span>input.pdf
</span></code></pre></div> <h3 id=supported-languages_1>Supported Languages</h3> <p><code>pdf2zh</code> leverages various translation services to support the languages listed above. The availability of specific languages may depend on the translation service configured. For more information on configuring translation services, see the <a href=translation.md>Translation Services Documentation</a>.</p> <h3 id=conclusion>Conclusion</h3> <p>With <code>pdf2zh</code>, you can translate PDF documents from a wide array of languages into Chinese. By using the appropriate language codes and configuring your translation service correctly, you can achieve accurate and efficient translations.</p> <p>For further assistance, refer to the <a href=faq.md>FAQ</a> or join our <a href=community.md>Community</a> for support.</p> <hr> <h3 id=translation-result_1>TRANSLATION RESULT</h3> <h3 id=_4>概述</h3> <p>本文檔提供了 <code>pdf2zh</code> 支持的語言的全面指南。</p> <p><code>pdf2zh</code> 支持多種語言，使您能夠將來自各種源語言的 PDF 文檔翻譯成中文。本指南詳細介紹了每種支持語言的語言代碼和其他相關信息。</p> <h3 id=_5>語言代碼</h3> <p>下表列出了所有支持的語言及其對應的語言代碼。這些代碼用於配置文件和命令行參數中，以指定翻譯的源語言和目標語言。</p> <table> <thead> <tr> <th>語言</th> <th>語言代碼</th> </tr> </thead> <tbody> <tr> <td>南非荷蘭語</td> <td><code>af</code></td> </tr> <tr> <td>阿拉伯語</td> <td><code>ar</code></td> </tr> <tr> <td>保加利亞語</td> <td><code>bg</code></td> </tr> <tr> <td>孟加拉語</td> <td><code>bn</code></td> </tr> <tr> <td>加泰羅尼亞語</td> <td><code>ca</code></td> </tr> <tr> <td>捷克語</td> <td><code>cs</code></td> </tr> <tr> <td>丹麥語</td> <td><code>da</code></td> </tr> <tr> <td>德語</td> <td><code>de</code></td> </tr> <tr> <td>希臘語</td> <td><code>el</code></td> </tr> <tr> <td>英語</td> <td><code>en</code></td> </tr> <tr> <td>西班牙語</td> <td><code>es</code></td> </tr> <tr> <td>愛沙尼亞語</td> <td><code>et</code></td> </tr> <tr> <td>波斯語</td> <td><code>fa</code></td> </tr> <tr> <td>芬蘭語</td> <td><code>fi</code></td> </tr> <tr> <td>菲律賓語</td> <td><code>fil</code></td> </tr> <tr> <td>法語</td> <td><code>fr</code></td> </tr> <tr> <td>古吉拉特語</td> <td><code>gu</code></td> </tr> <tr> <td>希伯來語</td> <td><code>he</code></td> </tr> <tr> <td>印地語</td> <td><code>hi</code></td> </tr> <tr> <td>克羅地亞語</td> <td><code>hr</code></td> </tr> <tr> <td>匈牙利語</td> <td><code>hu</code></td> </tr> <tr> <td>印度尼西亞語</td> <td><code>id</code></td> </tr> <tr> <td>意大利語</td> <td><code>it</code></td> </tr> <tr> <td>日語</td> <td><code>ja</code></td> </tr> <tr> <td>卡納達語</td> <td><code>kn</code></td> </tr> <tr> <td>韓語</td> <td><code>ko</code></td> </tr> <tr> <td>立陶宛語</td> <td><code>lt</code></td> </tr> <tr> <td>拉脫維亞語</td> <td><code>lv</code></td> </tr> <tr> <td>馬其頓語</td> <td><code>mk</code></td> </tr> <tr> <td>馬拉雅拉姆語</td> <td><code>ml</code></td> </tr> <tr> <td>馬拉地語</td> <td><code>mr</code></td> </tr> <tr> <td>馬來語</td> <td><code>ms</code></td> </tr> <tr> <td>尼泊爾語</td> <td><code>ne</code></td> </tr> <tr> <td>荷蘭語</td> <td><code>nl</code></td> </tr> <tr> <td>挪威語</td> <td><code>no</code></td> </tr> <tr> <td>旁遮普語</td> <td><code>pa</code></td> </tr> <tr> <td>波蘭語</td> <td><code>pl</code></td> </tr> <tr> <td>葡萄牙語</td> <td><code>pt</code></td> </tr> <tr> <td>羅馬尼亞語</td> <td><code>ro</code></td> </tr> <tr> <td>俄語</td> <td><code>ru</code></td> </tr> <tr> <td>斯洛伐克語</td> <td><code>sk</code></td> </tr> <tr> <td>斯洛文尼亞語</td> <td><code>sl</code></td> </tr> <tr> <td>索馬里語</td> <td><code>so</code></td> </tr> <tr> <td>阿爾巴尼亞語</td> <td><code>sq</code></td> </tr> <tr> <td>塞爾維亞語</td> <td><code>sr</code></td> </tr> <tr> <td>瑞典語</td> <td><code>sv</code></td> </tr> <tr> <td>斯瓦希里語</td> <td><code>sw</code></td> </tr> <tr> <td>泰米爾語</td> <td><code>ta</code></td> </tr> <tr> <td>泰盧固語</td> <td><code>te</code></td> </tr> <tr> <td>泰語</td> <td><code>th</code></td> </tr> <tr> <td>土耳其語</td> <td><code>tr</code></td> </tr> <tr> <td>烏克蘭語</td> <td><code>uk</code></td> </tr> <tr> <td>烏爾都語</td> <td><code>ur</code></td> </tr> <tr> <td>越南語</td> <td><code>vi</code></td> </tr> <tr> <td>中文</td> <td><code>zh</code></td> </tr> </tbody> </table> <h3 id=_6>注意事項</h3> <ul> <li>語言代碼遵循 ISO 639-1 標準。</li> <li>對於具有多種方言或地區變體的語言（例如中文），使用基礎語言代碼。如果翻譯服務支持，可以指定特定變體。</li> <li>確保您使用的翻譯服務支持指定的語言對。更多詳細信息，請參閱 <a href=translation.md>翻譯服務文檔</a>。</li> </ul> <h3 id=_7>示例</h3> <p>以下是一些在配置文件和命令行參數中使用語言代碼的示例：</p> <p><strong>配置文件 (<code>config.yaml</code>):</strong></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>source_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">en</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nt>target_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zh</span>
</span></code></pre></div> <p><strong>命令行：</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>pdf2zh<span class=w> </span>--source-language<span class=w> </span>en<span class=w> </span>--target-language<span class=w> </span>zh<span class=w> </span>input.pdf
</span></code></pre></div> <h3 id=_8>支持的語言</h3> <p><code>pdf2zh</code> 利用各種翻譯服務來支持上面列出的語言。特定語言的可用性可能取決於配置的翻譯服務。有關配置翻譯服務的更多信息，請參見 <a href=translation.md>翻譯服務文檔</a>。</p> <h3 id=_9>結論</h3> <p>通過 <code>pdf2zh</code>，您可以將來自多種語言的 PDF 文檔翻譯成中文。通過使用適當的語言代碼並正確配置您的翻譯服務，您可以實現準確高效的翻譯。</p> <p>如需進一步幫助，請參閱 <a href=faq.md>常見問題</a> 或加入我們的 <a href=community.md>社區</a> 以獲得支持。 - It is used by the high-level translate_async function and the CLI.</p> <hr> <h3 id=translation-result_2>TRANSLATION RESULT</h3> <ul> <li><code>do_translate_async_stream</code> 是一個底層的異步入點，用於翻譯單個 PDF 並產生一個事件串流（進度/錯誤/完成）。</li> <li>它適用於構建您自己的 UI 或 CLI，您可以在其中獲得即時進度並完全控制結果。</li> <li>它接受一個經過驗證的 SettingsModel 和一個文件路徑，並返回一個字典事件的異步生成器。</li> <li>它被高階的 <code>translate_async</code> 函數和 CLI 使用。</li> </ul> <p>The signature of the function is:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=k>def</span><span class=w> </span><span class=nf>translate</span><span class=p>(</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>    <span class=n>content</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>    <span class=n>source_lang</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=n>target_lang</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=n>translation_service</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>    <span class=n>translation_config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    <span class=o>...</span>
</span></code></pre></div> <h3 id=parameters_1>Parameters</h3> <ul> <li><code>content</code>: The text to be translated.</li> <li><code>source_lang</code>: The language code of the source text.</li> <li><code>target_lang</code>: The language code of the target text.</li> <li><code>translation_service</code>: The name of the translation service to use.</li> <li><code>translation_config</code>: A dictionary containing the configuration for the translation service.</li> <li><code>**kwargs</code>: Additional keyword arguments that may be required by the translation service.</li> </ul> <h3 id=return-value_1>Return Value</h3> <ul> <li>Returns the translated text as a string.</li> </ul> <h3 id=example>Example</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.translate</span><span class=w> </span><span class=kn>import</span> <span class=n>translate</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=n>result</span> <span class=o>=</span> <span class=n>translate</span><span class=p>(</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>    <span class=n>content</span><span class=o>=</span><span class=s2>&quot;Hello, world!&quot;</span><span class=p>,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>    <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>    <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>    <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>    <span class=n>translation_config</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>        <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;your_api_key_here&quot;</span><span class=p>,</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;gpt-3.5-turbo&quot;</span><span class=p>,</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>    <span class=p>},</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=p>)</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>  <span class=c1># Output: &quot;你好，世界！&quot;</span>
</span></code></pre></div> <h3 id=notes_3>Notes</h3> <ul> <li>The function may raise exceptions if the translation service is not available or if the configuration is invalid.</li> <li>The function is designed to be extensible, allowing for the addition of new translation services.</li> </ul> <hr> <h3 id=translation-result_3>TRANSLATION RESULT</h3> <h3 id=_10>函數簽名</h3> <p>函數的簽名如下：</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=k>def</span><span class=w> </span><span class=nf>translate</span><span class=p>(</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>    <span class=n>content</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>    <span class=n>source_lang</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>    <span class=n>target_lang</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>    <span class=n>translation_service</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>    <span class=n>translation_config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>    <span class=o>...</span>
</span></code></pre></div> <h3 id=_11>參數</h3> <ul> <li><code>content</code>: 要翻譯的文本。</li> <li><code>source_lang</code>: 源文本的語言代碼。</li> <li><code>target_lang</code>: 目標文本的語言代碼。</li> <li><code>translation_service</code>: 要使用的翻譯服務名稱。</li> <li><code>translation_config</code>: 包含翻譯服務配置的字典。</li> <li><code>**kwargs</code>: 翻譯服務可能需要的其他關鍵字參數。</li> </ul> <h3 id=_12>返回值</h3> <ul> <li>返回翻譯後的文本作為字符串。</li> </ul> <h3 id=_13>示例</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.translate</span><span class=w> </span><span class=kn>import</span> <span class=n>translate</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=n>result</span> <span class=o>=</span> <span class=n>translate</span><span class=p>(</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>    <span class=n>content</span><span class=o>=</span><span class=s2>&quot;Hello, world!&quot;</span><span class=p>,</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>    <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>    <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>    <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>    <span class=n>translation_config</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>        <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;your_api_key_here&quot;</span><span class=p>,</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>        <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=s2>&quot;gpt-3.5-turbo&quot;</span><span class=p>,</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>    <span class=p>},</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=p>)</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>  <span class=c1># Output: &quot;你好，世界！&quot;</span>
</span></code></pre></div> <h3 id=_14>注意事項</h3> <ul> <li>如果翻譯服務不可用或配置無效，函數可能會引發異常。</li> <li>該函數設計為可擴展，允許添加新的翻譯服務。</li> <li>Returns: AsyncIterator[EventModel]</li> <li>Raises:</li> <li>ValueError: If <code>settings</code> is invalid or <code>file</code> does not exist.</li> <li>PDF2ZHError: For other errors during translation.</li> </ul> <h3 id=eventmodel>EventModel</h3> <ul> <li>type: EventType</li> <li>data: dict</li> <li>EventType:</li> <li>progress: {"progress": float}</li> <li>page: {"page": int, "content": str}</li> <li>error: {"error": str}</li> <li>finished: {"file": str}</li> </ul> <h3 id=example_1>Example</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.models</span><span class=w> </span><span class=kn>import</span> <span class=n>SettingsModel</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>    <span class=n>settings</span> <span class=o>=</span> <span class=n>SettingsModel</span><span class=p>(</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>        <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>        <span class=n>translation_config</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;your_api_key&quot;</span><span class=p>},</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>    <span class=p>)</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=s2>&quot;document.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;progress&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;page&quot;</span><span class=p>:</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Page </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;content&#39;</span><span class=p>][:</span><span class=mi>100</span><span class=p>]</span><span class=si>}</span><span class=s2>...&quot;</span><span class=p>)</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;error&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;finished&quot;</span><span class=p>:</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Finished: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notes_4>Notes</h3> <ul> <li>This function is the high-level async streaming API for translating a single PDF.</li> <li>It yields events as the translation progresses, allowing for real-time updates.</li> <li>The <code>progress</code> event provides a float between 0 and 1 indicating the translation progress.</li> <li>The <code>page</code> event yields the translated content for each page as it becomes available.</li> <li>The <code>error</code> event is yielded if an error occurs during translation.</li> <li>The <code>finished</code> event is yielded when the translation is complete, containing the path to the translated file.</li> </ul> <hr> <h3 id=translation-result_4>TRANSLATION RESULT</h3> <ul> <li>導入：<code>from pdf2zh_next.high_level import do_translate_async_stream</code></li> <li>調用：<code>async for event in do_translate_async_stream(settings, file): ...</code></li> <li>參數：</li> <li>settings: SettingsModel。必須有效；函數將調用 <code>settings.validate_settings()</code>。</li> <li>file: str | pathlib.Path。要翻譯的單個 PDF。必須存在。</li> <li>返回：AsyncIterator[EventModel]</li> <li>引發：</li> <li>ValueError：如果 <code>settings</code> 無效或 <code>file</code> 不存在。</li> <li>PDF2ZHError：用於翻譯過程中的其他錯誤。</li> </ul> <h3 id=eventmodel_1>EventModel</h3> <ul> <li>type: EventType</li> <li>data: dict</li> <li>EventType：</li> <li>progress: {"progress": float}</li> <li>page: {"page": int, "content": str}</li> <li>error: {"error": str}</li> <li>finished: {"file": str}</li> </ul> <h3 id=_15>範例</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.models</span><span class=w> </span><span class=kn>import</span> <span class=n>SettingsModel</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>    <span class=n>settings</span> <span class=o>=</span> <span class=n>SettingsModel</span><span class=p>(</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>        <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>        <span class=n>translation_config</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=s2>&quot;your_api_key&quot;</span><span class=p>},</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>    <span class=p>)</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=s2>&quot;document.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;progress&quot;</span><span class=p>:</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;progress&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;page&quot;</span><span class=p>:</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Page </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;page&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;content&#39;</span><span class=p>][:</span><span class=mi>100</span><span class=p>]</span><span class=si>}</span><span class=s2>...&quot;</span><span class=p>)</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;error&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a>        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&quot;finished&quot;</span><span class=p>:</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Finished: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=_16>注意事項</h3> <ul> <li>此函數是用於翻譯單個 PDF 的高階異步串流 API。</li> <li>它會在翻譯進展時產生事件，允許即時更新。</li> <li><code>progress</code> 事件提供一個介於 0 和 1 之間的浮點數，表示翻譯進度。</li> <li><code>page</code> 事件在每個頁面的翻譯內容可用時產生該內容。</li> <li>如果在翻譯過程中發生錯誤，會產生 <code>error</code> 事件。</li> <li>翻譯完成時會產生 <code>finished</code> 事件，其中包含翻譯後文件的路徑。</li> </ul> <p>This section is about the command line usage of <code>pdf2zh</code>.</p> <h3 id=command-line-usage>Command Line Usage</h3> <p><code>pdf2zh</code> can be used from the command line to translate PDF files. The basic syntax is:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>pdf2zh<span class=w> </span><span class=o>[</span>OPTIONS<span class=o>]</span><span class=w> </span>INPUT_FILE<span class=w> </span><span class=o>[</span>OUTPUT_FILE<span class=o>]</span>
</span></code></pre></div> <h4 id=options>Options</h4> <ul> <li><code>-s, --source-language TEXT</code>: The source language of the PDF file. If not specified, it will be auto-detected.</li> <li><code>-t, --target-language TEXT</code>: The target language for translation. Default is <code>zh</code> (Chinese).</li> <li><code>-o, --output-file TEXT</code>: The output file path. If not specified, the output will be printed to stdout.</li> <li><code>-c, --config FILE</code>: Path to a configuration file. Default is <code>./config.yaml</code>.</li> <li><code>--api-key TEXT</code>: API key for the translation service. If not specified, it will be read from the environment variable <code>PDF2ZH_API_KEY</code>.</li> <li><code>--api-base TEXT</code>: Base URL for the translation service API. If not specified, the default URL will be used.</li> <li><code>--model TEXT</code>: The model to use for translation. If not specified, the default model will be used.</li> <li><code>--page-range TEXT</code>: The range of pages to translate (e.g., <code>1-5,10</code>). If not specified, all pages will be translated.</li> <li><code>--output-type [markdown|pdf|text]</code>: The output type. Default is <code>markdown</code>.</li> <li><code>--help</code>: Show this message and exit.</li> </ul> <h4 id=examples_2>Examples</h4> <ol> <li>Translate a PDF file from English to Chinese and save the result to a Markdown file:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>pdf2zh<span class=w> </span>-s<span class=w> </span>en<span class=w> </span>-t<span class=w> </span>zh<span class=w> </span>input.pdf<span class=w> </span>output.md
</span></code></pre></div> <ol> <li>Translate a PDF file using a specific API key and model:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>pdf2zh<span class=w> </span>--api-key<span class=w> </span>YOUR_API_KEY<span class=w> </span>--model<span class=w> </span>gpt-4<span class=w> </span>input.pdf
</span></code></pre></div> <ol> <li>Translate only pages 1 to 5 of a PDF file:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>pdf2zh<span class=w> </span>--page-range<span class=w> </span><span class=m>1</span>-5<span class=w> </span>input.pdf
</span></code></pre></div> <ol> <li>Use a configuration file for translation:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>pdf2zh<span class=w> </span>-c<span class=w> </span>config.yaml<span class=w> </span>input.pdf
</span></code></pre></div> <h4 id=configuration-file>Configuration File</h4> <p>The configuration file is a YAML file that can specify the same options as the command line. For example:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nt>source_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">en</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=nt>target_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zh</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nt>api_key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">your_api_key_here</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=nt>model</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=nt>output_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">markdown</span>
</span></code></pre></div> <h4 id=environment-variables>Environment Variables</h4> <ul> <li><code>PDF2ZH_API_KEY</code>: The API key for the translation service. This can be used instead of specifying the API key via the command line.</li> </ul> <h4 id=notes_5>Notes</h4> <ul> <li>If the output file is not specified, the translated content will be printed to stdout.</li> <li>The tool supports output in Markdown, PDF, or plain text format. The default is Markdown.</li> <li>For large PDF files, it is recommended to use the <code>--page-range</code> option to translate in chunks.</li> </ul> <hr> <h3 id=output>OUTPUT</h3> <p>注意：本節是關於 <code>pdf2zh</code> 的命令行使用方式。</p> <h3 id=_17>命令行使用</h3> <p><code>pdf2zh</code> 可以從命令行使用來翻譯 PDF 文件。基本語法如下：</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>pdf2zh<span class=w> </span><span class=o>[</span>OPTIONS<span class=o>]</span><span class=w> </span>INPUT_FILE<span class=w> </span><span class=o>[</span>OUTPUT_FILE<span class=o>]</span>
</span></code></pre></div> <h4 id=_18>選項</h4> <ul> <li><code>-s, --source-language TEXT</code>：PDF 文件的源語言。如果未指定，將自動檢測。</li> <li><code>-t, --target-language TEXT</code>：翻譯的目標語言。默認為 <code>zh</code>（中文）。</li> <li><code>-o, --output-file TEXT</code>：輸出文件路徑。如果未指定，輸出將打印到標準輸出（stdout）。</li> <li><code>-c, --config FILE</code>：配置文件的路徑。默認為 <code>./config.yaml</code>。</li> <li><code>--api-key TEXT</code>：翻譯服務的 API 金鑰。如果未指定，將從環境變數 <code>PDF2ZH_API_KEY</code> 中讀取。</li> <li><code>--api-base TEXT</code>：翻譯服務 API 的基礎 URL。如果未指定，將使用默認 URL。</li> <li><code>--model TEXT</code>：用於翻譯的模型。如果未指定，將使用默認模型。</li> <li><code>--page-range TEXT</code>：要翻譯的頁面範圍（例如 <code>1-5,10</code>）。如果未指定，將翻譯所有頁面。</li> <li><code>--output-type [markdown|pdf|text]</code>：輸出類型。默認為 <code>markdown</code>。</li> <li><code>--help</code>：顯示此幫助訊息並退出。</li> </ul> <h4 id=_19>範例</h4> <ol> <li>將 PDF 文件從英文翻譯成中文，並將結果保存到 Markdown 文件中：</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>pdf2zh<span class=w> </span>-s<span class=w> </span>en<span class=w> </span>-t<span class=w> </span>zh<span class=w> </span>input.pdf<span class=w> </span>output.md
</span></code></pre></div> <ol> <li>使用特定的 API 金鑰和模型翻譯 PDF 文件：</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>pdf2zh<span class=w> </span>--api-key<span class=w> </span>YOUR_API_KEY<span class=w> </span>--model<span class=w> </span>gpt-4<span class=w> </span>input.pdf
</span></code></pre></div> <ol> <li>僅翻譯 PDF 文件的第 1 到第 5 頁：</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>pdf2zh<span class=w> </span>--page-range<span class=w> </span><span class=m>1</span>-5<span class=w> </span>input.pdf
</span></code></pre></div> <ol> <li>使用配置文件進行翻譯：</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>pdf2zh<span class=w> </span>-c<span class=w> </span>config.yaml<span class=w> </span>input.pdf
</span></code></pre></div> <h4 id=_20>配置文件</h4> <p>配置文件是一個 YAML 文件，可以指定與命令行相同的選項。例如：</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=nt>source_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">en</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=nt>target_language</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">zh</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=nt>api_key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">your_api_key_here</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=nt>model</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=nt>output_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">markdown</span>
</span></code></pre></div> <h4 id=_21>環境變數</h4> <ul> <li><code>PDF2ZH_API_KEY</code>：翻譯服務的 API 金鑰。這可以用來代替通過命令行指定 API 金鑰。</li> </ul> <h4 id=_22>注意事項</h4> <ul> <li>如果未指定輸出文件，翻譯後的內容將打印到標準輸出（stdout）。</li> <li>該工具支持以 Markdown、PDF 或純文本格式輸出。默認為 Markdown。</li> <li>對於大型 PDF 文件，建議使用 <code>--page-range</code> 選項分塊翻譯。</li> <li>The function returns an async generator that yields events. Each event is a dictionary with a <code>type</code> field and a <code>data</code> field.</li> <li>Event types:<ul> <li><code>start</code>: Translation started. <code>data</code> contains the total number of pages.</li> <li><code>page</code>: A page is translated. <code>data</code> contains the page number and the translated content.</li> <li><code>progress</code>: Translation progress. <code>data</code> contains the percentage of pages translated.</li> <li><code>end</code>: Translation finished. <code>data</code> contains the total number of pages translated.</li> <li><code>error</code>: An error occurred. <code>data</code> contains the error message.</li> </ul> </li> <li>The function does not save the translated file; it only returns the events. The caller is responsible for saving the file if needed.</li> </ul> <hr> <h3 id=translation-result_5>TRANSLATION RESULT</h3> <ul> <li>此函數會忽略 <code>settings.basic.input_files</code>；僅翻譯給定的 <code>file</code>。</li> <li>如果 <code>settings.basic.debug</code> 為 True，則翻譯在主進程中運行；否則在子進程中運行。兩者的事件結構相同。</li> <li>該函數返回一個異步生成器，該生成器會產生事件。每個事件都是一個包含 <code>type</code> 欄位和 <code>data</code> 欄位的字典。</li> <li>事件類型：<ul> <li><code>start</code>：翻譯開始。<code>data</code> 包含總頁數。</li> <li><code>page</code>：一個頁面已翻譯。<code>data</code> 包含頁碼和翻譯後的內容。</li> <li><code>progress</code>：翻譯進度。<code>data</code> 包含已翻譯頁面的百分比。</li> <li><code>end</code>：翻譯完成。<code>data</code> 包含已翻譯的總頁數。</li> <li><code>error</code>：發生錯誤。<code>data</code> 包含錯誤訊息。</li> </ul> </li> <li>該函數不會保存翻譯後的文件；它只返回事件。如果需要，呼叫者負責保存文件。</li> </ul> <p>The event stream contract defines the format of the events that are streamed from the server to the client. The events are streamed as Server-Sent Events (SSE) and are encoded as JSON.</p> <h4 id=event-types>Event Types</h4> <p>The following event types are defined:</p> <ul> <li><code>status</code>: The status of the translation job. The event data contains the current status of the job.</li> <li><code>progress</code>: The progress of the translation job. The event data contains the current progress of the job.</li> <li><code>result</code>: The result of the translation job. The event data contains the result of the job.</li> <li><code>error</code>: An error that occurred during the translation job. The event data contains the error message.</li> </ul> <h4 id=event-data>Event Data</h4> <p>The event data is a JSON object that contains the following fields:</p> <ul> <li><code>event</code>: The event type.</li> <li><code>data</code>: The event data. The structure of the event data depends on the event type.</li> </ul> <h4 id=event-data-for-status-events>Event Data for <code>status</code> Events</h4> <p>The event data for <code>status</code> events contains the following fields:</p> <ul> <li><code>status</code>: The current status of the job. The status can be one of the following:</li> <li><code>pending</code>: The job is pending.</li> <li><code>running</code>: The job is running.</li> <li><code>completed</code>: The job has completed.</li> <li><code>failed</code>: The job has failed.</li> </ul> <h4 id=event-data-for-progress-events>Event Data for <code>progress</code> Events</h4> <p>The event data for <code>progress</code> events contains the following fields:</p> <ul> <li><code>progress</code>: The current progress of the job. The progress is a number between 0 and 1.</li> </ul> <h4 id=event-data-for-result-events>Event Data for <code>result</code> Events</h4> <p>The event data for <code>result</code> events contains the following fields:</p> <ul> <li><code>result</code>: The result of the job. The result is a string that contains the translated text.</li> </ul> <h4 id=event-data-for-error-events>Event Data for <code>error</code> Events</h4> <p>The event data for <code>error</code> events contains the following fields:</p> <ul> <li><code>error</code>: The error message.</li> </ul> <h4 id=example_2>Example</h4> <p>The following is an example of an event stream:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>event: status
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>data: {&quot;status&quot;: &quot;pending&quot;}
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>event: progress
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>data: {&quot;progress&quot;: 0.5}
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>event: result
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>data: {&quot;result&quot;: &quot;Translated text&quot;}
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>event: error
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>data: {&quot;error&quot;: &quot;An error occurred&quot;}
</span></code></pre></div> <hr> <h3 id=translation-result_6>TRANSLATION RESULT</h3> <h3 id=_23>事件串流合約</h3> <p>事件串流合約定義了從伺服器串流到客戶端的事件格式。事件以伺服器發送事件（SSE）的形式串流，並以 JSON 編碼。</p> <h4 id=_24>事件類型</h4> <p>定義了以下事件類型：</p> <ul> <li><code>status</code>：翻譯任務的狀態。事件數據包含任務的當前狀態。</li> <li><code>progress</code>：翻譯任務的進度。事件數據包含任務的當前進度。</li> <li><code>result</code>：翻譯任務的結果。事件數據包含任務的結果。</li> <li><code>error</code>：翻譯任務期間發生的錯誤。事件數據包含錯誤訊息。</li> </ul> <h4 id=_25>事件數據</h4> <p>事件數據是一個 JSON 物件，包含以下欄位：</p> <ul> <li><code>event</code>：事件類型。</li> <li><code>data</code>：事件數據。事件數據的結構取決於事件類型。</li> </ul> <h4 id=status><code>status</code> 事件的事件數據</h4> <p><code>status</code> 事件的事件數據包含以下欄位：</p> <ul> <li><code>status</code>：任務的當前狀態。狀態可以是以下之一：</li> <li><code>pending</code>：任務待處理。</li> <li><code>running</code>：任務執行中。</li> <li><code>completed</code>：任務已完成。</li> <li><code>failed</code>：任務已失敗。</li> </ul> <h4 id=progress><code>progress</code> 事件的事件數據</h4> <p><code>progress</code> 事件的事件數據包含以下欄位：</p> <ul> <li><code>progress</code>：任務的當前進度。進度是一個介於 0 和 1 之間的數字。</li> </ul> <h4 id=result><code>result</code> 事件的事件數據</h4> <p><code>result</code> 事件的事件數據包含以下欄位：</p> <ul> <li><code>result</code>：任務的結果。結果是一個包含翻譯後文字的字符串。</li> </ul> <h4 id=error><code>error</code> 事件的事件數據</h4> <p><code>error</code> 事件的事件數據包含以下欄位：</p> <ul> <li><code>error</code>：錯誤訊息。</li> </ul> <h4 id=_26>範例</h4> <p>以下是一個事件串流的範例：</p> <p><div class="language-text highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>event: status
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>data: {&quot;status&quot;: &quot;pending&quot;}
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>event: progress
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>data: {&quot;progress&quot;: 0.5}
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>event: result
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>data: {&quot;result&quot;: &quot;Translated text&quot;}
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>event: error
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>data: {&quot;error&quot;: &quot;An error occurred&quot;}
</span></code></pre></div> - <code>"page"</code>: A page of the PDF has been processed. The <code>data</code> field contains the page number. - <code>"progress"</code>: The overall progress of the translation. The <code>data</code> field contains a float between 0 and 1. - <code>"text"</code>: A chunk of translated text. The <code>data</code> field contains the text. - <code>"error"</code>: An error occurred. The <code>data</code> field contains the error message. - <code>"warning"</code>: A warning occurred. The <code>data</code> field contains the warning message.</p> <p>Example of the event stream:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1</span><span class=p>}</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>}</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;text&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text chunk 1&quot;</span><span class=p>}</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;text&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text chunk 2&quot;</span><span class=p>}</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>}</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>}</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;text&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text chunk 3&quot;</span><span class=p>}</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=translation-result_7>TRANSLATION RESULT</h3> <p>異步生成器會產生類似 JSON 的字典事件，具有以下類型： - <code>"page"</code>：PDF 的一頁已被處理。<code>data</code> 欄位包含頁碼。 - <code>"progress"</code>：翻譯的整體進度。<code>data</code> 欄位包含一個介於 0 和 1 之間的浮點數。 - <code>"text"</code>：一段翻譯後的文字。<code>data</code> 欄位包含該文字。 - <code>"error"</code>：發生錯誤。<code>data</code> 欄位包含錯誤訊息。 - <code>"warning"</code>：發生警告。<code>data</code> 欄位包含警告訊息。</p> <p>事件串流的範例：</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1</span><span class=p>}</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>}</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;text&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text chunk 1&quot;</span><span class=p>}</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;text&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text chunk 2&quot;</span><span class=p>}</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>}</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>}</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;text&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text chunk 3&quot;</span><span class=p>}</span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>part_index</code>: if error occurred while processing a part (&gt;=1)</li> </ul> <hr> <h3 id=translation-result_8>TRANSLATION RESULT</h3> <ul> <li>階段摘要事件：<code>stage_summary</code>（可選，可能首先出現）</li> <li> <p>欄位</p> <ul> <li><code>type</code>："stage_summary"</li> <li><code>stages</code>：物件列表 <code>{ "name": str, "percent": float }</code>，描述估計的工作分配</li> <li><code>part_index</code>：此摘要事件的索引可能為 0</li> <li><code>total_parts</code>：總部分數（&gt;= 1）</li> </ul> </li> <li> <p>進度事件：<code>progress_start</code>、<code>progress_update</code>、<code>progress_end</code></p> </li> <li> <p>共同欄位</p> <ul> <li><code>type</code>：上述之一</li> <li><code>stage</code>：人類可讀的階段名稱（例如："解析 PDF 並建立中間表示"、"翻譯段落"、"儲存 PDF"）</li> <li><code>stage_progress</code>：[0, 100] 內的浮點數，表示當前階段內的進度</li> <li><code>overall_progress</code>：[0, 100] 內的浮點數，表示整體進度</li> <li><code>part_index</code>：當前部分索引（進度事件通常從 1 開始）</li> <li><code>total_parts</code>：總部分數（&gt;= 1）。大型文檔可能會自動分割。</li> <li><code>stage_current</code>：階段內的當前步驟</li> <li><code>stage_total</code>：階段內的總步驟數</li> </ul> </li> <li> <p>完成事件：<code>finish</code></p> </li> <li> <p>欄位</p> <ul> <li><code>type</code>："finish"</li> <li><code>translate_result</code>：一個提供最終輸出的<strong>物件</strong>（注意：不是字典，而是類別實例）</li> <li><code>original_pdf_path</code>：輸入 PDF 的路徑</li> <li><code>mono_pdf_path</code>：單語翻譯 PDF 的路徑（或 None）</li> <li><code>dual_pdf_path</code>：雙語翻譯 PDF 的路徑（或 None）</li> <li><code>no_watermark_mono_pdf_path</code>：無浮水印的單語輸出路徑（如果產生了），否則為 None</li> <li><code>no_watermark_dual_pdf_path</code>：無浮水印的雙語輸出路徑（如果產生了），否則為 None</li> <li><code>auto_extracted_glossary_path</code>：自動提取的術語表 CSV 路徑（或 None）</li> <li><code>total_seconds</code>：經過的秒數（浮點數）</li> <li><code>peak_memory_usage</code>：翻譯期間的近似記憶體使用峰值（浮點數；實現依賴的單位）</li> </ul> </li> <li> <p>錯誤事件：<code>error</code></p> </li> <li>欄位<ul> <li><code>type</code>："error"</li> <li><code>error</code>：人類可讀的錯誤訊息</li> <li><code>error_type</code>：其中之一 <code>BabeldocError</code>、<code>SubprocessError</code>、<code>IPCError</code>、<code>SubprocessCrashError</code> 等。</li> <li><code>details</code>：可選的詳細信息（例如，原始錯誤或追蹤資訊）</li> <li><code>part_index</code>：如果在處理某部分時發生錯誤（&gt;=1）</li> </ul> </li> </ul> <p>The <code>pdf2zh</code> tool is designed to translate PDF documents from various languages into Chinese. It leverages advanced OCR and machine translation technologies to ensure accurate and efficient translations. However, there are certain behaviors and limitations that users should be aware of:</p> <ol> <li> <p><strong>OCR Accuracy</strong>: The tool relies on OCR to extract text from PDFs. The accuracy of OCR can vary depending on the quality of the PDF. For best results, use PDFs with clear, high-resolution text.</p> </li> <li> <p><strong>Layout Preservation</strong>: The tool attempts to preserve the original layout of the PDF, including images, tables, and formatting. However, complex layouts may not be perfectly preserved, and some manual adjustments might be necessary.</p> </li> <li> <p><strong>Translation Quality</strong>: The quality of the translation depends on the machine translation model used. While the tool uses state-of-the-art models, some nuances and context-specific meanings may not be fully captured.</p> </li> <li> <p><strong>Language Support</strong>: The tool supports a wide range of languages, but the quality of translation may vary for less common languages. Always verify the translation for critical documents.</p> </li> <li> <p><strong>Performance</strong>: The tool is optimized for performance, but large PDFs (e.g., over 500 pages) may take longer to process. Consider breaking large documents into smaller parts for better efficiency.</p> </li> </ol> <p>For more information, refer to the <a href=https://pdf2zh-next.com>documentation</a> or contact support.</p> <hr> <h3 id=translation-result_9>TRANSLATION RESULT</h3> <p>重要行為：<code>pdf2zh</code> 工具旨在將各種語言的 PDF 文檔翻譯成中文。它利用先進的 OCR 和機器翻譯技術來確保準確高效的翻譯。然而，用戶應注意某些行為和限制：</p> <ol> <li> <p><strong>OCR 準確性</strong>：該工具依賴 OCR 從 PDF 中提取文本。OCR 的準確性可能因 PDF 的質量而異。為獲得最佳結果，請使用具有清晰、高分辨率文本的 PDF。</p> </li> <li> <p><strong>佈局保留</strong>：該工具嘗試保留 PDF 的原始佈局，包括圖像、表格和格式。然而，複雜的佈局可能無法完美保留，可能需要一些手動調整。</p> </li> <li> <p><strong>翻譯質量</strong>：翻譯的質量取決於所使用的機器翻譯模型。雖然該工具使用最先進的模型，但一些細微差別和上下文特定的含義可能無法完全捕捉。</p> </li> <li> <p><strong>語言支持</strong>：該工具支持多種語言，但對於較不常見的語言，翻譯質量可能會有所不同。對於關鍵文檔，請始終驗證翻譯。</p> </li> <li> <p><strong>性能</strong>：該工具針對性能進行了優化，但大型 PDF（例如超過 500 頁）可能需要更長的處理時間。考慮將大型文檔拆分為較小的部分以提高效率。</p> </li> </ol> <p>更多信息，請參閱 <a href=https://pdf2zh-next.com>文檔</a> 或聯繫支持。 - The <code>finish</code> event is always the last event. - If the <code>output_file</code> parameter is provided, the translated file will be saved to the specified path, and the stream will only contain progress events. - The <code>output_type</code> parameter controls the format of the output. If set to <code>'pdf'</code>, the output will be a PDF file. If set to <code>'markdown'</code> or <code>'text'</code>, the output will be in the respective text format. - The <code>page_range</code> parameter allows you to specify a range of pages to translate. For example, <code>'1-5,10'</code> will translate pages 1 to 5 and page 10. - The <code>source_lang</code> parameter is optional. If not provided, the tool will attempt to auto-detect the source language. - The <code>target_lang</code> parameter is required and specifies the language to translate to. - The <code>api_key</code> parameter is optional if a default API key is set in the environment variables. - The <code>api_base</code> parameter allows you to specify a custom API endpoint. This is useful for using a self-hosted translation service. - The <code>model</code> parameter allows you to specify which translation model to use. If not provided, a default model will be used. - The <code>stream</code> parameter controls whether the results are streamed. If set to <code>False</code>, the function will return the translated content as a string once the entire document is processed. - The function returns an asynchronous iterator that yields events of different types. The event types include <code>text</code>, <code>page</code>, <code>progress</code>, <code>error</code>, and <code>finish</code>. - Each event is a dictionary with a <code>type</code> field indicating the event type and a <code>data</code> field containing the event-specific data. - For <code>text</code> events, the <code>data</code> field contains a string with the translated text. - For <code>page</code> events, the <code>data</code> field contains the page number that has been processed. - For <code>progress</code> events, the <code>data</code> field contains a float between 0 and 1 indicating the progress percentage. - For <code>error</code> events, the <code>data</code> field contains an error message string. - The <code>finish</code> event indicates that the translation has completed successfully. The <code>data</code> field may contain a summary of the translation process. - The function is designed to handle large documents efficiently by streaming the results as they become available. - If an error occurs during translation, the generator will yield an <code>error</code> event and then raise an exception. You should handle both the error event and the exception to ensure robust error handling. - The function supports both file paths and in-memory file data (as bytes) for the <code>file</code> parameter. - The function uses the specified translation service (e.g., OpenAI, Aliyun, SiliconFlow) to perform the translation. The translation service must be configured with the appropriate API key and endpoint. - The function respects the rate limits and quotas of the translation service. If the rate limit is exceeded, the function may retry the request after a delay. - The function includes retry logic for transient errors (e.g., network timeouts). The number of retries and the delay between retries can be configured. - The function logs detailed information about the translation process, including the number of pages processed, the time taken, and any errors encountered. - The function can be used in both synchronous and asynchronous contexts. For synchronous use, you can wrap the call in an event loop. However, it is recommended to use the asynchronous version for better performance when dealing with large documents. - The function is part of the <code>pdf2zh</code> package, which provides a comprehensive solution for translating PDF documents into Chinese. - The <code>pdf2zh</code> package includes both a command-line interface (CLI) and a Python API for flexibility. - The CLI supports all the parameters available in the Python API, allowing you to use the tool from the command line without writing any code. - The Python API provides more control over the translation process, including the ability to process the stream of events in real-time. - The <code>pdf2zh</code> package is open-source and available on GitHub. Contributions and bug reports are welcome. - For more information, see the <a href=https://pdf2zh-next.com>documentation</a> or join the <a href=https://pdf2zh-next.com/community>community</a> for support.</p> <hr> <h3 id=translation-result_10>TRANSLATION RESULT</h3> <ul> <li>在進度開始之前，可能會發出一個可選的 <code>stage_summary</code>。</li> <li>在某些失敗情況下，生成器將首先產生一個 <code>error</code> 事件，然後引發一個衍生自 <code>TranslationError</code> 的異常。您應該同時檢查錯誤事件並準備捕獲異常。</li> <li><code>progress_update</code> 事件可能會重複出現相同的值；必要時消費者應進行防抖處理。</li> <li>當您收到 <code>finish</code> 事件時，請停止消費串流。</li> <li><code>finish</code> 事件總是最後一個事件。</li> <li>如果提供了 <code>output_file</code> 參數，翻譯後的文件將保存到指定路徑，並且串流將僅包含進度事件。</li> <li><code>output_type</code> 參數控制輸出的格式。如果設置為 <code>'pdf'</code>，輸出將是 PDF 文件。如果設置為 <code>'markdown'</code> 或 <code>'text'</code>，輸出將是相應的文字格式。</li> <li><code>page_range</code> 參數允許您指定要翻譯的頁面範圍。例如，<code>'1-5,10'</code> 將翻譯第 1 到第 5 頁以及第 10 頁。</li> <li><code>source_lang</code> 參數是可選的。如果未提供，工具將嘗試自動檢測源語言。</li> <li><code>target_lang</code> 參數是必需的，用於指定要翻譯成的語言。</li> <li>如果在環境變數中設置了默認 API 金鑰，則 <code>api_key</code> 參數是可選的。</li> <li><code>api_base</code> 參數允許您指定自定義 API 端點。這對於使用自託管的翻譯服務非常有用。</li> <li><code>model</code> 參數允許您指定要使用的翻譯模型。如果未提供，將使用默認模型。</li> <li><code>stream</code> 參數控制是否串流結果。如果設置為 <code>False</code>，該函數將在整個文檔處理完畢後將翻譯內容作為字符串返回。</li> <li>該函數返回一個異步迭代器，會產生不同類型的事件。事件類型包括 <code>text</code>、<code>page</code>、<code>progress</code>、<code>error</code> 和 <code>finish</code>。</li> <li>每個事件都是一個字典，其中包含一個指示事件類型的 <code>type</code> 欄位和一個包含事件特定數據的 <code>data</code> 欄位。</li> <li>對於 <code>text</code> 事件，<code>data</code> 欄位包含翻譯後文字的字符串。</li> <li>對於 <code>page</code> 事件，<code>data</code> 欄位包含已處理的頁碼。</li> <li>對於 <code>progress</code> 事件，<code>data</code> 欄位包含一個介於 0 和 1 之間的浮點數，表示進度百分比。</li> <li>對於 <code>error</code> 事件，<code>data</code> 欄位包含一個錯誤訊息字符串。</li> <li><code>finish</code> 事件表示翻譯已成功完成。<code>data</code> 欄位可能包含翻譯過程的摘要。</li> <li>該函數設計用於通過在結果可用時進行串流來高效處理大型文檔。</li> <li>如果在翻譯過程中發生錯誤，生成器將產生一個 <code>error</code> 事件，然後引發異常。您應該同時處理錯誤事件和異常，以確保穩健的錯誤處理。</li> <li>該函數支持文件路徑和內存中的文件數據（作為字節）作為 <code>file</code> 參數。</li> <li>該函數使用指定的翻譯服務（例如 OpenAI、阿里雲、硅基流動）來執行翻譯。翻譯服務必須配置適當的 API 金鑰和端點。</li> <li>該函數遵守翻譯服務的速率限制和配額。如果超過速率限制，該函數可能會在延遲後重試請求。</li> <li>該函數包含針對瞬態錯誤（例如網絡超時）的重試邏輯。重試次數和重試之間的延遲可以配置。</li> <li>該函數記錄有關翻譯過程的詳細信息，包括處理的頁數、花費的時間以及遇到的任何錯誤。</li> <li>該函數可以在同步和異步上下文中使用。對於同步使用，您可以將調用包裝在事件循環中。但是，在處理大型文檔時，建議使用異步版本以獲得更好的性能。</li> <li>該函數是 <code>pdf2zh</code> 套件的一部分，該套件提供了將 PDF 文檔翻譯成中文的全面解決方案。</li> <li><code>pdf2zh</code> 套件包括命令行界面（CLI）和 Python API，以提供靈活性。</li> <li>CLI 支持 Python API 中可用的所有參數，允許您從命令行使用該工具而無需編寫任何代碼。</li> <li>Python API 提供了對翻譯過程的更多控制，包括實時處理事件串流的能力。</li> <li><code>pdf2zh</code> 套件是開源的，可在 GitHub 上獲得。歡迎貢獻和錯誤報告。</li> <li>更多信息，請參閱 <a href=https://pdf2zh-next.com>文檔</a> 或加入 <a href=https://pdf2zh-next.com/community>社區</a> 以獲得支持。</li> </ul> <p>{#minimal-usage-example-async}</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This example uses the <code>pdf2zh</code> Python package to translate a PDF file asynchronously. The API key is obtained from the environment variable <code>PDF2ZH_API_KEY</code>.</p> </div> <div class="language-python highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>AsyncPDFTranslator</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>    <span class=c1># Initialize the translator with your API key</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>AsyncPDFTranslator</span><span class=p>(</span><span class=n>api_key</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;PDF2ZH_API_KEY&quot;</span><span class=p>))</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>    <span class=c1># Translate a PDF file</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a>        <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>        <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a>    <span class=p>)</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a>
</span><span id=__span-30-19><a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a><span class=c1># Run the async function</span>
</span><span id=__span-30-20><a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=minimal-usage-example-sync-minimal-usage-example-sync>Minimal Usage Example (Sync) {#minimal-usage-example-sync}</h3> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This example uses the <code>pdf2zh</code> Python package to translate a PDF file synchronously.</p> </div> <div class="language-python highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>PDFTranslator</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>    <span class=c1># Initialize the translator with your API key</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>PDFTranslator</span><span class=p>(</span><span class=n>api_key</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;PDF2ZH_API_KEY&quot;</span><span class=p>))</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>    <span class=c1># Translate a PDF file</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>        <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>        <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>    <span class=p>)</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a>
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a>    <span class=n>main</span><span class=p>()</span>
</span></code></pre></div> <hr> <h3 id=output_1>OUTPUT</h3> <h3 id=->最小使用範例（異步） {#最小使用範例 - 異步}</h3> <div class="admonition note"> <p class=admonition-title>注意</p> <p>此範例使用 <code>pdf2zh</code> Python 套件來異步翻譯 PDF 文件。API 金鑰從環境變數 <code>PDF2ZH_API_KEY</code> 中獲取。</p> </div> <div class="language-python highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>AsyncPDFTranslator</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>    <span class=c1># 使用您的 API 金鑰初始化翻譯器</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>AsyncPDFTranslator</span><span class=p>(</span><span class=n>api_key</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;PDF2ZH_API_KEY&quot;</span><span class=p>))</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>    <span class=c1># 翻譯一個 PDF 文件</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>        <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>        <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>    <span class=p>)</span>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=c1># 運行異步函數</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=-_1>最小使用範例（同步） {#最小使用範例 - 同步}</h3> <div class="admonition note"> <p class=admonition-title>注意</p> <p>此範例使用 <code>pdf2zh</code> Python 套件來同步翻譯 PDF 文件。</p> </div> <p><div class="language-python highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>PDFTranslator</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>    <span class=c1># 使用您的 API 金鑰初始化翻譯器</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>PDFTranslator</span><span class=p>(</span><span class=n>api_key</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;PDF2ZH_API_KEY&quot;</span><span class=p>))</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>    <span class=c1># 翻譯一個 PDF 文件</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>        <span class=n>input_file</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>        <span class=n>output_file</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>        <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>        <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>    <span class=p>)</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translation completed: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a>    <span class=n>main</span><span class=p>()</span>
</span></code></pre></div> <div class="language-python highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=c1># Assume you already have a valid SettingsModel instance named `settings`</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=c1># and a PDF file path</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>translate_one</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Path</span><span class=p>):</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf_path</span><span class=p>):</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>            <span class=n>etype</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a>            <span class=k>if</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;stage_summary&quot;</span><span class=p>:</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a>                <span class=c1># Optional pre-flight summary of stages</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>                <span class=n>stages</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stages&quot;</span><span class=p>,</span> <span class=p>[])</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Stage summary:&quot;</span><span class=p>,</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>s</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>s</span><span class=p>[</span><span class=s1>&#39;percent&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>stages</span><span class=p>))</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;progress_start&quot;</span><span class=p>,</span> <span class=s2>&quot;progress_update&quot;</span><span class=p>,</span> <span class=s2>&quot;progress_end&quot;</span><span class=p>}:</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>                <span class=n>stage</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stage&quot;</span><span class=p>)</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a>                <span class=n>stage_prog</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stage_progress&quot;</span><span class=p>)</span>  <span class=c1># 0..100</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>                <span class=n>overall</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;overall_progress&quot;</span><span class=p>)</span>  <span class=c1># 0..100</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a>                <span class=n>part_i</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;part_index&quot;</span><span class=p>)</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a>                <span class=n>part_n</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;total_parts&quot;</span><span class=p>)</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[</span><span class=si>{</span><span class=n>etype</span><span class=si>}</span><span class=s2>] </span><span class=si>{</span><span class=n>stage</span><span class=si>}</span><span class=s2> | stage </span><span class=si>{</span><span class=n>stage_prog</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% | overall </span><span class=si>{</span><span class=n>overall</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% (part </span><span class=si>{</span><span class=n>part_i</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>part_n</span><span class=si>}</span><span class=s2>)&quot;</span><span class=p>)</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27 href=#__codelineno-34-27></a>                <span class=c1># You will also get a raised exception after this yield</span>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28 href=#__codelineno-34-28></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[error]&quot;</span><span class=p>,</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error&quot;</span><span class=p>),</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error_type&quot;</span><span class=p>))</span>
</span><span id=__span-34-29><a id=__codelineno-34-29 name=__codelineno-34-29 href=#__codelineno-34-29></a>
</span><span id=__span-34-30><a id=__codelineno-34-30 name=__codelineno-34-30 href=#__codelineno-34-30></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;finish&quot;</span><span class=p>:</span>
</span><span id=__span-34-31><a id=__codelineno-34-31 name=__codelineno-34-31 href=#__codelineno-34-31></a>                <span class=n>result</span> <span class=o>=</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;translate_result&quot;</span><span class=p>]</span>
</span><span id=__span-34-32><a id=__codelineno-34-32 name=__codelineno-34-32 href=#__codelineno-34-32></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Done in&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;total_seconds&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span> <span class=s2>&quot;s&quot;</span><span class=p>)</span>
</span><span id=__span-34-33><a id=__codelineno-34-33 name=__codelineno-34-33 href=#__codelineno-34-33></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Mono:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;mono_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-34-34><a id=__codelineno-34-34 name=__codelineno-34-34 href=#__codelineno-34-34></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Dual:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;dual_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-34-35><a id=__codelineno-34-35 name=__codelineno-34-35 href=#__codelineno-34-35></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;No-watermark Mono:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;no_watermark_mono_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-34-36><a id=__codelineno-34-36 name=__codelineno-34-36 href=#__codelineno-34-36></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;No-watermark Dual:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;no_watermark_dual_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-34-37><a id=__codelineno-34-37 name=__codelineno-34-37 href=#__codelineno-34-37></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Glossary:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;auto_extracted_glossary_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-34-38><a id=__codelineno-34-38 name=__codelineno-34-38 href=#__codelineno-34-38></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Peak memory:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;peak_memory_usage&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-34-39><a id=__codelineno-34-39 name=__codelineno-34-39 href=#__codelineno-34-39></a>                <span class=k>break</span>
</span><span id=__span-34-40><a id=__codelineno-34-40 name=__codelineno-34-40 href=#__codelineno-34-40></a>
</span><span id=__span-34-41><a id=__codelineno-34-41 name=__codelineno-34-41 href=#__codelineno-34-41></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span><span id=__span-34-42><a id=__codelineno-34-42 name=__codelineno-34-42 href=#__codelineno-34-42></a>        <span class=c1># Catch exceptions raised by the stream after an error event</span>
</span><span id=__span-34-43><a id=__codelineno-34-43 name=__codelineno-34-43 href=#__codelineno-34-43></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation failed:&quot;</span><span class=p>,</span> <span class=n>exc</span><span class=p>)</span>
</span><span id=__span-34-44><a id=__codelineno-34-44 name=__codelineno-34-44 href=#__codelineno-34-44></a>
</span><span id=__span-34-45><a id=__codelineno-34-45 name=__codelineno-34-45 href=#__codelineno-34-45></a><span class=c1># asyncio.run(translate_one(settings, &quot;/path/to/file.pdf&quot;))</span>
</span></code></pre></div></p> <p>If you are not satisfied with the service, you can request a refund within 7 days of purchase.</p> <p>Please note that we will not refund for the following reasons:</p> <ul> <li>You have already used the service and are satisfied with the result.</li> <li>You have already used the service and are not satisfied with the result, but you have not provided any evidence to support your claim.</li> <li>You have already used the service and are not satisfied with the result, but you have not contacted us for support.</li> </ul> <p>If you have any questions, please contact us at <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a>.</p> <hr> <h3 id=output_2>OUTPUT</h3> <h3 id=_27>取消政策</h3> <p>如果您對服務不滿意，可以在購買後 7 天內申請退款。</p> <p>請注意，以下情況我們將不予退款：</p> <ul> <li>您已經使用了服務並且對結果滿意。</li> <li>您已經使用了服務但對結果不滿意，但您沒有提供任何證據來支持您的主張。</li> <li>您已經使用了服務但對結果不滿意，但您沒有聯繫我們尋求支援。</li> </ul> <p>如果您有任何疑問，請透過 <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a> 與我們聯繫。 For example, you can cancel the task if the user closes the browser tab or navigates away from the page.</p> <h3 id=example_3>Example</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>    <span class=c1># Create a task for the translation stream</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>    <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>        <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>            <span class=n>file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>            <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>            <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>            <span class=n>page_range</span><span class=o>=</span><span class=s2>&quot;1-5&quot;</span><span class=p>,</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>            <span class=n>output_type</span><span class=o>=</span><span class=s2>&quot;markdown&quot;</span><span class=p>,</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>            <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>,</span>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a>        <span class=p>)</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>    <span class=p>)</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a>    <span class=c1># Simulate cancellation after 2 seconds</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a>    <span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a>
</span><span id=__span-35-21><a id=__codelineno-35-21 name=__codelineno-35-21 href=#__codelineno-35-21></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-35-22><a id=__codelineno-35-22 name=__codelineno-35-22 href=#__codelineno-35-22></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>task</span><span class=p>:</span>
</span><span id=__span-35-23><a id=__codelineno-35-23 name=__codelineno-35-23 href=#__codelineno-35-23></a>            <span class=nb>print</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span><span id=__span-35-24><a id=__codelineno-35-24 name=__codelineno-35-24 href=#__codelineno-35-24></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-35-25><a id=__codelineno-35-25 name=__codelineno-35-25 href=#__codelineno-35-25></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Task was cancelled&quot;</span><span class=p>)</span>
</span><span id=__span-35-26><a id=__codelineno-35-26 name=__codelineno-35-26 href=#__codelineno-35-26></a>
</span><span id=__span-35-27><a id=__codelineno-35-27 name=__codelineno-35-27 href=#__codelineno-35-27></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notes_6>Notes</h3> <ul> <li>Cancelling the task will stop the translation process and release any resources associated with it.</li> <li>If the translation process has already started, cancelling the task may leave partial results in the output file if one was specified.</li> </ul> <hr> <h3 id=translation-result_11>TRANSLATION RESULT</h3> <p>您可以取消消耗串流的任務。取消操作會傳播到底層的翻譯過程。 例如，如果用戶關閉瀏覽器標籤頁或離開頁面，您可以取消任務。</p> <h3 id=_28>範例</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>    <span class=c1># 為翻譯串流創建一個任務</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>    <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>        <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>            <span class=n>file</span><span class=o>=</span><span class=s2>&quot;document.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a>            <span class=n>target_lang</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>            <span class=n>source_lang</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>            <span class=n>page_range</span><span class=o>=</span><span class=s2>&quot;1-5&quot;</span><span class=p>,</span>
</span><span id=__span-36-12><a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>            <span class=n>output_type</span><span class=o>=</span><span class=s2>&quot;markdown&quot;</span><span class=p>,</span>
</span><span id=__span-36-13><a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>            <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your_api_key&quot;</span><span class=p>,</span>
</span><span id=__span-36-14><a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>        <span class=p>)</span>
</span><span id=__span-36-15><a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a>    <span class=p>)</span>
</span><span id=__span-36-16><a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a>
</span><span id=__span-36-17><a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>    <span class=c1># 模擬 2 秒後取消</span>
</span><span id=__span-36-18><a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-36-19><a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a>    <span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span><span id=__span-36-20><a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a>
</span><span id=__span-36-21><a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-36-22><a id=__codelineno-36-22 name=__codelineno-36-22 href=#__codelineno-36-22></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>task</span><span class=p>:</span>
</span><span id=__span-36-23><a id=__codelineno-36-23 name=__codelineno-36-23 href=#__codelineno-36-23></a>            <span class=nb>print</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span><span id=__span-36-24><a id=__codelineno-36-24 name=__codelineno-36-24 href=#__codelineno-36-24></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-36-25><a id=__codelineno-36-25 name=__codelineno-36-25 href=#__codelineno-36-25></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Task was cancelled&quot;</span><span class=p>)</span>
</span><span id=__span-36-26><a id=__codelineno-36-26 name=__codelineno-36-26 href=#__codelineno-36-26></a>
</span><span id=__span-36-27><a id=__codelineno-36-27 name=__codelineno-36-27 href=#__codelineno-36-27></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=_29>注意事項</h3> <ul> <li>取消任務將停止翻譯過程並釋放與之相關的任何資源。</li> <li>如果翻譯過程已經開始，取消任務可能會在輸出文件中留下部分結果（如果指定了輸出文件）。</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>cancellable</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>    <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>_consume</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>))</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>1.0</span><span class=p>)</span>  <span class=c1># let it start</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>    <span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>        <span class=k>await</span> <span class=n>task</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Cancelled&quot;</span><span class=p>)</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_consume</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;finish&quot;</span><span class=p>:</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a>            <span class=k>break</span>
</span></code></pre></div> <p>The following table provides examples of different event shapes and their corresponding descriptions:</p> <table> <thead> <tr> <th>Shape</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/point.png></td> <td>Point event: A single point in time.</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/interval.png></td> <td>Interval event: A continuous range of time.</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/gap.png></td> <td>Gap event: A discontinuous interval with a gap.</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/periodic.png></td> <td>Periodic event: Repeats at regular intervals.</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/sparse.png></td> <td>Sparse event: Occurs infrequently with irregular gaps.</td> </tr> </tbody> </table> <hr> <h3 id=translation-result_12>TRANSLATION RESULT</h3> <h3 id=_30>事件形狀範例</h3> <p>下表提供了不同事件形狀的範例及其對應的描述：</p> <table> <thead> <tr> <th>形狀</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/point.png></td> <td>點事件：單一時間點。</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/interval.png></td> <td>區間事件：連續的時間範圍。</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/gap.png></td> <td>間隙事件：具有間隙的不連續區間。</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/periodic.png></td> <td>週期性事件：以固定間隔重複發生。</td> </tr> <tr> <td><img alt src=https://raw.githubusercontent.com/facebookresearch/theseus/main/docs/source/_static/img/event_shapes/sparse.png></td> <td>稀疏事件：不頻繁發生且具有不規則間隔的事件。</td> </tr> <tr> <td>This event is emitted when a stage of the translation process is completed. It contains a summary of the stage, including the number of pages processed, the time taken, and any errors encountered.</td> <td></td> </tr> </tbody> </table> <div class="language-json highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=p>{</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=w>    </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;translation&quot;</span><span class=p>,</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>    </span><span class=nt>&quot;pages_processed&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=w>    </span><span class=nt>&quot;time_taken&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>30.5</span><span class=p>,</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=w>    </span><span class=nt>&quot;errors&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=translation-result_13>TRANSLATION RESULT</h3> <p>階段摘要事件（範例）：此事件在翻譯過程的某個階段完成時發出。它包含該階段的摘要，包括處理的頁數、花費的時間以及遇到的任何錯誤。</p> <p><div class="language-json highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=p>{</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=w>    </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;translation&quot;</span><span class=p>,</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=w>    </span><span class=nt>&quot;pages_processed&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=w>    </span><span class=nt>&quot;time_taken&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>30.5</span><span class=p>,</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=w>    </span><span class=nt>&quot;errors&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a><span class=p>}</span>
</span></code></pre></div> <div class="language-json highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=p>{</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=w>  </span><span class=nt>&quot;stages&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Parse PDF and Create Intermediate Representation&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1086</span><span class=p>},</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DetectScannedFile&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0188</span><span class=p>},</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Parse Page Layout&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1079</span><span class=p>}</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=w>    </span><span class=c1>// ... more stages ...</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=w>  </span><span class=p>],</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=w>  </span><span class=nt>&quot;part_index&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=w>  </span><span class=nt>&quot;total_parts&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=p>}</span>
</span></code></pre></div></p> <p><code>{"type": "progress", "data": {"progress": 0.5, "message": "Processing page 5 of 10"}}</code></p> <h3 id=translation-result_14>TRANSLATION RESULT</h3> <p>進度事件（範例）：<code>{"type": "progress", "data": {"progress": 0.5, "message": "Processing page 5 of 10"}}</code> <div class="language-json highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=p>{</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress_update&quot;</span><span class=p>,</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=w>  </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translate Paragraphs&quot;</span><span class=p>,</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>  </span><span class=nt>&quot;stage_progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>2.04</span><span class=p>,</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=w>  </span><span class=nt>&quot;stage_current&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=w>  </span><span class=nt>&quot;stage_total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>49</span><span class=p>,</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=w>  </span><span class=nt>&quot;overall_progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>53.44</span><span class=p>,</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=w>  </span><span class=nt>&quot;part_index&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=w>  </span><span class=nt>&quot;total_parts&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=p>}</span>
</span></code></pre></div></p> <p>The finish event is emitted when the translation job is completed. The event data contains the final result of the translation.</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=p>{</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;finish&quot;</span><span class=p>,</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=w>    </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text&quot;</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=p>}</span>
</span></code></pre></div> <p>Error event (example): The error event is emitted when an error occurs during the translation process. The event data contains the error message.</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=p>{</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=w>    </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;An error occurred&quot;</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=translation-result_15>TRANSLATION RESULT</h3> <p>完成事件（範例）：當翻譯任務完成時，會發出完成事件。事件數據包含翻譯的最終結果。</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=p>{</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;finish&quot;</span><span class=p>,</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=w>    </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translated text&quot;</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=p>}</span>
</span></code></pre></div> <p>錯誤事件（範例）：當翻譯過程中發生錯誤時，會發出錯誤事件。事件數據包含錯誤訊息。</p> <p><div class="language-json highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=p>{</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=w>    </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;An error occurred&quot;</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=p>}</span>
</span></code></pre></div> <div class="language-json highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=p>{</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;finish&quot;</span><span class=p>,</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=w>  </span><span class=nt>&quot;translate_result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=w>    </span><span class=nt>&quot;original_pdf_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pdf2zh_files/&lt;session&gt;/table.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=w>    </span><span class=nt>&quot;mono_pdf_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.mono.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=w>    </span><span class=nt>&quot;dual_pdf_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.dual.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=w>    </span><span class=nt>&quot;no_watermark_mono_pdf_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pdf2zh_files/&lt;session&gt;/table.no_watermark.zh-CN.mono.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=w>    </span><span class=nt>&quot;no_watermark_dual_pdf_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pdf2zh_files/&lt;session&gt;/table.no_watermark.zh-CN.dual.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=w>    </span><span class=nt>&quot;auto_extracted_glossary_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.glossary.csv&quot;</span><span class=p>,</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a><span class=w>    </span><span class=nt>&quot;total_seconds&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>42.83</span><span class=p>,</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=w>    </span><span class=nt>&quot;peak_memory_usage&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>4651.55</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a><span class=p>}</span>
</span></code></pre></div></p> <p>The <code>error</code> event is emitted when an error occurs during the translation process. The event data contains the error message.</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=p>{</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=w>    </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;An error occurred while translating the document.&quot;</span>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=translation-result_16>TRANSLATION RESULT</h3> <p>錯誤事件（範例）：當翻譯過程中發生錯誤時，會發出 <code>error</code> 事件。事件數據包含錯誤訊息。</p> <p><div class="language-json highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=p>{</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=w>    </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;翻譯文件時發生錯誤。&quot;</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=p>}</span>
</span></code></pre></div> <div class="language-json highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=p>{</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Babeldoc translation error: &lt;message&gt;&quot;</span><span class=p>,</span>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=w>  </span><span class=nt>&quot;error_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;BabeldocError&quot;</span><span class=p>,</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=w>  </span><span class=nt>&quot;details&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;optional original error or traceback&gt;&quot;</span>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=p>}</span>
</span></code></pre></div></p> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li><strong>File Size &amp; Structure</strong>: Smaller documents (less than 100 pages) with a clear structure (e.g., academic papers, reports) will generally have better results.</li> <li><strong>Image &amp; Table Recognition</strong>: The tool automatically detects and processes images and tables within the PDF. However, complex layouts or low-quality scans may require manual adjustments.</li> <li><strong>Language Support</strong>: The tool supports multiple languages. For the best results, ensure the source and target languages are correctly specified in the configuration. See <a href=https://pdf2zh-next.com/advanced/SUPPORTED_LANGUAGES.md>Supported Languages</a> for more details.</li> </ul> </div> <hr> <h3 id=output-language>OUTPUT LANGUAGE</h3> <h2 id=zh_tw>zh_TW</h2> <h3 id=translation-result_17>TRANSLATION RESULT</h3> <ul> <li>始終處理來自生成器的錯誤事件和異常。</li> <li>在 <code>finish</code> 時中斷循環，以避免不必要的工作。</li> <li>在呼叫前確保 <code>file</code> 存在且 <code>settings.validate_settings()</code> 通過。</li> <li>大型文檔可能會被拆分；使用 <code>part_index/total_parts</code> 和 <code>overall_progress</code> 來驅動您的 UI。</li> <li>如果您的 UI 對重複的相同更新敏感，請對 <code>progress_update</code> 進行防抖處理。</li> <li><code>report_interval</code> (SettingsModel)：僅控制 <code>progress_update</code> 事件的發射頻率。它不影響 <code>stage_summary</code>、<code>progress_start</code>、<code>progress_end</code> 或 <code>finish</code>。預設為 0.1 秒，最小允許值為 0.05 秒。根據進度監控邏輯，當 <code>stage_total &lt;= 3</code> 時，更新不受 <code>report_interval</code> 的限制。</li> </ul> <div align=right> <h6><small>Some content on this page has been translated by GPT and may contain errors.</small></h6> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最後更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年11月24日 12:48:58 UTC">2025年11月24日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=建立日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年11月24日 12:48:22 UTC">2025年11月24日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=貢獻者> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg> </span> <nav> <a href=mailto:shidingbo31415@163.com>pppppop</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> 回到頂端 </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=頁腳> <a href=../../supported_languages.html class="md-footer__link md-footer__link--prev" aria-label="上一頁: 支持的語言"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> 上一頁 </span> <div class=md-ellipsis> 支持的語言 </div> </div> </a> <a href=../../FAQ.html class="md-footer__link md-footer__link--next" aria-label="下一頁: 常見問題"> <div class=md-footer__title> <span class=md-footer__direction> 下一頁 </span> <div class=md-ellipsis> 常見問題 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/pdf2zh-next/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u8907\u88fd", "clipboard.copy": "\u8907\u88fd", "search.result.more.one": "\u6b64\u9801\u5c1a\u6709 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.more.other": "\u6b64\u9801\u5c1a\u6709 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.term.missing": "\u7f3a\u5c11\u5b57\u8a5e", "select.version": "\u9078\u64c7\u7248\u672c"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>