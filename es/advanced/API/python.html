<!doctype html><html lang=zh-TW class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="PDF scientific paper translation and bilingual comparison."><meta name=author content=awwaawwa><link rel=canonical href=https://pdf2zh-next.com/es/advanced/API/python.html><link rel=prev href=../../supported_languages.html><link rel=next href=../../FAQ.html><link rel=alternate href=../../../advanced/API/python.html hreflang=en><link rel=alternate href=../../../zh/advanced/API/python.html hreflang=zh><link rel=alternate href=../../../zh_TW/advanced/API/python.html hreflang=zh_TW><link rel=alternate href=../../../ja/advanced/API/python.html hreflang=ja><link rel=alternate href=../../../ko/advanced/API/python.html hreflang=ko><link rel=alternate href=../../../fr/advanced/API/python.html hreflang=fr><link rel=alternate href=../../../de/advanced/API/python.html hreflang=de><link rel=alternate href=python.html hreflang=es><link rel=alternate href=../../../ru/advanced/API/python.html hreflang=ru><link rel=alternate href=../../../it/advanced/API/python.html hreflang=it><link rel=alternate href=../../../pt/advanced/API/python.html hreflang=pt><link rel=icon href=../../../images/logo_photo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>API - PDFMathTranslate</title><link rel=stylesheet href=../../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Red Hat Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#pdfmathtranslate class=md-skip> 跳轉到 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=頁首> <a href=../../index.html title=PDFMathTranslate class="md-header__button md-logo" aria-label=PDFMathTranslate data-md-component=logo> <img src=../../../images/logo_photo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PDFMathTranslate </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=amber data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=orange data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label=選擇語言> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../../../advanced/API/python.html hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=../../../zh/advanced/API/python.html hreflang=zh class=md-select__link> 简体中文 </a> </li> <li class=md-select__item> <a href=../../../zh_TW/advanced/API/python.html hreflang=zh_TW class=md-select__link> 繁體中文 </a> </li> <li class=md-select__item> <a href=../../../ja/advanced/API/python.html hreflang=ja class=md-select__link> 日本語 </a> </li> <li class=md-select__item> <a href=../../../ko/advanced/API/python.html hreflang=ko class=md-select__link> 한국어 </a> </li> <li class=md-select__item> <a href=../../../fr/advanced/API/python.html hreflang=fr class=md-select__link> Français </a> </li> <li class=md-select__item> <a href=../../../de/advanced/API/python.html hreflang=de class=md-select__link> Deutsch </a> </li> <li class=md-select__item> <a href=python.html hreflang=es class=md-select__link> Español </a> </li> <li class=md-select__item> <a href=../../../ru/advanced/API/python.html hreflang=ru class=md-select__link> Русский </a> </li> <li class=md-select__item> <a href=../../../it/advanced/API/python.html hreflang=it class=md-select__link> Italiano </a> </li> <li class=md-select__item> <a href=../../../pt/advanced/API/python.html hreflang=pt class=md-select__link> Português </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜尋 placeholder=搜尋 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=搜尋> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清除 aria-label=清除 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜尋引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next title=前往倉庫 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> PDFMathTranslate/PDFMathTranslate-next </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=標籤 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> Inicio </a> </li> <li class=md-tabs__item> <a href=../../getting-started/getting-started.html class=md-tabs__link> Empezar </a> </li> <li class=md-tabs__item> <a href=../advanced.html class=md-tabs__link> Opciones avanzadas </a> </li> <li class=md-tabs__item> <a href=../../supported_languages.html class=md-tabs__link> Idiomas soportados </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=python.html class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../FAQ.html class=md-tabs__link> Preguntas frecuentes </a> </li> <li class=md-tabs__item> <a href=../../community/Contribution-Guide.html class=md-tabs__link> Comunidad </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=導覽列 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=PDFMathTranslate class="md-nav__button md-logo" aria-label=PDFMathTranslate data-md-component=logo> <img src=../../../images/logo_photo.svg alt=logo> </a> PDFMathTranslate </label> <div class=md-nav__source> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next title=前往倉庫 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> PDFMathTranslate/PDFMathTranslate-next </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> Inicio </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Empezar </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Empezar </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/getting-started.html class=md-nav__link> <span class=md-ellipsis> Empezar </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Instalación </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Instalación </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_winexe.html class=md-nav__link> <span class=md-ellipsis> Windows EXE </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_docker.html class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/INSTALLATION_uv.html class=md-nav__link> <span class=md-ellipsis> UV </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Uso </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Uso </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/USAGE_commandline.html class=md-nav__link> <span class=md-ellipsis> Línea de comandos </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/USAGE_webui.html class=md-nav__link> <span class=md-ellipsis> WebUI </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/guaguastandup/zotero-pdf2zh class=md-nav__link> <span class=md-ellipsis> guaguastandup/zotero-pdf2zh </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Opciones avanzadas </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Opciones avanzadas </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../advanced.html class=md-nav__link> <span class=md-ellipsis> Opciones avanzadas </span> </a> </li> <li class=md-nav__item> <a href=../Language-Codes.html class=md-nav__link> <span class=md-ellipsis> Código de idioma </span> </a> </li> <li class=md-nav__item> <a href=../Documentation-of-Translation-Services.html class=md-nav__link> <span class=md-ellipsis> Documentación de servicios de traducción </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Translation Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Translation Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../TranslationServices/Aliyun.html class=md-nav__link> <span class=md-ellipsis> Aliyun </span> </a> </li> <li class=md-nav__item> <a href=../TranslationServices/SiliconFlow.html class=md-nav__link> <span class=md-ellipsis> SiliconFlow </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../supported_languages.html class=md-nav__link> <span class=md-ellipsis> Idiomas soportados </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=python.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> API </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目錄> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目錄 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> <nav class=md-nav aria-label="Quick Start"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#basic-usage class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentation class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=#community class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class=md-nav__item> <a href=#contributing class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> <nav class=md-nav aria-label=License> <ul class=md-nav__list> <li class=md-nav__item> <a href=#translation-result class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../FAQ.html class=md-nav__link> <span class=md-ellipsis> Preguntas frecuentes </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Comunidad </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Comunidad </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../community/Contribution-Guide.html class=md-nav__link> <span class=md-ellipsis> Contribution-Guide </span> </a> </li> <li class=md-nav__item> <a href=../../community/Translate-Contribution-Guide.html class=md-nav__link> <span class=md-ellipsis> Guía de contribución de traducciones </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目錄> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目錄 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> <nav class=md-nav aria-label="Quick Start"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#basic-usage class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentation class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=#community class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class=md-nav__item> <a href=#contributing class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> <nav class=md-nav aria-label=License> <ul class=md-nav__list> <li class=md-nav__item> <a href=#translation-result class=md-nav__link> <span class=md-ellipsis> TRANSLATION RESULT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/edit/main/docs/es/advanced/API/python.md title=編輯此頁 class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/raw/main/docs/es/advanced/API/python.md title=查看此頁原始碼 class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <blockquote> <p>Thank you for your understanding and support!</p> </blockquote> <h1 id=pdfmathtranslate>PDFMathTranslate</h1> <p><strong>Translate PDFs with mathematical formulas accurately.</strong></p> <p>PDFMathTranslate is a tool designed to translate PDF documents, especially those containing mathematical formulas, from one language to another. It supports multiple translation services and ensures that mathematical formulas are accurately translated and rendered.</p> <h2 id=features>Features</h2> <ul> <li><strong>Accurate Formula Translation</strong>: Uses <a href=https://github.com/PDFMathTranslate/PDFMathTranslate>PDFMathTranslate</a> to handle mathematical formulas.</li> <li><strong>Multiple Translation Services</strong>: Supports Google Translate, DeepL, OpenAI, and more.</li> <li><strong>Flexible Output Formats</strong>: Output translated documents in PDF, LaTeX, or Markdown.</li> <li><strong>Easy to Use</strong>: Simple command-line interface and WebUI.</li> </ul> <h2 id=quick-start>Quick Start</h2> <h3 id=installation>Installation</h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>pdf2zh
</span></code></pre></div> <h3 id=basic-usage>Basic Usage</h3> <p>Translate a PDF file using the command line:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>pdf2zh<span class=w> </span>translate<span class=w> </span>--file<span class=w> </span>path/to/your/file.pdf
</span></code></pre></div> <p>Or use the WebUI:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>pdf2zh<span class=w> </span>webui
</span></code></pre></div> <h2 id=documentation>Documentation</h2> <p>For detailed documentation, visit <a href=https://pdf2zh-next.com>https://pdf2zh-next.com</a>.</p> <ul> <li><strong><a href=https://pdf2zh-next.com/getting-started/INSTALLATION.html>Getting Started</a></strong>: Installation and basic usage.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/USAGE.html>Usage</a></strong>: Detailed usage guide.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/ADVANCED.html>Advanced</a></strong>: Advanced configuration and customization.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/SUPPORTED_LANGUAGES.html>Supported Languages</a></strong>: List of supported languages.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/FAQ.html>FAQ</a></strong>: Frequently asked questions.</li> </ul> <h2 id=community>Community</h2> <p>Join our community for support and contributions:</p> <ul> <li><strong>GitHub</strong>: <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next>https://github.com/PDFMathTranslate/PDFMathTranslate-next</a></li> <li><strong>Discord</strong>: <a href=https://discord.gg/example>Join our Discord server</a></li> </ul> <h2 id=contributing>Contributing</h2> <p>We welcome contributions! Please read our <a href=https://pdf2zh-next.com/getting-started/CONTRIBUTING.html>Contribution Guidelines</a> for details.</p> <p>For translators, see the <a href=https://pdf2zh-next.com/getting-started/FOR_TRANSLATORS.html>For Translators</a> guide.</p> <h2 id=license>License</h2> <p>This project is licensed under the MIT License. See the <a href=LICENSE>LICENSE</a> file for details.</p> <hr> <h3 id=translation-result>TRANSLATION RESULT</h3> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Esta documentación puede contener contenido generado por IA. Aunque nos esforzamos por la precisión, pueden haber inexactitudes. Por favor, reporta cualquier problema a través de:</p> <ul> <li><a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next/issues>Problemas de GitHub</a></li> <li>Contribución de la comunidad (¡PRs son bienvenidos!)</li> </ul> <p>¡Gracias por tu comprensión y apoyo!</p> </div> <h1 id=pdfmathtranslate_1>PDFMathTranslate</h1> <p><strong>Traduce PDFs con fórmulas matemáticas con precisión.</strong></p> <p>PDFMathTranslate es una herramienta diseñada para traducir documentos PDF, especialmente aquellos que contienen fórmulas matemáticas, de un idioma a otro. Soporta múltiples servicios de traducción y garantiza que las fórmulas matemáticas se traduzcan y rendericen con precisión.</p> <h2 id=caracteristicas>Características</h2> <ul> <li><strong>Traducción precisa de fórmulas</strong>: Usa <a href=https://github.com/PDFMathTranslate/PDFMathTranslate>PDFMathTranslate</a> para manejar fórmulas matemáticas.</li> <li><strong>Múltiples servicios de traducción</strong>: Soporta Google Translate, DeepL, OpenAI y más.</li> <li><strong>Formatos de salida flexibles</strong>: Genera documentos traducidos en PDF, LaTeX o Markdown.</li> <li><strong>Fácil de usar</strong>: Interfaz de línea de comandos simple y WebUI.</li> </ul> <h2 id=empezar>Empezar</h2> <h3 id=instalacion>Instalación</h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>pip<span class=w> </span>install<span class=w> </span>pdf2zh
</span></code></pre></div> <h3 id=uso-basico>Uso básico</h3> <p>Traduce un archivo PDF usando la línea de comandos:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>pdf2zh<span class=w> </span>translate<span class=w> </span>--file<span class=w> </span>ruta/a/tu/archivo.pdf
</span></code></pre></div> <p>O usa la WebUI:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>pdf2zh<span class=w> </span>webui
</span></code></pre></div> <h2 id=documentacion>Documentación</h2> <p>Para documentación detallada, visita <a href=https://pdf2zh-next.com>https://pdf2zh-next.com</a>.</p> <ul> <li><strong><a href=https://pdf2zh-next.com/getting-started/INSTALLATION.html>Empezar</a></strong>: Instalación y uso básico.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/USAGE.html>Uso</a></strong>: Guía de uso detallada.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/ADVANCED.html>Opciones avanzadas</a></strong>: Configuración y personalización avanzada.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/SUPPORTED_LANGUAGES.html>Idiomas soportados</a></strong>: Lista de idiomas soportados.</li> <li><strong><a href=https://pdf2zh-next.com/getting-started/FAQ.html>Preguntas frecuentes</a></strong>: Preguntas frecuentes.</li> </ul> <h2 id=comunidad>Comunidad</h2> <p>Únete a nuestra comunidad para soporte y contribuciones:</p> <ul> <li><strong>GitHub</strong>: <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next>https://github.com/PDFMathTranslate/PDFMathTranslate-next</a></li> <li><strong>Discord</strong>: <a href=https://discord.gg/example>Únete a nuestro servidor de Discord</a></li> </ul> <h2 id=contribuciones>Contribuciones</h2> <p>¡Agradecemos las contribuciones! Por favor lee nuestras <a href=https://pdf2zh-next.com/getting-started/CONTRIBUTING.html>Guías de contribución</a> para detalles.</p> <p>Para traductores, consulta la guía <a href=https://pdf2zh-next.com/getting-started/FOR_TRANSLATORS.html>Guía de contribución de traducciones</a>.</p> <h2 id=licencia>Licencia</h2> <p>Este proyecto está licenciado bajo la Licencia MIT. Consulta el archivo <a href=LICENSE>LICENSE</a> para detalles.</p> <p>This is the API for streaming translation.</p> <h3 id=parameters>Parameters</h3> <ul> <li><code>file_path</code> (str): Path to the PDF file to be translated.</li> <li><code>target_language</code> (str): The target language to translate to, using the <a href=#supported-languages>Language Code</a>.</li> <li><code>output_path</code> (str): The path to save the translated PDF file.</li> <li><code>api_key</code> (str): Your OpenAI API key.</li> <li><code>model</code> (str, optional): The model to use for translation. Default is <code>gpt-4o</code>.</li> <li><code>pages</code> (str, optional): Specify pages to translate. For example, <code>1,3,5-9</code>. If not provided, all pages will be translated.</li> <li><code>proxy</code> (str, optional): Proxy to use for the request. For example, <code>http://127.0.0.1:7890</code>.</li> <li><code>api_base</code> (str, optional): The base URL for the API. Default is <code>https://api.openai.com/v1</code>.</li> </ul> <h3 id=returns>Returns</h3> <ul> <li><code>AsyncGenerator</code>: An async generator that yields translation progress updates.</li> </ul> <h3 id=example>Example</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>progress</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>        <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>        <span class=n>output_path</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>    <span class=p>):</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>progress</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notes>Notes</h3> <ul> <li>This function is useful for real-time progress tracking during translation.</li> <li>The progress is a float between 0 and 1, indicating the completion percentage.</li> </ul> <hr> <h3 id=output>OUTPUT</h3> <h2 id=python-api-do_translate_async_stream>Python API: do_translate_async_stream</h2> <p>Esta es la API para la traducción en flujo.</p> <h3 id=parametros>Parámetros</h3> <ul> <li><code>file_path</code> (str): Ruta al archivo PDF a traducir.</li> <li><code>target_language</code> (str): El idioma objetivo al que traducir, usando el <a href=#idiomas-soportados>Código de idioma</a>.</li> <li><code>output_path</code> (str): La ruta para guardar el archivo PDF traducido.</li> <li><code>api_key</code> (str): Tu clave de API de OpenAI.</li> <li><code>model</code> (str, opcional): El modelo a usar para la traducción. Por defecto es <code>gpt-4o</code>.</li> <li><code>pages</code> (str, opcional): Especifica las páginas a traducir. Por ejemplo, <code>1,3,5-9</code>. Si no se proporciona, se traducirán todas las páginas.</li> <li><code>proxy</code> (str, opcional): Proxy a usar para la solicitud. Por ejemplo, <code>http://127.0.0.1:7890</code>.</li> <li><code>api_base</code> (str, opcional): La URL base para la API. Por defecto es <code>https://api.openai.com/v1</code>.</li> </ul> <h3 id=retorna>Retorna</h3> <ul> <li><code>AsyncGenerator</code>: Un generador asíncrono que produce actualizaciones de progreso de la traducción.</li> </ul> <h3 id=ejemplo>Ejemplo</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>progress</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>        <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>        <span class=n>output_path</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>    <span class=p>):</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>progress</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notas>Notas</h3> <ul> <li>Esta función es útil para el seguimiento del progreso en tiempo real durante la traducción.</li> <li>El progreso es un flotante entre 0 y 1, indicando el porcentaje de completado.</li> </ul> <p><code>pdf2zh</code> is a tool designed for translating PDF documents from English to Chinese. It supports translation via various translation services, including <strong>DeepSeek</strong>, <strong>DeepL</strong>, <strong>OpenAI</strong>, and <strong>Google Translate</strong>. The tool can handle both text and mathematical formulas, ensuring accurate and high-quality translations.</p> <h3 id=key-features>Key Features</h3> <ul> <li><strong>Translate PDFs</strong>: Convert English PDFs to Chinese while preserving the original layout and formatting.</li> <li><strong>Mathematical Formula Support</strong>: Accurately translate mathematical formulas using <strong>PDFMathTranslate</strong>.</li> <li><strong>Multiple Translation Services</strong>: Choose from <strong>DeepSeek</strong>, <strong>DeepL</strong>, <strong>OpenAI</strong>, or <strong>Google Translate</strong>.</li> <li><strong>Flexible Output Formats</strong>: Generate translated documents in <strong>PDF</strong>, <strong>LaTeX</strong>, or <strong>Markdown</strong> formats.</li> <li><strong>Easy to Use</strong>: Simple command-line interface and <strong>WebUI</strong> for seamless operation.</li> </ul> <h3 id=quick-start_1>Quick Start</h3> <p>To get started with <code>pdf2zh</code>, follow these steps:</p> <ol> <li><strong>Installation</strong>: Install the tool using pip:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>pip<span class=w> </span>install<span class=w> </span>pdf2zh
</span></code></pre></div> <ol> <li><strong>Basic Usage</strong>: Use the command line to translate a PDF:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>pdf2zh<span class=w> </span>translate<span class=w> </span>--file<span class=w> </span>path/to/your/file.pdf
</span></code></pre></div> <ol> <li><strong>WebUI</strong>: Alternatively, use the <strong>WebUI</strong> for a graphical interface:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>pdf2zh<span class=w> </span>webui
</span></code></pre></div> <p>For detailed instructions, check out the <a href=https://pdf2zh-next.com/getting-started/USAGE.html>Usage</a> guide.</p> <h3 id=supported-languages>Supported Languages</h3> <p><code>pdf2zh</code> primarily focuses on translating from <strong>English</strong> to <strong>Chinese</strong>. However, it also supports translations between other languages. For a full list of supported languages, see the <a href=https://pdf2zh-next.com/getting-started/SUPPORTED_LANGUAGES.html>Supported Languages</a> page.</p> <h3 id=advanced-options>Advanced Options</h3> <p>For advanced users, <code>pdf2zh</code> offers several customization options:</p> <ul> <li><strong>Custom Translation Services</strong>: Configure your own translation API keys.</li> <li><strong>Output Formatting</strong>: Adjust the layout and style of the translated document.</li> <li><strong>Batch Processing</strong>: Translate multiple files in one go.</li> </ul> <p>Learn more in the <a href=https://pdf2zh-next.com/getting-started/ADVANCED.html>Advanced</a> section.</p> <h3 id=community-support>Community &amp; Support</h3> <p>Join the community to get help, share feedback, or contribute to the project:</p> <ul> <li><strong>GitHub</strong>: <a href=https://github.com/p2z-ai/pdf2zh>https://github.com/p2z-ai/pdf2zh</a></li> <li><strong>Discord</strong>: <a href=https://discord.gg/example>Join our Discord server</a></li> </ul> <p>For common questions, check the <a href=https://pdf2zh-next.com/getting-started/FAQ.html>FAQ</a>.</p> <h3 id=contributing_1>Contributing</h3> <p>We welcome contributions! If you're interested in improving <code>pdf2zh</code> or adding new features, please read our <a href=https://pdf2zh-next.com/getting-started/CONTRIBUTING.html>Contribution Guidelines</a>.</p> <p>For translators, see the <a href=https://pdf2zh-next.com/getting-started/FOR_TRANSLATORS.html>For Translators</a> guide.</p> <hr> <h3 id=translation-result_1>TRANSLATION RESULT</h3> <h3 id=resumen>Resumen</h3> <p><code>pdf2zh</code> es una herramienta diseñada para traducir documentos PDF del inglés al chino. Soporta traducción a través de varios servicios de traducción, incluyendo <strong>DeepSeek</strong>, <strong>DeepL</strong>, <strong>OpenAI</strong> y <strong>Google Translate</strong>. La herramienta puede manejar tanto texto como fórmulas matemáticas, garantizando traducciones precisas y de alta calidad.</p> <h3 id=caracteristicas-principales>Características principales</h3> <ul> <li><strong>Traducir PDFs</strong>: Convierte PDFs en inglés a chino preservando el diseño y formato original.</li> <li><strong>Soporte de fórmulas matemáticas</strong>: Traduce con precisión fórmulas matemáticas usando <strong>PDFMathTranslate</strong>.</li> <li><strong>Múltiples servicios de traducción</strong>: Elige entre <strong>DeepSeek</strong>, <strong>DeepL</strong>, <strong>OpenAI</strong> o <strong>Google Translate</strong>.</li> <li><strong>Formatos de salida flexibles</strong>: Genera documentos traducidos en formatos <strong>PDF</strong>, <strong>LaTeX</strong> o <strong>Markdown</strong>.</li> <li><strong>Fácil de usar</strong>: Interfaz de línea de comandos simple y <strong>WebUI</strong> para una operación sin problemas.</li> </ul> <h3 id=empezar_1>Empezar</h3> <p>Para comenzar con <code>pdf2zh</code>, sigue estos pasos:</p> <ol> <li><strong>Instalación</strong>: Instala la herramienta usando pip:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>pip<span class=w> </span>install<span class=w> </span>pdf2zh
</span></code></pre></div> <ol> <li><strong>Uso básico</strong>: Usa la línea de comandos para traducir un PDF:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>pdf2zh<span class=w> </span>translate<span class=w> </span>--file<span class=w> </span>ruta/a/tu/archivo.pdf
</span></code></pre></div> <ol> <li><strong>WebUI</strong>: Alternativamente, usa la <strong>WebUI</strong> para una interfaz gráfica:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>pdf2zh<span class=w> </span>webui
</span></code></pre></div> <p>Para instrucciones detalladas, consulta la guía de <a href=https://pdf2zh-next.com/getting-started/USAGE.html>Uso</a>.</p> <h3 id=idiomas-soportados>Idiomas soportados</h3> <p><code>pdf2zh</code> se enfoca principalmente en traducir del <strong>inglés</strong> al <strong>chino</strong>. Sin embargo, también soporta traducciones entre otros idiomas. Para una lista completa de idiomas soportados, consulta la página de <a href=https://pdf2zh-next.com/getting-started/SUPPORTED_LANGUAGES.html>Idiomas soportados</a>.</p> <h3 id=opciones-avanzadas>Opciones avanzadas</h3> <p>Para usuarios avanzados, <code>pdf2zh</code> ofrece varias opciones de personalización:</p> <ul> <li><strong>Servicios de traducción personalizados</strong>: Configura tus propias claves API de traducción.</li> <li><strong>Formateo de salida</strong>: Ajusta el diseño y estilo del documento traducido.</li> <li><strong>Procesamiento por lotes</strong>: Traduce múltiples archivos de una vez.</li> </ul> <p>Aprende más en la sección <a href=https://pdf2zh-next.com/getting-started/ADVANCED.html>Opciones avanzadas</a>.</p> <h3 id=comunidad-y-soporte>Comunidad y soporte</h3> <p>Únete a la comunidad para obtener ayuda, compartir comentarios o contribuir al proyecto:</p> <ul> <li><strong>GitHub</strong>: <a href=https://github.com/p2z-ai/pdf2zh>https://github.com/p2z-ai/pdf2zh</a></li> <li><strong>Discord</strong>: <a href=https://discord.gg/example>Únete a nuestro servidor de Discord</a></li> </ul> <p>Para preguntas comunes, consulta las <a href=https://pdf2zh-next.com/getting-started/FAQ.html>Preguntas frecuentes</a>.</p> <h3 id=contribuciones_1>Contribuciones</h3> <p>¡Agradecemos las contribuciones! Si estás interesado en mejorar <code>pdf2zh</code> o añadir nuevas características, por favor lee nuestras <a href=https://pdf2zh-next.com/getting-started/CONTRIBUTING.html>Guías de contribución</a>.</p> <p>Para traductores, consulta la guía <a href=https://pdf2zh-next.com/getting-started/FOR_TRANSLATORS.html>Guía de contribución de traducciones</a>. - The events are: - <code>{"type": "progress", "data": {"progress": float, "message": str}}</code> - <code>{"type": "error", "data": {"error": str}}</code> - <code>{"type": "finish", "data": {"output_path": str, "pages": int, "translated_pages": int, "cost": float}}</code></p> <hr> <h3 id=translation-result_2>TRANSLATION RESULT</h3> <ul> <li><code>do_translate_async_stream</code> es el punto de entrada asíncrono de bajo nivel que traduce un único PDF y produce un flujo de eventos (progreso/error/finalización).</li> <li>Es adecuado para construir tu propia interfaz de usuario o CLI donde quieras progreso en tiempo real y control total sobre los resultados.</li> <li>Acepta un SettingsModel validado y una ruta de archivo y devuelve un generador asíncrono de eventos dict.</li> <li> <p>Los eventos son:</p> <ul> <li><code>{"type": "progress", "data": {"progress": float, "message": str}}</code></li> <li><code>{"type": "error", "data": {"error": str}}</code></li> <li><code>{"type": "finish", "data": {"output_path": str, "pages": int, "translated_pages": int, "cost": float}}</code></li> </ul> </li> <li> <p><strong>File</strong>: <code>src-tauri/src/commands/translation.rs</code></p> </li> <li><strong>Description</strong>: This function is used to translate the text content of a PDF file.</li> </ul> <div class="language-rust highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=cp>#[tauri::command]</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=k>pub</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=k>fn</span><span class=w> </span><span class=nf>translate_pdf</span><span class=p>(</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span><span class=n>app_handle</span><span class=p>:</span><span class=w> </span><span class=nc>tauri</span><span class=p>::</span><span class=n>AppHandle</span><span class=p>,</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=n>path</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=n>from</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=n>to</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=n>service</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=n>ocr</span><span class=p>:</span><span class=w> </span><span class=kt>bool</span><span class=p>,</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=p>)</span><span class=w> </span><span class=p>-&gt;</span><span class=w> </span><span class=nb>Result</span><span class=o>&lt;</span><span class=nb>String</span><span class=p>,</span><span class=w> </span><span class=nb>String</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>    </span><span class=c1>// Function implementation</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=p>}</span>
</span></code></pre></div> <h3 id=parameters_1>Parameters</h3> <ul> <li><code>app_handle</code>: The application handle, used to access the application's resources and state.</li> <li><code>path</code>: The file path of the PDF file to be translated.</li> <li><code>from</code>: The source language code (e.g., "en", "zh").</li> <li><code>to</code>: The target language code (e.g., "en", "zh").</li> <li><code>service</code>: The translation service to use (e.g., "google", "youdao", "deepl").</li> <li><code>ocr</code>: A boolean value indicating whether to perform OCR on the PDF.</li> </ul> <h3 id=return-value>Return Value</h3> <ul> <li>Returns <code>Ok(String)</code> on success, where the string is a JSON object containing the translation result.</li> <li>Returns <code>Err(String)</code> on failure, where the string is an error message.</li> </ul> <h3 id=example_1>Example</h3> <div class="language-json highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/path/to/translated.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=nt>&quot;pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=nt>&quot;translated_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=nt>&quot;cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=p>}</span>
</span></code></pre></div> <h3 id=error-handling>Error Handling</h3> <ul> <li>If the PDF file does not exist, returns an error.</li> <li>If the translation service is not supported, returns an error.</li> <li>If OCR is required but not available, returns an error.</li> </ul> <hr> <h3 id=translation-result_3>TRANSLATION RESULT</h3> <h3 id=firma>Firma</h3> <ul> <li><strong>Archivo</strong>: <code>src-tauri/src/commands/translation.rs</code></li> <li><strong>Descripción</strong>: Esta función se utiliza para traducir el contenido de texto de un archivo PDF.</li> </ul> <div class="language-rust highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=cp>#[tauri::command]</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=k>pub</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=k>fn</span><span class=w> </span><span class=nf>translate_pdf</span><span class=p>(</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>    </span><span class=n>app_handle</span><span class=p>:</span><span class=w> </span><span class=nc>tauri</span><span class=p>::</span><span class=n>AppHandle</span><span class=p>,</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class=n>path</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=n>from</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>    </span><span class=n>to</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>    </span><span class=n>service</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>    </span><span class=n>ocr</span><span class=p>:</span><span class=w> </span><span class=kt>bool</span><span class=p>,</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=p>)</span><span class=w> </span><span class=p>-&gt;</span><span class=w> </span><span class=nb>Result</span><span class=o>&lt;</span><span class=nb>String</span><span class=p>,</span><span class=w> </span><span class=nb>String</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>    </span><span class=c1>// Implementación de la función</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=p>}</span>
</span></code></pre></div> <h3 id=parametros_1>Parámetros</h3> <ul> <li><code>app_handle</code>: El identificador de la aplicación, utilizado para acceder a los recursos y el estado de la aplicación.</li> <li><code>path</code>: La ruta del archivo PDF a traducir.</li> <li><code>from</code>: El código de idioma de origen (por ejemplo, "en", "zh").</li> <li><code>to</code>: El código de idioma de destino (por ejemplo, "en", "zh").</li> <li><code>service</code>: El servicio de traducción a utilizar (por ejemplo, "google", "youdao", "deepl").</li> <li><code>ocr</code>: Un valor booleano que indica si se debe realizar OCR en el PDF.</li> </ul> <h3 id=valor-de-retorno>Valor de retorno</h3> <ul> <li>Devuelve <code>Ok(String)</code> en caso de éxito, donde la cadena es un objeto JSON que contiene el resultado de la traducción.</li> <li>Devuelve <code>Err(String)</code> en caso de error, donde la cadena es un mensaje de error.</li> </ul> <h3 id=ejemplo_1>Ejemplo</h3> <div class="language-json highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=p>{</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>    </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/ruta/al/archivo/traducido.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=nt>&quot;pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>    </span><span class=nt>&quot;translated_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>    </span><span class=nt>&quot;cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=p>}</span>
</span></code></pre></div> <h3 id=manejo-de-errores>Manejo de errores</h3> <ul> <li>Si el archivo PDF no existe, devuelve un error.</li> <li>Si el servicio de traducción no es compatible, devuelve un error.</li> <li>Si se requiere OCR pero no está disponible, devuelve un error.</li> <li>Returns: AsyncGenerator[TranslationEvent, None]. Yields TranslationEvent objects.</li> <li>Raises:</li> <li>FileNotFoundError: If the file does not exist.</li> <li>ValidationError: If the settings are invalid.</li> <li>Example:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.models</span><span class=w> </span><span class=kn>import</span> <span class=n>SettingsModel</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>    <span class=n>settings</span> <span class=o>=</span> <span class=n>SettingsModel</span><span class=p>(</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>        <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;google&quot;</span><span class=p>,</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>        <span class=n>translation_service_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span><span class=p>,</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>    <span class=p>)</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=s2>&quot;input.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Event: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>type</span><span class=si>}</span><span class=s2>, Data: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <ul> <li>Event Types:</li> <li><code>start</code>: Translation started. Data: <code>{"file": "path/to/file.pdf"}</code></li> <li><code>progress</code>: Translation progress. Data: <code>{"progress": 0.5, "message": "Translating page 10 of 20"}</code></li> <li><code>result</code>: Translation completed. Data: <code>{"result": "path/to/translated.pdf"}</code></li> <li> <p><code>error</code>: Translation failed. Data: <code>{"error": "Error message"}</code></p> </li> <li> <p>Notes:</p> </li> <li>This is a high-level function that handles the entire translation process.</li> <li>Use this for simple integration where you just want to translate a PDF and get progress updates.</li> <li>For more control, use the lower-level components directly.</li> </ul> <hr> <h3 id=translation-result_4>TRANSLATION RESULT</h3> <ul> <li>Importar: <code>from pdf2zh_next.high_level import do_translate_async_stream</code></li> <li>Llamar: <code>async for event in do_translate_async_stream(settings, file): ...</code></li> <li>Parámetros:</li> <li>settings: SettingsModel. Debe ser válido; la función llamará a <code>settings.validate_settings()</code>.</li> <li>file: str | pathlib.Path. El PDF único a traducir. Debe existir.</li> <li>Retorna: AsyncGenerator[TranslationEvent, None]. Produce objetos TranslationEvent.</li> <li>Lanza:</li> <li>FileNotFoundError: Si el archivo no existe.</li> <li>ValidationError: Si la configuración no es válida.</li> <li>Ejemplo:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.models</span><span class=w> </span><span class=kn>import</span> <span class=n>SettingsModel</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>    <span class=n>settings</span> <span class=o>=</span> <span class=n>SettingsModel</span><span class=p>(</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>        <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;google&quot;</span><span class=p>,</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>        <span class=n>translation_service_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span><span class=p>,</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>    <span class=p>)</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=s2>&quot;input.pdf&quot;</span><span class=p>):</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Evento: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>type</span><span class=si>}</span><span class=s2>, Datos: </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <ul> <li>Tipos de eventos:</li> <li><code>start</code>: Traducción iniciada. Datos: <code>{"file": "ruta/al/archivo.pdf"}</code></li> <li><code>progress</code>: Progreso de la traducción. Datos: <code>{"progress": 0.5, "message": "Traduciendo página 10 de 20"}</code></li> <li><code>result</code>: Traducción completada. Datos: <code>{"result": "ruta/al/archivo/traducido.pdf"}</code></li> <li> <p><code>error</code>: Traducción fallida. Datos: <code>{"error": "Mensaje de error"}</code></p> </li> <li> <p>Notas:</p> </li> <li>Esta es una función de alto nivel que maneja todo el proceso de traducción.</li> <li>Úsala para integraciones simples donde solo quieres traducir un PDF y obtener actualizaciones de progreso.</li> <li>Para más control, usa los componentes de bajo nivel directamente.</li> </ul> <p>The following is a list of all supported languages with their corresponding language codes. These codes are used to specify the target language when using the translation service.</p> <h3 id=supported-languages_1>Supported Languages</h3> <table> <thead> <tr> <th>Language</th> <th>Code</th> </tr> </thead> <tbody> <tr> <td>Afrikaans</td> <td>af</td> </tr> <tr> <td>Albanian</td> <td>sq</td> </tr> <tr> <td>Amharic</td> <td>am</td> </tr> <tr> <td>Arabic</td> <td>ar</td> </tr> <tr> <td>Armenian</td> <td>hy</td> </tr> <tr> <td>Azerbaijani</td> <td>az</td> </tr> <tr> <td>Basque</td> <td>eu</td> </tr> <tr> <td>Belarusian</td> <td>be</td> </tr> <tr> <td>Bengali</td> <td>bn</td> </tr> <tr> <td>Bosnian</td> <td>bs</td> </tr> <tr> <td>Bulgarian</td> <td>bg</td> </tr> <tr> <td>Catalan</td> <td>ca</td> </tr> <tr> <td>Cebuano</td> <td>ceb</td> </tr> <tr> <td>Chichewa</td> <td>ny</td> </tr> <tr> <td>Chinese (Simplified)</td> <td>zh</td> </tr> <tr> <td>Chinese (Traditional)</td> <td>zh-TW</td> </tr> <tr> <td>Corsican</td> <td>co</td> </tr> <tr> <td>Croatian</td> <td>hr</td> </tr> <tr> <td>Czech</td> <td>cs</td> </tr> <tr> <td>Danish</td> <td>da</td> </tr> <tr> <td>Dutch</td> <td>nl</td> </tr> <tr> <td>English</td> <td>en</td> </tr> <tr> <td>Esperanto</td> <td>eo</td> </tr> <tr> <td>Estonian</td> <td>et</td> </tr> <tr> <td>Filipino</td> <td>fil</td> </tr> <tr> <td>Finnish</td> <td>fi</td> </tr> <tr> <td>French</td> <td>fr</td> </tr> <tr> <td>Frisian</td> <td>fy</td> </tr> <tr> <td>Galician</td> <td>gl</td> </tr> <tr> <td>Georgian</td> <td>ka</td> </tr> <tr> <td>German</td> <td>de</td> </tr> <tr> <td>Greek</td> <td>el</td> </tr> <tr> <td>Gujarati</td> <td>gu</td> </tr> <tr> <td>Haitian Creole</td> <td>ht</td> </tr> <tr> <td>Hausa</td> <td>ha</td> </tr> <tr> <td>Hawaiian</td> <td>haw</td> </tr> <tr> <td>Hebrew</td> <td>he</td> </tr> <tr> <td>Hindi</td> <td>hi</td> </tr> <tr> <td>Hmong</td> <td>hmn</td> </tr> <tr> <td>Hungarian</td> <td>hu</td> </tr> <tr> <td>Icelandic</td> <td>is</td> </tr> <tr> <td>Igbo</td> <td>ig</td> </tr> <tr> <td>Indonesian</td> <td>id</td> </tr> <tr> <td>Irish</td> <td>ga</td> </tr> <tr> <td>Italian</td> <td>it</td> </tr> <tr> <td>Japanese</td> <td>ja</td> </tr> <tr> <td>Javanese</td> <td>jv</td> </tr> <tr> <td>Kannada</td> <td>kn</td> </tr> <tr> <td>Kazakh</td> <td>kk</td> </tr> <tr> <td>Khmer</td> <td>km</td> </tr> <tr> <td>Korean</td> <td>ko</td> </tr> <tr> <td>Kurdish (Kurmanji)</td> <td>ku</td> </tr> <tr> <td>Kyrgyz</td> <td>ky</td> </tr> <tr> <td>Lao</td> <td>lo</td> </tr> <tr> <td>Latin</td> <td>la</td> </tr> <tr> <td>Latvian</td> <td>lv</td> </tr> <tr> <td>Lithuanian</td> <td>lt</td> </tr> <tr> <td>Luxembourgish</td> <td>lb</td> </tr> <tr> <td>Macedonian</td> <td>mk</td> </tr> <tr> <td>Malagasy</td> <td>mg</td> </tr> <tr> <td>Malay</td> <td>ms</td> </tr> <tr> <td>Malayalam</td> <td>ml</td> </tr> <tr> <td>Maltese</td> <td>mt</td> </tr> <tr> <td>Maori</td> <td>mi</td> </tr> <tr> <td>Marathi</td> <td>mr</td> </tr> <tr> <td>Mongolian</td> <td>mn</td> </tr> <tr> <td>Myanmar (Burmese)</td> <td>my</td> </tr> <tr> <td>Nepali</td> <td>ne</td> </tr> <tr> <td>Norwegian</td> <td>no</td> </tr> <tr> <td>Pashto</td> <td>ps</td> </tr> <tr> <td>Persian</td> <td>fa</td> </tr> <tr> <td>Polish</td> <td>pl</td> </tr> <tr> <td>Portuguese</td> <td>pt</td> </tr> <tr> <td>Punjabi</td> <td>pa</td> </tr> <tr> <td>Romanian</td> <td>ro</td> </tr> <tr> <td>Russian</td> <td>ru</td> </tr> <tr> <td>Samoan</td> <td>sm</td> </tr> <tr> <td>Scots Gaelic</td> <td>gd</td> </tr> <tr> <td>Serbian</td> <td>sr</td> </tr> <tr> <td>Sesotho</td> <td>st</td> </tr> <tr> <td>Shona</td> <td>sn</td> </tr> <tr> <td>Sindhi</td> <td>sd</td> </tr> <tr> <td>Sinhala</td> <td>si</td> </tr> <tr> <td>Slovak</td> <td>sk</td> </tr> <tr> <td>Slovenian</td> <td>sl</td> </tr> <tr> <td>Somali</td> <td>so</td> </tr> <tr> <td>Spanish</td> <td>es</td> </tr> <tr> <td>Sundanese</td> <td>su</td> </tr> <tr> <td>Swahili</td> <td>sw</td> </tr> <tr> <td>Swedish</td> <td>sv</td> </tr> <tr> <td>Tajik</td> <td>tg</td> </tr> <tr> <td>Tamil</td> <td>ta</td> </tr> <tr> <td>Telugu</td> <td>te</td> </tr> <tr> <td>Thai</td> <td>th</td> </tr> <tr> <td>Turkish</td> <td>tr</td> </tr> <tr> <td>Ukrainian</td> <td>uk</td> </tr> <tr> <td>Urdu</td> <td>ur</td> </tr> <tr> <td>Uzbek</td> <td>uz</td> </tr> <tr> <td>Vietnamese</td> <td>vi</td> </tr> <tr> <td>Welsh</td> <td>cy</td> </tr> <tr> <td>Xhosa</td> <td>xh</td> </tr> <tr> <td>Yiddish</td> <td>yi</td> </tr> <tr> <td>Yoruba</td> <td>yo</td> </tr> <tr> <td>Zulu</td> <td>zu</td> </tr> </tbody> </table> <h3 id=notes_1>Notes</h3> <ul> <li>The language code is based on the ISO 639-1 standard where possible.</li> <li>For languages with multiple variants (like Chinese), specific codes are provided for each variant.</li> <li>Some languages may not be supported by all translation services. Please check the documentation of your chosen translation service for specific support details.</li> </ul> <hr> <h3 id=translation-result_5>TRANSLATION RESULT</h3> <p>Nota: La siguiente es una lista de todos los idiomas soportados con sus correspondientes códigos de idioma. Estos códigos se utilizan para especificar el idioma de destino al usar el servicio de traducción.</p> <h3 id=idiomas-soportados_1>Idiomas soportados</h3> <table> <thead> <tr> <th>Idioma</th> <th>Código</th> </tr> </thead> <tbody> <tr> <td>Afrikaans</td> <td>af</td> </tr> <tr> <td>Albanés</td> <td>sq</td> </tr> <tr> <td>Amárico</td> <td>am</td> </tr> <tr> <td>Árabe</td> <td>ar</td> </tr> <tr> <td>Armenio</td> <td>hy</td> </tr> <tr> <td>Azerbaiyano</td> <td>az</td> </tr> <tr> <td>Vasco</td> <td>eu</td> </tr> <tr> <td>Bielorruso</td> <td>be</td> </tr> <tr> <td>Bengalí</td> <td>bn</td> </tr> <tr> <td>Bosnio</td> <td>bs</td> </tr> <tr> <td>Búlgaro</td> <td>bg</td> </tr> <tr> <td>Catalán</td> <td>ca</td> </tr> <tr> <td>Cebuano</td> <td>ceb</td> </tr> <tr> <td>Chichewa</td> <td>ny</td> </tr> <tr> <td>Chino (Simplificado)</td> <td>zh</td> </tr> <tr> <td>Chino (Tradicional)</td> <td>zh-TW</td> </tr> <tr> <td>Corso</td> <td>co</td> </tr> <tr> <td>Croata</td> <td>hr</td> </tr> <tr> <td>Checo</td> <td>cs</td> </tr> <tr> <td>Danés</td> <td>da</td> </tr> <tr> <td>Neerlandés</td> <td>nl</td> </tr> <tr> <td>Inglés</td> <td>en</td> </tr> <tr> <td>Esperanto</td> <td>eo</td> </tr> <tr> <td>Estonio</td> <td>et</td> </tr> <tr> <td>Filipino</td> <td>fil</td> </tr> <tr> <td>Finés</td> <td>fi</td> </tr> <tr> <td>Francés</td> <td>fr</td> </tr> <tr> <td>Frisón</td> <td>fy</td> </tr> <tr> <td>Gallego</td> <td>gl</td> </tr> <tr> <td>Georgiano</td> <td>ka</td> </tr> <tr> <td>Alemán</td> <td>de</td> </tr> <tr> <td>Griego</td> <td>el</td> </tr> <tr> <td>Gujarati</td> <td>gu</td> </tr> <tr> <td>Criollo haitiano</td> <td>ht</td> </tr> <tr> <td>Hausa</td> <td>ha</td> </tr> <tr> <td>Hawaiano</td> <td>haw</td> </tr> <tr> <td>Hebreo</td> <td>he</td> </tr> <tr> <td>Hindi</td> <td>hi</td> </tr> <tr> <td>Hmong</td> <td>hmn</td> </tr> <tr> <td>Húngaro</td> <td>hu</td> </tr> <tr> <td>Islandés</td> <td>is</td> </tr> <tr> <td>Igbo</td> <td>ig</td> </tr> <tr> <td>Indonesio</td> <td>id</td> </tr> <tr> <td>Irlandés</td> <td>ga</td> </tr> <tr> <td>Italiano</td> <td>it</td> </tr> <tr> <td>Japonés</td> <td>ja</td> </tr> <tr> <td>Javanés</td> <td>jv</td> </tr> <tr> <td>Canarés</td> <td>kn</td> </tr> <tr> <td>Kazajo</td> <td>kk</td> </tr> <tr> <td>Jemer</td> <td>km</td> </tr> <tr> <td>Coreano</td> <td>ko</td> </tr> <tr> <td>Kurdo (Kurmanji)</td> <td>ku</td> </tr> <tr> <td>Kirguís</td> <td>ky</td> </tr> <tr> <td>Lao</td> <td>lo</td> </tr> <tr> <td>Latín</td> <td>la</td> </tr> <tr> <td>Letón</td> <td>lv</td> </tr> <tr> <td>Lituano</td> <td>lt</td> </tr> <tr> <td>Luxemburgués</td> <td>lb</td> </tr> <tr> <td>Macedonio</td> <td>mk</td> </tr> <tr> <td>Malgache</td> <td>mg</td> </tr> <tr> <td>Malayo</td> <td>ms</td> </tr> <tr> <td>Malayalam</td> <td>ml</td> </tr> <tr> <td>Maltés</td> <td>mt</td> </tr> <tr> <td>Maorí</td> <td>mi</td> </tr> <tr> <td>Marathi</td> <td>mr</td> </tr> <tr> <td>Mongol</td> <td>mn</td> </tr> <tr> <td>Birmano</td> <td>my</td> </tr> <tr> <td>Nepalí</td> <td>ne</td> </tr> <tr> <td>Noruego</td> <td>no</td> </tr> <tr> <td>Pastún</td> <td>ps</td> </tr> <tr> <td>Persa</td> <td>fa</td> </tr> <tr> <td>Polaco</td> <td>pl</td> </tr> <tr> <td>Portugués</td> <td>pt</td> </tr> <tr> <td>Punjabi</td> <td>pa</td> </tr> <tr> <td>Rumano</td> <td>ro</td> </tr> <tr> <td>Ruso</td> <td>ru</td> </tr> <tr> <td>Samoano</td> <td>sm</td> </tr> <tr> <td>Gaélico escocés</td> <td>gd</td> </tr> <tr> <td>Serbio</td> <td>sr</td> </tr> <tr> <td>Sesotho</td> <td>st</td> </tr> <tr> <td>Shona</td> <td>sn</td> </tr> <tr> <td>Sindhi</td> <td>sd</td> </tr> <tr> <td>Cingalés</td> <td>si</td> </tr> <tr> <td>Eslovaco</td> <td>sk</td> </tr> <tr> <td>Esloveno</td> <td>sl</td> </tr> <tr> <td>Somalí</td> <td>so</td> </tr> <tr> <td>Español</td> <td>es</td> </tr> <tr> <td>Sondanés</td> <td>su</td> </tr> <tr> <td>Suajili</td> <td>sw</td> </tr> <tr> <td>Sueco</td> <td>sv</td> </tr> <tr> <td>Tayiko</td> <td>tg</td> </tr> <tr> <td>Tamil</td> <td>ta</td> </tr> <tr> <td>Telugu</td> <td>te</td> </tr> <tr> <td>Tailandés</td> <td>th</td> </tr> <tr> <td>Turco</td> <td>tr</td> </tr> <tr> <td>Ucraniano</td> <td>uk</td> </tr> <tr> <td>Urdu</td> <td>ur</td> </tr> <tr> <td>Uzbeko</td> <td>uz</td> </tr> <tr> <td>Vietnamita</td> <td>vi</td> </tr> <tr> <td>Galés</td> <td>cy</td> </tr> <tr> <td>Xhosa</td> <td>xh</td> </tr> <tr> <td>Yidis</td> <td>yi</td> </tr> <tr> <td>Yoruba</td> <td>yo</td> </tr> <tr> <td>Zulú</td> <td>zu</td> </tr> </tbody> </table> <h3 id=notas_1>Notas</h3> <ul> <li>El código de idioma se basa en el estándar ISO 639-1 cuando es posible.</li> <li>Para idiomas con múltiples variantes (como el chino), se proporcionan códigos específicos para cada variante.</li> <li>Algunos idiomas pueden no ser soportados por todos los servicios de traducción. Por favor, consulta la documentación de tu servicio de traducción elegido para detalles específicos de soporte.</li> <li><code>translator.translate_async</code> is the underlying function that does the translation; this function wraps it to provide events.</li> </ul> <hr> <h3 id=translation-result_6>TRANSLATION RESULT</h3> <ul> <li>settings.basic.input_files es ignorado por esta función; solo se traduce el <code>file</code> dado.</li> <li>Si <code>settings.basic.debug</code> es True, la traducción se ejecuta en el proceso principal; de lo contrario, se ejecuta en un subproceso. El esquema de eventos es idéntico para ambos.</li> <li><code>translator.translate_async</code> es la función subyacente que realiza la traducción; esta función la envuelve para proporcionar eventos.</li> </ul> <p>This document describes the event stream contract for the <code>pdf2zh</code> application. The event stream is a server-sent events (SSE) stream that provides real-time updates on the translation process.</p> <h4 id=event-types>Event Types</h4> <p>The following event types are defined:</p> <ul> <li><code>progress</code>: Indicates the progress of the translation process.</li> <li><code>result</code>: Indicates that the translation is complete and provides the result.</li> <li><code>error</code>: Indicates that an error has occurred.</li> </ul> <h4 id=event-data>Event Data</h4> <p>Each event has a <code>data</code> field that contains a JSON object. The structure of the JSON object depends on the event type.</p> <h5 id=progress-event>Progress Event</h5> <p>The <code>progress</code> event has the following structure:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=p>{</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translating page 10 of 20&quot;</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>progress</code>: A number between 0 and 1 indicating the progress of the translation.</li> <li><code>message</code>: A human-readable message describing the current progress.</li> </ul> <h5 id=result-event>Result Event</h5> <p>The <code>result</code> event has the following structure:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=p>{</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;result&quot;</span><span class=p>,</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>    </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;The translated text&quot;</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>result</code>: The translated text.</li> </ul> <h5 id=error-event>Error Event</h5> <p>The <code>error</code> event has the following structure:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=p>{</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;An error occurred&quot;</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>error</code>: A human-readable error message.</li> </ul> <h4 id=example_2>Example</h4> <p>Here is an example of an event stream:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>event: progress
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>data: {&quot;type&quot;:&quot;progress&quot;,&quot;data&quot;:{&quot;progress&quot;:0.5,&quot;message&quot;:&quot;Translating page 10 of 20&quot;}}
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>event: result
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>data: {&quot;type&quot;:&quot;result&quot;,&quot;data&quot;:{&quot;result&quot;:&quot;The translated text&quot;}}
</span></code></pre></div> <h4 id=client-implementation>Client Implementation</h4> <p>Clients should listen for the <code>message</code> event and parse the <code>data</code> field as JSON. The <code>type</code> field of the JSON object indicates the event type.</p> <p>Here is an example client implementation in JavaScript:</p> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=kd>const</span><span class=w> </span><span class=nx>eventSource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>EventSource</span><span class=p>(</span><span class=s1>&#39;/translate&#39;</span><span class=p>);</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=nx>eventSource</span><span class=p>.</span><span class=nx>onmessage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>  </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;progress&#39;</span><span class=o>:</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Progress: </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>progress</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>100</span><span class=si>}</span><span class=sb>% - </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;result&#39;</span><span class=o>:</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Result: </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>result</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;error&#39;</span><span class=o>:</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Error: </span><span class=si>${</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>error</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a><span class=p>};</span>
</span></code></pre></div> <hr> <p>Now, please translate the <code>ORIGINAL TEXT</code> into <strong>es</strong>. - <code>start</code>: Emitted when the translation starts. The data contains the total number of pages. - <code>page_success</code>: Emitted when a page is successfully translated. The data contains the page number and the translated text. - <code>page_skip</code>: Emitted when a page is skipped. The data contains the page number and the reason for skipping. - <code>page_error</code>: Emitted when an error occurs while translating a page. The data contains the page number and the error message. - <code>complete</code>: Emitted when the translation is complete. The data contains the path to the translated file. - <code>error</code>: Emitted when a fatal error occurs. The data contains the error message.</p> <p>Example of <code>start</code> event: <div class="language-json highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;start&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;total_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Example of <code>page_success</code> event: <div class="language-json highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page_success&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;translated_text&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;This is the translated text.&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Example of <code>page_skip</code> event: <div class="language-json highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page_skip&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;reason&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Empty page&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Example of <code>page_error</code> event: <div class="language-json highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page_error&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translation service error&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Example of <code>complete</code> event: <div class="language-json highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;complete&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;output_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/path/to/output.pdf&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Example of <code>error</code> event: <div class="language-json highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Failed to open PDF file&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <h3 id=translation-result_7>TRANSLATION RESULT</h3> <p>El generador asíncrono produce eventos de tipo diccionario JSON con los siguientes tipos: - <code>start</code>: Emitido cuando la traducción comienza. Los datos contienen el número total de páginas. - <code>page_success</code>: Emitido cuando una página se traduce exitosamente. Los datos contienen el número de página y el texto traducido. - <code>page_skip</code>: Emitido cuando se omite una página. Los datos contienen el número de página y la razón de la omisión. - <code>page_error</code>: Emitido cuando ocurre un error al traducir una página. Los datos contienen el número de página y el mensaje de error. - <code>complete</code>: Emitido cuando la traducción se completa. Los datos contienen la ruta al archivo traducido. - <code>error</code>: Emitido cuando ocurre un error fatal. Los datos contienen el mensaje de error.</p> <p>Ejemplo de evento <code>start</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;start&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;total_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Ejemplo de evento <code>page_success</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page_success&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;translated_text&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Este es el texto traducido.&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Ejemplo de evento <code>page_skip</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page_skip&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;reason&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Página vacía&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Ejemplo de evento <code>page_error</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;page_error&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Error del servicio de traducción&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Ejemplo de evento <code>complete</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;complete&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;output_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/ruta/al/archivo/output.pdf&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <p>Ejemplo de evento <code>error</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=p>{</span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Error al abrir el archivo PDF&quot;</span><span class=p>}}</span>
</span></code></pre></div></p> <ul> <li> <p><code>part_index</code>: part index where the error occurred (if applicable)</p> <ul> <li><code>total_parts</code>: total number of parts (if applicable)</li> </ul> </li> <li> <p>Note: All events are <strong>optional</strong>. The client should handle missing events gracefully.</p> </li> <li> <h3 id=stage-summary-event-stage_summary-opcional-puede-aparecer-primero>Stage summary event: <code>stage_summary</code> (opcional, puede aparecer primero)</h3> </li> <li> <p>Campos</p> <ul> <li><code>type</code>: "stage_summary"</li> <li><code>stages</code>: lista de objetos <code>{ "name": str, "percent": float }</code> que describe la distribución estimada del trabajo</li> <li><code>part_index</code>: puede ser 0 para este evento de resumen</li> <li><code>total_parts</code>: número total de partes (&gt;= 1)</li> </ul> </li> <li> <p>Eventos de progreso: <code>progress_start</code>, <code>progress_update</code>, <code>progress_end</code></p> </li> <li> <p>Campos comunes</p> <ul> <li><code>type</code>: uno de los anteriores</li> <li><code>stage</code>: nombre de la etapa legible por humanos (por ejemplo, "Analizar PDF y crear representación intermedia", "Traducir párrafos", "Guardar PDF")</li> <li><code>stage_progress</code>: flotante en [0, 100] que indica el progreso dentro de la etapa actual</li> <li><code>overall_progress</code>: flotante en [0, 100] que indica el progreso general</li> <li><code>part_index</code>: índice de parte actual (típicamente basado en 1 para eventos de progreso)</li> <li><code>total_parts</code>: número total de partes (&gt;= 1). Los documentos grandes pueden dividirse automáticamente.</li> <li><code>stage_current</code>: paso actual dentro de la etapa</li> <li><code>stage_total</code>: pasos totales dentro de la etapa</li> </ul> </li> <li> <p>Evento de finalización: <code>finish</code></p> </li> <li> <p>Campos</p> <ul> <li><code>type</code>: "finish"</li> <li><code>translate_result</code>: un <strong>objeto</strong> que proporciona salidas finales (NOTA: no un diccionario, sino una instancia de clase)</li> <li><code>original_pdf_path</code>: Ruta al PDF de entrada</li> <li><code>mono_pdf_path</code>: Ruta al PDF traducido monolingüe (o None)</li> <li><code>dual_pdf_path</code>: Ruta al PDF traducido bilingüe (o None)</li> <li><code>no_watermark_mono_pdf_path</code>: Ruta a la salida monolingüe sin marca de agua (si se produjo), de lo contrario None</li> <li><code>no_watermark_dual_pdf_path</code>: Ruta a la salida bilingüe sin marca de agua (si se produjo), de lo contrario None</li> <li><code>auto_extracted_glossary_path</code>: Ruta al glosario CSV extraído automáticamente (o None)</li> <li><code>total_seconds</code>: segundos transcurridos (flotante)</li> <li><code>peak_memory_usage</code>: uso máximo aproximado de memoria durante la traducción (flotante; unidades dependientes de la implementación)</li> </ul> </li> <li> <p>Evento de error: <code>error</code></p> </li> <li> <p>Campos</p> <ul> <li><code>type</code>: "error"</li> <li><code>error</code>: mensaje de error legible por humanos</li> <li><code>error_type</code>: uno de <code>BabeldocError</code>, <code>SubprocessError</code>, <code>IPCError</code>, <code>SubprocessCrashError</code>, etc.</li> <li><code>details</code>: detalles opcionales (por ejemplo, error original o traza de ejecución)</li> <li><code>part_index</code>: índice de parte donde ocurrió el error (si es aplicable)</li> <li><code>total_parts</code>: número total de partes (si es aplicable)</li> </ul> </li> <li> <p>Nota: Todos los eventos son <strong>opcionales</strong>. El cliente debe manejar eventos faltantes con gracia.</p> </li> </ul> <hr> <h3 id=translation-result_8>TRANSLATION RESULT</h3> <ul> <li>Evento de resumen de etapa: <code>stage_summary</code> (opcional, puede aparecer primero)</li> <li> <p>Campos</p> <ul> <li><code>type</code>: "stage_summary"</li> <li><code>stages</code>: lista de objetos <code>{ "name": str, "percent": float }</code> que describe la distribución estimada del trabajo</li> <li><code>part_index</code>: puede ser 0 para este evento de resumen</li> <li><code>total_parts</code>: número total de partes (&gt;= 1)</li> </ul> </li> <li> <p>Eventos de progreso: <code>progress_start</code>, <code>progress_update</code>, <code>progress_end</code></p> </li> <li> <p>Campos comunes</p> <ul> <li><code>type</code>: uno de los anteriores</li> <li><code>stage</code>: nombre de la etapa legible por humanos (por ejemplo, "Analizar PDF y crear representación intermedia", "Traducir párrafos", "Guardar PDF")</li> <li><code>stage_progress</code>: flotante en [0, 100] que indica el progreso dentro de la etapa actual</li> <li><code>overall_progress</code>: flotante en [0, 100] que indica el progreso general</li> <li><code>part_index</code>: índice de parte actual (típicamente basado en 1 para eventos de progreso)</li> <li><code>total_parts</code>: número total de partes (&gt;= 1). Los documentos grandes pueden dividirse automáticamente.</li> <li><code>stage_current</code>: paso actual dentro de la etapa</li> <li><code>stage_total</code>: pasos totales dentro de la etapa</li> </ul> </li> <li> <p>Evento de finalización: <code>finish</code></p> </li> <li> <p>Campos</p> <ul> <li><code>type</code>: "finish"</li> <li><code>translate_result</code>: un <strong>objeto</strong> que proporciona salidas finales (NOTA: no un diccionario, sino una instancia de clase)</li> <li><code>original_pdf_path</code>: Ruta al PDF de entrada</li> <li><code>mono_pdf_path</code>: Ruta al PDF traducido monolingüe (o None)</li> <li><code>dual_pdf_path</code>: Ruta al PDF traducido bilingüe (o None)</li> <li><code>no_watermark_mono_pdf_path</code>: Ruta a la salida monolingüe sin marca de agua (si se produjo), de lo contrario None</li> <li><code>no_watermark_dual_pdf_path</code>: Ruta a la salida bilingüe sin marca de agua (si se produjo), de lo contrario None</li> <li><code>auto_extracted_glossary_path</code>: Ruta al glosario CSV extraído automáticamente (o None)</li> <li><code>total_seconds</code>: segundos transcurridos (flotante)</li> <li><code>peak_memory_usage</code>: uso máximo aproximado de memoria durante la traducción (flotante; unidades dependientes de la implementación)</li> </ul> </li> <li> <p>Evento de error: <code>error</code></p> </li> <li> <p>Campos</p> <ul> <li><code>type</code>: "error"</li> <li><code>error</code>: mensaje de error legible por humanos</li> <li><code>error_type</code>: uno de <code>BabeldocError</code>, <code>SubprocessError</code>, <code>IPCError</code>, <code>SubprocessCrashError</code>, etc.</li> <li><code>details</code>: detalles opcionales (por ejemplo, error original o traza de ejecución)</li> <li><code>part_index</code>: índice de parte donde ocurrió el error (si es aplicable)</li> <li><code>total_parts</code>: número total de partes (si es aplicable)</li> </ul> </li> <li> <p>Nota: Todos los eventos son <strong>opcionales</strong>. El cliente debe manejar eventos faltantes con gracia.</p> </li> </ul> <p>This function will check the <code>output_path</code> first. If the file already exists, it will skip the translation and return the existing file path immediately.</p> <h3 id=parameters_2>Parameters</h3> <ul> <li><code>file_path</code> (str): Path to the PDF file to be translated.</li> <li><code>target_language</code> (str): The target language to translate to, using the <a href=#supported-languages>Language Code</a>.</li> <li><code>output_path</code> (str): The path to save the translated PDF file.</li> <li><code>api_key</code> (str): Your OpenAI API key.</li> <li><code>model</code> (str, optional): The model to use for translation. Default is <code>gpt-4o</code>.</li> <li><code>pages</code> (str, optional): Specify pages to translate. For example, <code>1,3,5-9</code>. If not provided, all pages will be translated.</li> <li><code>proxy</code> (str, optional): Proxy to use for the request. For example, <code>http://127.0.0.1:7890</code>.</li> <li><code>api_base</code> (str, optional): The base URL for the API. Default is <code>https://api.openai.com/v1</code>.</li> </ul> <h3 id=returns_1>Returns</h3> <ul> <li><code>str</code>: The path to the translated PDF file.</li> </ul> <h3 id=example_3>Example</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=n>result</span> <span class=o>=</span> <span class=n>do_translate</span><span class=p>(</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>    <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>    <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>    <span class=n>output_path</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>    <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=p>)</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Translated file saved at: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=notes_2>Notes</h3> <ul> <li>This function is synchronous and will block until the translation is complete.</li> <li>If you need real-time progress updates, consider using the async version <code>do_translate_async_stream</code>.</li> </ul> <hr> <h3 id=translation-result_9>TRANSLATION RESULT</h3> <p>Comportamiento importante: Esta función verificará primero la <code>output_path</code>. Si el archivo ya existe, omitirá la traducción y devolverá inmediatamente la ruta del archivo existente.</p> <h3 id=parametros_2>Parámetros</h3> <ul> <li><code>file_path</code> (str): Ruta al archivo PDF a traducir.</li> <li><code>target_language</code> (str): El idioma objetivo al que traducir, usando el <a href=#idiomas-soportados>Código de idioma</a>.</li> <li><code>output_path</code> (str): La ruta para guardar el archivo PDF traducido.</li> <li><code>api_key</code> (str): Tu clave de API de OpenAI.</li> <li><code>model</code> (str, opcional): El modelo a usar para la traducción. Por defecto es <code>gpt-4o</code>.</li> <li><code>pages</code> (str, opcional): Especifica las páginas a traducir. Por ejemplo, <code>1,3,5-9</code>. Si no se proporciona, se traducirán todas las páginas.</li> <li><code>proxy</code> (str, opcional): Proxy a usar para la solicitud. Por ejemplo, <code>http://127.0.0.1:7890</code>.</li> <li><code>api_base</code> (str, opcional): La URL base para la API. Por defecto es <code>https://api.openai.com/v1</code>.</li> </ul> <h3 id=retorna_1>Retorna</h3> <ul> <li><code>str</code>: La ruta al archivo PDF traducido.</li> </ul> <h3 id=ejemplo_2>Ejemplo</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=n>result</span> <span class=o>=</span> <span class=n>do_translate</span><span class=p>(</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>    <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>    <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>    <span class=n>output_path</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>    <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=p>)</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Archivo traducido guardado en: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=notas_2>Notas</h3> <ul> <li>Esta función es síncrona y se bloqueará hasta que la traducción se complete.</li> <li>Si necesitas actualizaciones de progreso en tiempo real, considera usar la versión asíncrona <code>do_translate_async_stream</code>.</li> <li>The <code>finish</code> event is guaranteed to be the last event in the stream.</li> </ul> <hr> <h3 id=translation-result_10>TRANSLATION RESULT</h3> <ul> <li>Un <code>stage_summary</code> opcional puede emitirse antes de que comience el progreso.</li> <li>En ciertos fallos, el generador primero producirá un evento <code>error</code> y luego lanzará una excepción derivada de <code>TranslationError</code>. Debes verificar tanto los eventos de error como estar preparado para capturar excepciones.</li> <li>Los eventos <code>progress_update</code> pueden repetirse con valores idénticos; los consumidores deben eliminar rebotes si es necesario.</li> <li>Deja de consumir el flujo cuando recibas un evento <code>finish</code>.</li> <li>Se garantiza que el evento <code>finish</code> será el último evento en el flujo.</li> </ul> <p>{#minimal-usage-example-async}</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>()</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>    <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=minimal-usage-example-sync-minimal-usage-example-sync>Minimal Usage Example (Sync) {#minimal-usage-example-sync}</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>()</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=n>translator</span><span class=o>.</span><span class=n>translate_sync</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=advanced-usage-example-async-advanced-usage-example-async>Advanced Usage Example (Async) {#advanced-usage-example-async}</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span><span class=p>,</span> <span class=n>Config</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>Config</span><span class=p>(</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>        <span class=n>source_language</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>  <span class=c1># source language code</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>  <span class=c1># target language code</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a>        <span class=n>ocr_service</span><span class=o>=</span><span class=s2>&quot;default&quot;</span><span class=p>,</span>  <span class=c1># ocr service</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>        <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;google&quot;</span><span class=p>,</span>  <span class=c1># translation service</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>        <span class=n>translation_service_key</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>  <span class=c1># translation service key</span>
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a>        <span class=n>enable_glossary</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># enable glossary</span>
</span><span id=__span-41-12><a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>        <span class=n>enable_parallel</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># enable parallel translation</span>
</span><span id=__span-41-13><a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a>        <span class=n>max_concurrency</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>  <span class=c1># max concurrency for parallel translation</span>
</span><span id=__span-41-14><a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a>    <span class=p>)</span>
</span><span id=__span-41-15><a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>(</span><span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span><span id=__span-41-16><a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a>    <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span><span id=__span-41-17><a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a>
</span><span id=__span-41-18><a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=advanced-usage-example-sync-advanced-usage-example-sync>Advanced Usage Example (Sync) {#advanced-usage-example-sync}</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span><span class=p>,</span> <span class=n>Config</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=n>config</span> <span class=o>=</span> <span class=n>Config</span><span class=p>(</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a>    <span class=n>source_language</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>  <span class=c1># source language code</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>    <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>  <span class=c1># target language code</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a>    <span class=n>ocr_service</span><span class=o>=</span><span class=s2>&quot;default&quot;</span><span class=p>,</span>  <span class=c1># ocr service</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a>    <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;google&quot;</span><span class=p>,</span>  <span class=c1># translation service</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>    <span class=n>translation_service_key</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>  <span class=c1># translation service key</span>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>    <span class=n>enable_glossary</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># enable glossary</span>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>    <span class=n>enable_parallel</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># enable parallel translation</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a>    <span class=n>max_concurrency</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>  <span class=c1># max concurrency for parallel translation</span>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=p>)</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>(</span><span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=n>translator</span><span class=o>.</span><span class=n>translate_sync</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=ejemplo-de-uso-minimo-async-ejemplo-de-uso-minimo-async>Ejemplo de uso mínimo (Async) {#ejemplo-de-uso-mínimo-async}</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>()</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a>    <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=ejemplo-de-uso-minimo-sync-ejemplo-de-uso-minimo-sync>Ejemplo de uso mínimo (Sync) {#ejemplo-de-uso-mínimo-sync}</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>()</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=n>translator</span><span class=o>.</span><span class=n>translate_sync</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=ejemplo-de-uso-avanzado-async-ejemplo-de-uso-avanzado-async>Ejemplo de uso avanzado (Async) {#ejemplo-de-uso-avanzado-async}</h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span><span class=p>,</span> <span class=n>Config</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>Config</span><span class=p>(</span>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a>        <span class=n>source_language</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>  <span class=c1># código de idioma de origen</span>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>  <span class=c1># código de idioma de destino</span>
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a>        <span class=n>ocr_service</span><span class=o>=</span><span class=s2>&quot;default&quot;</span><span class=p>,</span>  <span class=c1># servicio de OCR</span>
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a>        <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;google&quot;</span><span class=p>,</span>  <span class=c1># servicio de traducción</span>
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>        <span class=n>translation_service_key</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>  <span class=c1># clave del servicio de traducción</span>
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a>        <span class=n>enable_glossary</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># habilitar glosario</span>
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>        <span class=n>enable_parallel</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># habilitar traducción paralela</span>
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>        <span class=n>max_concurrency</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>  <span class=c1># máxima concurrencia para traducción paralela</span>
</span><span id=__span-45-14><a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a>    <span class=p>)</span>
</span><span id=__span-45-15><a id=__codelineno-45-15 name=__codelineno-45-15 href=#__codelineno-45-15></a>    <span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>(</span><span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span><span id=__span-45-16><a id=__codelineno-45-16 name=__codelineno-45-16 href=#__codelineno-45-16></a>    <span class=k>await</span> <span class=n>translator</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span><span id=__span-45-17><a id=__codelineno-45-17 name=__codelineno-45-17 href=#__codelineno-45-17></a>
</span><span id=__span-45-18><a id=__codelineno-45-18 name=__codelineno-45-18 href=#__codelineno-45-18></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=ejemplo-de-uso-avanzado-sync-ejemplo-de-uso-avanzado-sync>Ejemplo de uso avanzado (Sync) {#ejemplo-de-uso-avanzado-sync}</h3> <p><div class="language-python highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>pdf2zh</span><span class=p>,</span> <span class=n>Config</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=n>config</span> <span class=o>=</span> <span class=n>Config</span><span class=p>(</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a>    <span class=n>source_language</span><span class=o>=</span><span class=s2>&quot;en&quot;</span><span class=p>,</span>  <span class=c1># código de idioma de origen</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>    <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>  <span class=c1># código de idioma de destino</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a>    <span class=n>ocr_service</span><span class=o>=</span><span class=s2>&quot;default&quot;</span><span class=p>,</span>  <span class=c1># servicio de OCR</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a>    <span class=n>translation_service</span><span class=o>=</span><span class=s2>&quot;google&quot;</span><span class=p>,</span>  <span class=c1># servicio de traducción</span>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a>    <span class=n>translation_service_key</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>  <span class=c1># clave del servicio de traducción</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a>    <span class=n>enable_glossary</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># habilitar glosario</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a>    <span class=n>enable_parallel</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># habilitar traducción paralela</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a>    <span class=n>max_concurrency</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>  <span class=c1># máxima concurrencia para traducción paralela</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=p>)</span>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a><span class=n>translator</span> <span class=o>=</span> <span class=n>pdf2zh</span><span class=o>.</span><span class=n>PDFTranslator</span><span class=p>(</span><span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span><span id=__span-46-14><a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a><span class=n>translator</span><span class=o>.</span><span class=n>translate_sync</span><span class=p>(</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span> <span class=s2>&quot;output.pdf&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="language-python highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=c1># Assume you already have a valid SettingsModel instance named `settings`</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=c1># and a PDF file path</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>translate_one</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Path</span><span class=p>):</span>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf_path</span><span class=p>):</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a>            <span class=n>etype</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a>            <span class=k>if</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;stage_summary&quot;</span><span class=p>:</span>
</span><span id=__span-47-14><a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a>                <span class=c1># Optional pre-flight summary of stages</span>
</span><span id=__span-47-15><a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a>                <span class=n>stages</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stages&quot;</span><span class=p>,</span> <span class=p>[])</span>
</span><span id=__span-47-16><a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Stage summary:&quot;</span><span class=p>,</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>s</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>s</span><span class=p>[</span><span class=s1>&#39;percent&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>stages</span><span class=p>))</span>
</span><span id=__span-47-17><a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a>
</span><span id=__span-47-18><a id=__codelineno-47-18 name=__codelineno-47-18 href=#__codelineno-47-18></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;progress_start&quot;</span><span class=p>,</span> <span class=s2>&quot;progress_update&quot;</span><span class=p>,</span> <span class=s2>&quot;progress_end&quot;</span><span class=p>}:</span>
</span><span id=__span-47-19><a id=__codelineno-47-19 name=__codelineno-47-19 href=#__codelineno-47-19></a>                <span class=n>stage</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stage&quot;</span><span class=p>)</span>
</span><span id=__span-47-20><a id=__codelineno-47-20 name=__codelineno-47-20 href=#__codelineno-47-20></a>                <span class=n>stage_prog</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stage_progress&quot;</span><span class=p>)</span>  <span class=c1># 0..100</span>
</span><span id=__span-47-21><a id=__codelineno-47-21 name=__codelineno-47-21 href=#__codelineno-47-21></a>                <span class=n>overall</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;overall_progress&quot;</span><span class=p>)</span>  <span class=c1># 0..100</span>
</span><span id=__span-47-22><a id=__codelineno-47-22 name=__codelineno-47-22 href=#__codelineno-47-22></a>                <span class=n>part_i</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;part_index&quot;</span><span class=p>)</span>
</span><span id=__span-47-23><a id=__codelineno-47-23 name=__codelineno-47-23 href=#__codelineno-47-23></a>                <span class=n>part_n</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;total_parts&quot;</span><span class=p>)</span>
</span><span id=__span-47-24><a id=__codelineno-47-24 name=__codelineno-47-24 href=#__codelineno-47-24></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[</span><span class=si>{</span><span class=n>etype</span><span class=si>}</span><span class=s2>] </span><span class=si>{</span><span class=n>stage</span><span class=si>}</span><span class=s2> | stage </span><span class=si>{</span><span class=n>stage_prog</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% | overall </span><span class=si>{</span><span class=n>overall</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% (part </span><span class=si>{</span><span class=n>part_i</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>part_n</span><span class=si>}</span><span class=s2>)&quot;</span><span class=p>)</span>
</span><span id=__span-47-25><a id=__codelineno-47-25 name=__codelineno-47-25 href=#__codelineno-47-25></a>
</span><span id=__span-47-26><a id=__codelineno-47-26 name=__codelineno-47-26 href=#__codelineno-47-26></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
</span><span id=__span-47-27><a id=__codelineno-47-27 name=__codelineno-47-27 href=#__codelineno-47-27></a>                <span class=c1># You will also get a raised exception after this yield</span>
</span><span id=__span-47-28><a id=__codelineno-47-28 name=__codelineno-47-28 href=#__codelineno-47-28></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[error]&quot;</span><span class=p>,</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error&quot;</span><span class=p>),</span> <span class=n>event</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error_type&quot;</span><span class=p>))</span>
</span><span id=__span-47-29><a id=__codelineno-47-29 name=__codelineno-47-29 href=#__codelineno-47-29></a>
</span><span id=__span-47-30><a id=__codelineno-47-30 name=__codelineno-47-30 href=#__codelineno-47-30></a>            <span class=k>elif</span> <span class=n>etype</span> <span class=o>==</span> <span class=s2>&quot;finish&quot;</span><span class=p>:</span>
</span><span id=__span-47-31><a id=__codelineno-47-31 name=__codelineno-47-31 href=#__codelineno-47-31></a>                <span class=n>result</span> <span class=o>=</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;translate_result&quot;</span><span class=p>]</span>
</span><span id=__span-47-32><a id=__codelineno-47-32 name=__codelineno-47-32 href=#__codelineno-47-32></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Done in&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;total_seconds&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span> <span class=s2>&quot;s&quot;</span><span class=p>)</span>
</span><span id=__span-47-33><a id=__codelineno-47-33 name=__codelineno-47-33 href=#__codelineno-47-33></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Mono:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;mono_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-47-34><a id=__codelineno-47-34 name=__codelineno-47-34 href=#__codelineno-47-34></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Dual:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;dual_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-47-35><a id=__codelineno-47-35 name=__codelineno-47-35 href=#__codelineno-47-35></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;No-watermark Mono:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;no_watermark_mono_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-47-36><a id=__codelineno-47-36 name=__codelineno-47-36 href=#__codelineno-47-36></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;No-watermark Dual:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;no_watermark_dual_pdf_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-47-37><a id=__codelineno-47-37 name=__codelineno-47-37 href=#__codelineno-47-37></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Glossary:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;auto_extracted_glossary_path&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-47-38><a id=__codelineno-47-38 name=__codelineno-47-38 href=#__codelineno-47-38></a>                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Peak memory:&quot;</span><span class=p>,</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=s2>&quot;peak_memory_usage&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>))</span>
</span><span id=__span-47-39><a id=__codelineno-47-39 name=__codelineno-47-39 href=#__codelineno-47-39></a>                <span class=k>break</span>
</span><span id=__span-47-40><a id=__codelineno-47-40 name=__codelineno-47-40 href=#__codelineno-47-40></a>
</span><span id=__span-47-41><a id=__codelineno-47-41 name=__codelineno-47-41 href=#__codelineno-47-41></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span><span id=__span-47-42><a id=__codelineno-47-42 name=__codelineno-47-42 href=#__codelineno-47-42></a>        <span class=c1># Catch exceptions raised by the stream after an error event</span>
</span><span id=__span-47-43><a id=__codelineno-47-43 name=__codelineno-47-43 href=#__codelineno-47-43></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation failed:&quot;</span><span class=p>,</span> <span class=n>exc</span><span class=p>)</span>
</span><span id=__span-47-44><a id=__codelineno-47-44 name=__codelineno-47-44 href=#__codelineno-47-44></a>
</span><span id=__span-47-45><a id=__codelineno-47-45 name=__codelineno-47-45 href=#__codelineno-47-45></a><span class=c1># asyncio.run(translate_one(settings, &quot;/path/to/file.pdf&quot;))</span>
</span></code></pre></div></p> <p>and Refund Policy</p> <p><strong>Last updated: 2025-01-01</strong></p> <p>Thank you for using <strong>pdf2zh</strong>. This Cancellation and Refund Policy outlines our guidelines regarding cancellations and refunds for services provided through our platform. By using our services, you agree to this policy.</p> <h4 id=1-cancellation-policy>1. Cancellation Policy</h4> <ul> <li><strong>Free Services</strong>: Our basic translation services are provided free of charge. You may discontinue use at any time without any cancellation process.</li> <li><strong>Paid Services</strong>: For any premium or paid features, you may cancel your subscription at any time through your account settings. Cancellation will take effect at the end of your current billing cycle.</li> </ul> <h4 id=2-refund-policy>2. Refund Policy</h4> <ul> <li><strong>Free Services</strong>: Since our basic services are free, no refunds are applicable.</li> <li><strong>Paid Services</strong>:<ul> <li>We offer refunds for paid services within <strong>7 days</strong> of purchase if you are dissatisfied with the service.</li> <li>To request a refund, please contact us at <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a> with your transaction details.</li> <li>Refunds will be processed within <strong>14 business days</strong> after approval.</li> </ul> </li> </ul> <h4 id=3-changes-to-this-policy>3. Changes to This Policy</h4> <p>We may update this Cancellation and Refund Policy from time to time. Any changes will be posted on this page with an updated "Last updated" date.</p> <h4 id=4-contact-us>4. Contact Us</h4> <p>If you have any questions about this policy, please contact us at <a href=mailto:support@pdf2zh.com>support@pdf2zh.com</a>.</p> <hr> <h3 id=target-language>TARGET LANGUAGE</h3> <p>es The stream will be closed, and the translation process will be terminated.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>    <span class=c1># Create the async generator</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>    <span class=n>stream</span> <span class=o>=</span> <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>        <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a>        <span class=n>output_path</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span>
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a>    <span class=p>)</span>
</span><span id=__span-48-12><a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a>
</span><span id=__span-48-13><a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>    <span class=c1># Iterate through the stream</span>
</span><span id=__span-48-14><a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-48-15><a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>progress</span> <span class=ow>in</span> <span class=n>stream</span><span class=p>:</span>
</span><span id=__span-48-16><a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>progress</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-48-17><a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a>            <span class=k>if</span> <span class=n>progress</span> <span class=o>&gt;</span> <span class=mf>0.5</span><span class=p>:</span>
</span><span id=__span-48-18><a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a>                <span class=c1># Cancel the stream when progress exceeds 50%</span>
</span><span id=__span-48-19><a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a>                <span class=k>await</span> <span class=n>stream</span><span class=o>.</span><span class=n>aclose</span><span class=p>()</span>
</span><span id=__span-48-20><a id=__codelineno-48-20 name=__codelineno-48-20 href=#__codelineno-48-20></a>                <span class=k>break</span>
</span><span id=__span-48-21><a id=__codelineno-48-21 name=__codelineno-48-21 href=#__codelineno-48-21></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-48-22><a id=__codelineno-48-22 name=__codelineno-48-22 href=#__codelineno-48-22></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Translation was cancelled&quot;</span><span class=p>)</span>
</span><span id=__span-48-23><a id=__codelineno-48-23 name=__codelineno-48-23 href=#__codelineno-48-23></a>
</span><span id=__span-48-24><a id=__codelineno-48-24 name=__codelineno-48-24 href=#__codelineno-48-24></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notes_3>Notes</h3> <ul> <li>When you cancel the stream, the underlying translation process is terminated.</li> <li>Any partially translated output will not be saved.</li> <li>The cancellation is graceful - the stream is closed and resources are cleaned up.</li> </ul> <hr> <h3 id=translation-result_11>TRANSLATION RESULT</h3> <p>Puedes cancelar la tarea que consume el flujo. La cancelación se propaga al proceso de traducción subyacente. El flujo se cerrará y el proceso de traducción se terminará.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>    <span class=c1># Crear el generador asíncrono</span>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>    <span class=n>stream</span> <span class=o>=</span> <span class=n>do_translate_async_stream</span><span class=p>(</span>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a>        <span class=n>file_path</span><span class=o>=</span><span class=s2>&quot;input.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a>        <span class=n>target_language</span><span class=o>=</span><span class=s2>&quot;zh&quot;</span><span class=p>,</span>
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a>        <span class=n>output_path</span><span class=o>=</span><span class=s2>&quot;output.pdf&quot;</span><span class=p>,</span>
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a>        <span class=n>api_key</span><span class=o>=</span><span class=s2>&quot;your-api-key&quot;</span>
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a>    <span class=p>)</span>
</span><span id=__span-49-12><a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a>
</span><span id=__span-49-13><a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a>    <span class=c1># Iterar a través del flujo</span>
</span><span id=__span-49-14><a id=__codelineno-49-14 name=__codelineno-49-14 href=#__codelineno-49-14></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-49-15><a id=__codelineno-49-15 name=__codelineno-49-15 href=#__codelineno-49-15></a>        <span class=k>async</span> <span class=k>for</span> <span class=n>progress</span> <span class=ow>in</span> <span class=n>stream</span><span class=p>:</span>
</span><span id=__span-49-16><a id=__codelineno-49-16 name=__codelineno-49-16 href=#__codelineno-49-16></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>progress</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-49-17><a id=__codelineno-49-17 name=__codelineno-49-17 href=#__codelineno-49-17></a>            <span class=k>if</span> <span class=n>progress</span> <span class=o>&gt;</span> <span class=mf>0.5</span><span class=p>:</span>
</span><span id=__span-49-18><a id=__codelineno-49-18 name=__codelineno-49-18 href=#__codelineno-49-18></a>                <span class=c1># Cancelar el flujo cuando el progreso exceda el 50%</span>
</span><span id=__span-49-19><a id=__codelineno-49-19 name=__codelineno-49-19 href=#__codelineno-49-19></a>                <span class=k>await</span> <span class=n>stream</span><span class=o>.</span><span class=n>aclose</span><span class=p>()</span>
</span><span id=__span-49-20><a id=__codelineno-49-20 name=__codelineno-49-20 href=#__codelineno-49-20></a>                <span class=k>break</span>
</span><span id=__span-49-21><a id=__codelineno-49-21 name=__codelineno-49-21 href=#__codelineno-49-21></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-49-22><a id=__codelineno-49-22 name=__codelineno-49-22 href=#__codelineno-49-22></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;La traducción fue cancelada&quot;</span><span class=p>)</span>
</span><span id=__span-49-23><a id=__codelineno-49-23 name=__codelineno-49-23 href=#__codelineno-49-23></a>
</span><span id=__span-49-24><a id=__codelineno-49-24 name=__codelineno-49-24 href=#__codelineno-49-24></a><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h3 id=notas_3>Notas</h3> <ul> <li>Cuando cancelas el flujo, el proceso de traducción subyacente se termina.</li> <li>Cualquier salida traducida parcialmente no se guardará.</li> <li>La cancelación es elegante: el flujo se cierra y los recursos se liberan.</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh_next.high_level</span><span class=w> </span><span class=kn>import</span> <span class=n>do_translate_async_stream</span>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>cancellable</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>    <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>_consume</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>))</span>
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>1.0</span><span class=p>)</span>  <span class=c1># let it start</span>
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a>    <span class=n>task</span><span class=o>.</span><span class=n>cancel</span><span class=p>()</span>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a>        <span class=k>await</span> <span class=n>task</span>
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a>    <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>CancelledError</span><span class=p>:</span>
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Cancelled&quot;</span><span class=p>)</span>
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a>
</span><span id=__span-50-13><a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>_consume</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-50-14><a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>do_translate_async_stream</span><span class=p>(</span><span class=n>settings</span><span class=p>,</span> <span class=n>pdf</span><span class=p>):</span>
</span><span id=__span-50-15><a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;finish&quot;</span><span class=p>:</span>
</span><span id=__span-50-16><a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a>            <span class=k>break</span>
</span></code></pre></div> <p>The following examples show how to use the <code>EventShape</code> class to define different shapes for events.</p> <h4 id=example-1-rectangle>Example 1: Rectangle</h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=c1># Create a rectangle shape</span>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=n>rect_shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a>    <span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span>
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a>    <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a>    <span class=n>y</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span>
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a>    <span class=n>width</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-51-9><a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a>    <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-51-10><a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a>    <span class=n>color</span><span class=o>=</span><span class=s2>&quot;blue&quot;</span>
</span><span id=__span-51-11><a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a><span class=p>)</span>
</span></code></pre></div> <h4 id=example-2-circle>Example 2: Circle</h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=c1># Create a circle shape</span>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=n>circle_shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a>    <span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;circle&quot;</span><span class=p>,</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a>    <span class=n>x</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a>    <span class=n>y</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a>    <span class=n>radius</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a>    <span class=n>color</span><span class=o>=</span><span class=s2>&quot;red&quot;</span>
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=p>)</span>
</span></code></pre></div> <h4 id=example-3-custom-path>Example 3: Custom Path</h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=c1># Create a custom path shape</span>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=n>path_shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a>    <span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;path&quot;</span><span class=p>,</span>
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a>    <span class=n>path_data</span><span class=o>=</span><span class=s2>&quot;M10 10 L90 10 L50 90 Z&quot;</span><span class=p>,</span>  <span class=c1># Triangle</span>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a>    <span class=n>color</span><span class=o>=</span><span class=s2>&quot;green&quot;</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=p>)</span>
</span></code></pre></div> <h3 id=event-shape-properties>Event Shape Properties</h3> <p>Each <code>EventShape</code> has the following properties:</p> <ul> <li><code>shape_type</code>: The type of shape ("rectangle", "circle", "path")</li> <li><code>x</code>: X-coordinate position (for rectangle and circle)</li> <li><code>y</code>: Y-coordinate position (for rectangle and circle)</li> <li><code>width</code>: Width (for rectangle)</li> <li><code>height</code>: Height (for rectangle)</li> <li><code>radius</code>: Radius (for circle)</li> <li><code>path_data</code>: SVG path data (for custom paths)</li> <li><code>color</code>: Fill color of the shape</li> </ul> <h3 id=usage-in-events>Usage in Events</h3> <p>Event shapes can be used when creating events to define their visual representation:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>Event</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=c1># Create an event with a custom shape</span>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a><span class=n>event</span> <span class=o>=</span> <span class=n>Event</span><span class=p>(</span>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;custom_event&quot;</span><span class=p>,</span>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>    <span class=n>shape</span><span class=o>=</span><span class=n>circle_shape</span><span class=p>,</span>  <span class=c1># Use the circle shape defined earlier</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>    <span class=n>trigger</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Event triggered!&quot;</span><span class=p>)</span>
</span><span id=__span-54-8><a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a><span class=p>)</span>
</span></code></pre></div> <h3 id=dynamic-shape-creation>Dynamic Shape Creation</h3> <p>You can also create shapes dynamically based on conditions:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=k>def</span><span class=w> </span><span class=nf>create_shape_based_on_condition</span><span class=p>(</span><span class=n>condition</span><span class=p>):</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a>    <span class=k>if</span> <span class=n>condition</span> <span class=o>==</span> <span class=s2>&quot;rectangle&quot;</span><span class=p>:</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>        <span class=k>return</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>        <span class=k>return</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;circle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>radius</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span></code></pre></div> <h3 id=shape-animation>Shape Animation</h3> <p>Event shapes can be animated by modifying their properties over time:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=c1># Animate a shape moving across the screen</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=n>shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s2>&quot;blue&quot;</span><span class=p>)</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>):</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a>    <span class=n>shape</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>i</span>  <span class=c1># Move the shape horizontally</span>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># Wait a bit between movements</span>
</span></code></pre></div> <h3 id=multiple-shapes-for-one-event>Multiple Shapes for One Event</h3> <p>An event can have multiple shapes by using shape groups:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShapeGroup</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=c1># Create multiple shapes</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=n>shape1</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=n>shape2</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;circle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>70</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>70</span><span class=p>,</span> <span class=n>radius</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=c1># Create a shape group</span>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=n>shape_group</span> <span class=o>=</span> <span class=n>EventShapeGroup</span><span class=p>(</span><span class=n>shapes</span><span class=o>=</span><span class=p>[</span><span class=n>shape1</span><span class=p>,</span> <span class=n>shape2</span><span class=p>])</span>
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>
</span><span id=__span-57-10><a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a><span class=c1># Use the shape group in an event</span>
</span><span id=__span-57-11><a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=n>event</span> <span class=o>=</span> <span class=n>Event</span><span class=p>(</span>
</span><span id=__span-57-12><a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;multi_shape_event&quot;</span><span class=p>,</span>
</span><span id=__span-57-13><a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>    <span class=n>shape</span><span class=o>=</span><span class=n>shape_group</span><span class=p>,</span>
</span><span id=__span-57-14><a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a>    <span class=n>trigger</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Multi-shape event triggered!&quot;</span><span class=p>)</span>
</span><span id=__span-57-15><a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a><span class=p>)</span>
</span></code></pre></div> <h3 id=shape-visibility>Shape Visibility</h3> <p>Control shape visibility using the <code>visible</code> property:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=n>shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=c1># Make the shape invisible</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=n>shape</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-58-5><a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a>
</span><span id=__span-58-6><a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=c1># Later, make it visible again</span>
</span><span id=__span-58-7><a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=n>shape</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>True</span>
</span></code></pre></div> <h3 id=shape-interaction>Shape Interaction</h3> <p>Shapes can respond to user interactions:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=n>shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=c1># Define what happens when the shape is clicked</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=k>def</span><span class=w> </span><span class=nf>on_shape_click</span><span class=p>():</span>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Shape clicked!&quot;</span><span class=p>)</span>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a>    <span class=n>shape</span><span class=o>.</span><span class=n>color</span> <span class=o>=</span> <span class=s2>&quot;red&quot;</span>  <span class=c1># Change color on click</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a>
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=c1># Assign the click handler</span>
</span><span id=__span-59-9><a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a><span class=n>shape</span><span class=o>.</span><span class=n>on_click</span> <span class=o>=</span> <span class=n>on_shape_click</span>
</span></code></pre></div> <h3 id=best-practices>Best Practices</h3> <ol> <li><strong>Reuse Shapes</strong>: Create shape templates and reuse them across multiple events</li> <li><strong>Keep it Simple</strong>: Use simple shapes for better performance</li> <li><strong>Consistent Styling</strong>: Maintain consistent colors and styles across related events</li> <li><strong>Test Visibility</strong>: Ensure shapes are visible against different backgrounds</li> </ol> <h3 id=common-issues>Common Issues</h3> <ul> <li><strong>Shape Not Visible</strong>: Check if the shape coordinates are within the visible area</li> <li><strong>Wrong Color Format</strong>: Use valid color names or hex codes ("#FF0000")</li> <li><strong>Performance Issues</strong>: Too many complex shapes can impact performance</li> </ul> <h3 id=see-also>See Also</h3> <ul> <li><a href=events.md>Event System Overview</a></li> <li><a href=event_class.md>Event Class Documentation</a></li> <li><a href=animation.md>Animation Guide</a></li> </ul> <hr> <h3 id=translation-result_12>TRANSLATION RESULT</h3> <h3 id=ejemplos-de-formas-de-eventos>Ejemplos de formas de eventos</h3> <p>Los siguientes ejemplos muestran cómo usar la clase <code>EventShape</code> para definir diferentes formas para eventos.</p> <h4 id=ejemplo-1-rectangulo>Ejemplo 1: Rectángulo</h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=c1># Crear una forma de rectángulo</span>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a><span class=n>rect_shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span>
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a>    <span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span>
</span><span id=__span-60-6><a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a>    <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
</span><span id=__span-60-7><a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a>    <span class=n>y</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span>
</span><span id=__span-60-8><a id=__codelineno-60-8 name=__codelineno-60-8 href=#__codelineno-60-8></a>    <span class=n>width</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-60-9><a id=__codelineno-60-9 name=__codelineno-60-9 href=#__codelineno-60-9></a>    <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-60-10><a id=__codelineno-60-10 name=__codelineno-60-10 href=#__codelineno-60-10></a>    <span class=n>color</span><span class=o>=</span><span class=s2>&quot;blue&quot;</span>
</span><span id=__span-60-11><a id=__codelineno-60-11 name=__codelineno-60-11 href=#__codelineno-60-11></a><span class=p>)</span>
</span></code></pre></div> <h4 id=ejemplo-2-circulo>Ejemplo 2: Círculo</h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=c1># Crear una forma de círculo</span>
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a><span class=n>circle_shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a>    <span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;circle&quot;</span><span class=p>,</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a>    <span class=n>x</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a>    <span class=n>y</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-61-8><a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a>    <span class=n>radius</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span>
</span><span id=__span-61-9><a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a>    <span class=n>color</span><span class=o>=</span><span class=s2>&quot;red&quot;</span>
</span><span id=__span-61-10><a id=__codelineno-61-10 name=__codelineno-61-10 href=#__codelineno-61-10></a><span class=p>)</span>
</span></code></pre></div> <h4 id=ejemplo-3-ruta-personalizada>Ejemplo 3: Ruta personalizada</h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShape</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a><span class=c1># Crear una forma de ruta personalizada</span>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=n>path_shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span>
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a>    <span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;path&quot;</span><span class=p>,</span>
</span><span id=__span-62-6><a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a>    <span class=n>path_data</span><span class=o>=</span><span class=s2>&quot;M10 10 L90 10 L50 90 Z&quot;</span><span class=p>,</span>  <span class=c1># Triángulo</span>
</span><span id=__span-62-7><a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a>    <span class=n>color</span><span class=o>=</span><span class=s2>&quot;green&quot;</span>
</span><span id=__span-62-8><a id=__codelineno-62-8 name=__codelineno-62-8 href=#__codelineno-62-8></a><span class=p>)</span>
</span></code></pre></div> <h3 id=propiedades-de-formas-de-eventos>Propiedades de formas de eventos</h3> <p>Cada <code>EventShape</code> tiene las siguientes propiedades:</p> <ul> <li><code>shape_type</code>: El tipo de forma ("rectangle", "circle", "path")</li> <li><code>x</code>: Posición de coordenada X (para rectángulo y círculo)</li> <li><code>y</code>: Posición de coordenada Y (para rectángulo y círculo)</li> <li><code>width</code>: Ancho (para rectángulo)</li> <li><code>height</code>: Altura (para rectángulo)</li> <li><code>radius</code>: Radio (para círculo)</li> <li><code>path_data</code>: Datos de ruta SVG (para rutas personalizadas)</li> <li><code>color</code>: Color de relleno de la forma</li> </ul> <h3 id=uso-en-eventos>Uso en eventos</h3> <p>Las formas de eventos se pueden usar al crear eventos para definir su representación visual:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>Event</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a><span class=c1># Crear un evento con una forma personalizada</span>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=n>event</span> <span class=o>=</span> <span class=n>Event</span><span class=p>(</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;custom_event&quot;</span><span class=p>,</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>    <span class=n>shape</span><span class=o>=</span><span class=n>circle_shape</span><span class=p>,</span>  <span class=c1># Usar la forma de círculo definida anteriormente</span>
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a>    <span class=n>trigger</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;¡Evento activado!&quot;</span><span class=p>)</span>
</span><span id=__span-63-8><a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a><span class=p>)</span>
</span></code></pre></div> <h3 id=creacion-dinamica-de-formas>Creación dinámica de formas</h3> <p>También puedes crear formas dinámicamente según condiciones:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=k>def</span><span class=w> </span><span class=nf>create_shape_based_on_condition</span><span class=p>(</span><span class=n>condition</span><span class=p>):</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a>    <span class=k>if</span> <span class=n>condition</span> <span class=o>==</span> <span class=s2>&quot;rectangle&quot;</span><span class=p>:</span>
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>        <span class=k>return</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-64-5><a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a>        <span class=k>return</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;circle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>radius</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span></code></pre></div> <h3 id=animacion-de-formas>Animación de formas</h3> <p>Las formas de eventos se pueden animar modificando sus propiedades con el tiempo:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a>
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a><span class=c1># Animar una forma moviéndose por la pantalla</span>
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=n>shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s2>&quot;blue&quot;</span><span class=p>)</span>
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a>
</span><span id=__span-65-6><a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>):</span>
</span><span id=__span-65-7><a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a>    <span class=n>shape</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>i</span>  <span class=c1># Mover la forma horizontalmente</span>
</span><span id=__span-65-8><a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># Esperar un poco entre movimientos</span>
</span></code></pre></div> <h3 id=multiples-formas-para-un-evento>Múltiples formas para un evento</h3> <p>Un evento puede tener múltiples formas usando grupos de formas:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pdf2zh.events</span><span class=w> </span><span class=kn>import</span> <span class=n>EventShapeGroup</span>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>
</span><span id=__span-66-3><a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a><span class=c1># Crear múltiples formas</span>
</span><span id=__span-66-4><a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=n>shape1</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-66-5><a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=n>shape2</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;circle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>70</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>70</span><span class=p>,</span> <span class=n>radius</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span><span id=__span-66-6><a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a>
</span><span id=__span-66-7><a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a><span class=c1># Crear un grupo de formas</span>
</span><span id=__span-66-8><a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a><span class=n>shape_group</span> <span class=o>=</span> <span class=n>EventShapeGroup</span><span class=p>(</span><span class=n>shapes</span><span class=o>=</span><span class=p>[</span><span class=n>shape1</span><span class=p>,</span> <span class=n>shape2</span><span class=p>])</span>
</span><span id=__span-66-9><a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a>
</span><span id=__span-66-10><a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a><span class=c1># Usar el grupo de formas en un evento</span>
</span><span id=__span-66-11><a id=__codelineno-66-11 name=__codelineno-66-11 href=#__codelineno-66-11></a><span class=n>event</span> <span class=o>=</span> <span class=n>Event</span><span class=p>(</span>
</span><span id=__span-66-12><a id=__codelineno-66-12 name=__codelineno-66-12 href=#__codelineno-66-12></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;multi_shape_event&quot;</span><span class=p>,</span>
</span><span id=__span-66-13><a id=__codelineno-66-13 name=__codelineno-66-13 href=#__codelineno-66-13></a>    <span class=n>shape</span><span class=o>=</span><span class=n>shape_group</span><span class=p>,</span>
</span><span id=__span-66-14><a id=__codelineno-66-14 name=__codelineno-66-14 href=#__codelineno-66-14></a>    <span class=n>trigger</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;¡Evento de múltiples formas activado!&quot;</span><span class=p>)</span>
</span><span id=__span-66-15><a id=__codelineno-66-15 name=__codelineno-66-15 href=#__codelineno-66-15></a><span class=p>)</span>
</span></code></pre></div> <h3 id=visibilidad-de-formas>Visibilidad de formas</h3> <p>Controlar la visibilidad de formas usando la propiedad <code>visible</code>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=n>shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a>
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a><span class=c1># Hacer la forma invisible</span>
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=n>shape</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a><span class=c1># Después, hacerla visible nuevamente</span>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a><span class=n>shape</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=kc>True</span>
</span></code></pre></div> <h3 id=interaccion-de-formas>Interacción de formas</h3> <p>Las formas pueden responder a interacciones del usuario:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=n>shape</span> <span class=o>=</span> <span class=n>EventShape</span><span class=p>(</span><span class=n>shape_type</span><span class=o>=</span><span class=s2>&quot;rectangle&quot;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a><span class=c1># Definir qué pasa cuando se hace clic en la forma</span>
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=k>def</span><span class=w> </span><span class=nf>on_shape_click</span><span class=p>():</span>
</span><span id=__span-68-5><a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;¡Forma clickeada!&quot;</span><span class=p>)</span>
</span><span id=__span-68-6><a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>    <span class=n>shape</span><span class=o>.</span><span class=n>color</span> <span class=o>=</span> <span class=s2>&quot;red&quot;</span>  <span class=c1># Cambiar color al hacer clic</span>
</span><span id=__span-68-7><a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a>
</span><span id=__span-68-8><a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a><span class=c1># Asignar el manejador de clic</span>
</span><span id=__span-68-9><a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a><span class=n>shape</span><span class=o>.</span><span class=n>on_click</span> <span class=o>=</span> <span class=n>on_shape_click</span>
</span></code></pre></div> <h3 id=mejores-practicas>Mejores prácticas</h3> <ol> <li><strong>Reutilizar formas</strong>: Crear plantillas de formas y reutilizarlas en múltiples eventos</li> <li><strong>Mantenerlo simple</strong>: Usar formas simples para mejor rendimiento</li> <li><strong>Estilo consistente</strong>: Mantener colores y estilos consistentes en eventos relacionados</li> <li><strong>Probar visibilidad</strong>: Asegurar que las formas sean visibles contra diferentes fondos</li> </ol> <h3 id=problemas-comunes>Problemas comunes</h3> <ul> <li><strong>Forma no visible</strong>: Verificar si las coordenadas de la forma están dentro del área visible</li> <li><strong>Formato de color incorrecto</strong>: Usar nombres de color válidos o códigos hexadecimales ("#FF0000")</li> <li><strong>Problemas de rendimiento</strong>: Demasiadas formas complejas pueden afectar el rendimiento</li> </ul> <h3 id=ver-tambien>Ver también</h3> <ul> <li><a href=events.md>Resumen del sistema de eventos</a></li> <li><a href=event_class.md>Documentación de la clase Event</a></li> <li><a href=animation.md>Guía de animación</a> This is an example of a stage summary event that occurs at the end of each translation stage.</li> </ul> <div class="language-json highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=p>{</span>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=w>        </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;translation&quot;</span><span class=p>,</span>
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-69-6><a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a><span class=w>        </span><span class=nt>&quot;metrics&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-69-7><a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a><span class=w>            </span><span class=nt>&quot;total_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-69-8><a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a><span class=w>            </span><span class=nt>&quot;processed_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-69-9><a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a><span class=w>            </span><span class=nt>&quot;successful_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>95</span><span class=p>,</span>
</span><span id=__span-69-10><a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a><span class=w>            </span><span class=nt>&quot;failed_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-69-11><a id=__codelineno-69-11 name=__codelineno-69-11 href=#__codelineno-69-11></a><span class=w>            </span><span class=nt>&quot;total_characters&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>50000</span><span class=p>,</span>
</span><span id=__span-69-12><a id=__codelineno-69-12 name=__codelineno-69-12 href=#__codelineno-69-12></a><span class=w>            </span><span class=nt>&quot;translated_characters&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>49500</span>
</span><span id=__span-69-13><a id=__codelineno-69-13 name=__codelineno-69-13 href=#__codelineno-69-13></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-69-14><a id=__codelineno-69-14 name=__codelineno-69-14 href=#__codelineno-69-14></a><span class=w>        </span><span class=nt>&quot;duration&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>120.5</span><span class=p>,</span>
</span><span id=__span-69-15><a id=__codelineno-69-15 name=__codelineno-69-15 href=#__codelineno-69-15></a><span class=w>        </span><span class=nt>&quot;start_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-69-16><a id=__codelineno-69-16 name=__codelineno-69-16 href=#__codelineno-69-16></a><span class=w>        </span><span class=nt>&quot;end_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:02:00Z&quot;</span>
</span><span id=__span-69-17><a id=__codelineno-69-17 name=__codelineno-69-17 href=#__codelineno-69-17></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-69-18><a id=__codelineno-69-18 name=__codelineno-69-18 href=#__codelineno-69-18></a><span class=p>}</span>
</span></code></pre></div> <h3 id=event-details>Event Details</h3> <ul> <li><strong>type</strong>: Always "stage_summary" for stage summary events.</li> <li><strong>data</strong>: Contains the summary information for the stage.<ul> <li><strong>stage</strong>: The name of the stage (e.g., "translation", "ocr", "formatting").</li> <li><strong>status</strong>: The status of the stage ("completed", "failed", "cancelled").</li> <li><strong>metrics</strong>: Various metrics about the stage's execution.<ul> <li><strong>total_pages</strong>: The total number of pages in the document.</li> <li><strong>processed_pages</strong>: The number of pages processed in this stage.</li> <li><strong>successful_pages</strong>: The number of pages successfully processed.</li> <li><strong>failed_pages</strong>: The number of pages that failed processing.</li> <li><strong>total_characters</strong>: The total number of characters in the document.</li> <li><strong>translated_characters</strong>: The number of characters translated.</li> </ul> </li> <li><strong>duration</strong>: The duration of the stage in seconds.</li> <li><strong>start_time</strong>: The start time of the stage in ISO 8601 format.</li> <li><strong>end_time</strong>: The end time of the stage in ISO 8601 format.</li> </ul> </li> </ul> <h3 id=example-usage>Example Usage</h3> <p>Clients can use stage summary events to:</p> <ol> <li>Track the progress of each stage in the translation process.</li> <li>Display statistics about the translation to the user.</li> <li>Identify stages that are taking longer than expected or failing frequently.</li> <li>Generate reports on translation performance.</li> </ol> <h3 id=error-handling_1>Error Handling</h3> <p>If a stage fails, the status will be "failed", and the metrics will reflect the number of failed pages. The event may also include an error message in the <code>data</code> field if available.</p> <h3 id=related-events>Related Events</h3> <ul> <li>Stage start event: Indicates the start of a stage.</li> <li>Stage progress event: Provides incremental progress updates during a stage.</li> <li>Stage end event: Indicates the end of a stage (success or failure).</li> </ul> <hr> <h3 id=translation-result_13>TRANSLATION RESULT</h3> <p>Evento de resumen de etapa (ejemplo): Este es un ejemplo de un evento de resumen de etapa que ocurre al final de cada etapa de traducción.</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=p>{</span>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-70-3><a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-70-4><a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=w>        </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;translation&quot;</span><span class=p>,</span>
</span><span id=__span-70-5><a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-70-6><a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a><span class=w>        </span><span class=nt>&quot;metrics&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-70-7><a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a><span class=w>            </span><span class=nt>&quot;total_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-70-8><a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a><span class=w>            </span><span class=nt>&quot;processed_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-70-9><a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a><span class=w>            </span><span class=nt>&quot;successful_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>95</span><span class=p>,</span>
</span><span id=__span-70-10><a id=__codelineno-70-10 name=__codelineno-70-10 href=#__codelineno-70-10></a><span class=w>            </span><span class=nt>&quot;failed_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-70-11><a id=__codelineno-70-11 name=__codelineno-70-11 href=#__codelineno-70-11></a><span class=w>            </span><span class=nt>&quot;total_characters&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>50000</span><span class=p>,</span>
</span><span id=__span-70-12><a id=__codelineno-70-12 name=__codelineno-70-12 href=#__codelineno-70-12></a><span class=w>            </span><span class=nt>&quot;translated_characters&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>49500</span>
</span><span id=__span-70-13><a id=__codelineno-70-13 name=__codelineno-70-13 href=#__codelineno-70-13></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-70-14><a id=__codelineno-70-14 name=__codelineno-70-14 href=#__codelineno-70-14></a><span class=w>        </span><span class=nt>&quot;duration&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>120.5</span><span class=p>,</span>
</span><span id=__span-70-15><a id=__codelineno-70-15 name=__codelineno-70-15 href=#__codelineno-70-15></a><span class=w>        </span><span class=nt>&quot;start_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-70-16><a id=__codelineno-70-16 name=__codelineno-70-16 href=#__codelineno-70-16></a><span class=w>        </span><span class=nt>&quot;end_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:02:00Z&quot;</span>
</span><span id=__span-70-17><a id=__codelineno-70-17 name=__codelineno-70-17 href=#__codelineno-70-17></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-70-18><a id=__codelineno-70-18 name=__codelineno-70-18 href=#__codelineno-70-18></a><span class=p>}</span>
</span></code></pre></div> <h3 id=detalles-del-evento>Detalles del evento</h3> <ul> <li><strong>type</strong>: Siempre "stage_summary" para eventos de resumen de etapa.</li> <li><strong>data</strong>: Contiene la información de resumen de la etapa.<ul> <li><strong>stage</strong>: El nombre de la etapa (por ejemplo, "translation", "ocr", "formatting").</li> <li><strong>status</strong>: El estado de la etapa ("completed", "failed", "cancelled").</li> <li><strong>metrics</strong>: Varias métricas sobre la ejecución de la etapa.<ul> <li><strong>total_pages</strong>: El número total de páginas en el documento.</li> <li><strong>processed_pages</strong>: El número de páginas procesadas en esta etapa.</li> <li><strong>successful_pages</strong>: El número de páginas procesadas exitosamente.</li> <li><strong>failed_pages</strong>: El número de páginas que fallaron en el procesamiento.</li> <li><strong>total_characters</strong>: El número total de caracteres en el documento.</li> <li><strong>translated_characters</strong>: El número de caracteres traducidos.</li> </ul> </li> <li><strong>duration</strong>: La duración de la etapa en segundos.</li> <li><strong>start_time</strong>: La hora de inicio de la etapa en formato ISO 8601.</li> <li><strong>end_time</strong>: La hora de finalización de la etapa en formato ISO 8601.</li> </ul> </li> </ul> <h3 id=ejemplo-de-uso>Ejemplo de uso</h3> <p>Los clientes pueden usar eventos de resumen de etapa para:</p> <ol> <li>Seguir el progreso de cada etapa en el proceso de traducción.</li> <li>Mostrar estadísticas sobre la traducción al usuario.</li> <li>Identificar etapas que están tomando más tiempo de lo esperado o fallando frecuentemente.</li> <li>Generar reportes sobre el rendimiento de la traducción.</li> </ol> <h3 id=manejo-de-errores_1>Manejo de errores</h3> <p>Si una etapa falla, el estado será "failed", y las métricas reflejarán el número de páginas fallidas. El evento también puede incluir un mensaje de error en el campo <code>data</code> si está disponible.</p> <h3 id=eventos-relacionados>Eventos relacionados</h3> <ul> <li>Evento de inicio de etapa: Indica el inicio de una etapa.</li> <li>Evento de progreso de etapa: Proporciona actualizaciones de progreso incremental durante una etapa.</li> <li>Evento de fin de etapa: Indica el final de una etapa (éxito o fallo). <div class="language-json highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=p>{</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stage_summary&quot;</span><span class=p>,</span>
</span><span id=__span-71-3><a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>  </span><span class=nt>&quot;stages&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-71-4><a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Parse PDF and Create Intermediate Representation&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1086</span><span class=p>},</span>
</span><span id=__span-71-5><a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DetectScannedFile&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0188</span><span class=p>},</span>
</span><span id=__span-71-6><a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Parse Page Layout&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;percent&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.1079</span><span class=p>}</span>
</span><span id=__span-71-7><a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=w>    </span><span class=c1>// ... more stages ...</span>
</span><span id=__span-71-8><a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=w>  </span><span class=p>],</span>
</span><span id=__span-71-9><a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=w>  </span><span class=nt>&quot;part_index&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-71-10><a id=__codelineno-71-10 name=__codelineno-71-10 href=#__codelineno-71-10></a><span class=w>  </span><span class=nt>&quot;total_parts&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-71-11><a id=__codelineno-71-11 name=__codelineno-71-11 href=#__codelineno-71-11></a><span class=p>}</span>
</span></code></pre></div></li> </ul> <p>json { "type": "progress", "data": { "progress": 0.5, "message": "Translating page 10 of 20" } } <div class="language-text highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a>Result event (example): 
</span><span id=__span-72-2><a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a>```json
</span><span id=__span-72-3><a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a>{
</span><span id=__span-72-4><a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a>    &quot;type&quot;: &quot;result&quot;,
</span><span id=__span-72-5><a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a>    &quot;data&quot;: {
</span><span id=__span-72-6><a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a>        &quot;result&quot;: &quot;The translated text&quot;
</span><span id=__span-72-7><a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a>    }
</span><span id=__span-72-8><a id=__codelineno-72-8 name=__codelineno-72-8 href=#__codelineno-72-8></a>}
</span></code></pre></div></p> <p>Error event (example): <div class="language-json highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=p>{</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-73-3><a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-73-4><a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a><span class=w>        </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;An error occurred&quot;</span>
</span><span id=__span-73-5><a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-73-6><a id=__codelineno-73-6 name=__codelineno-73-6 href=#__codelineno-73-6></a><span class=p>}</span>
</span></code></pre></div></p> <hr> <h3 id=translation-result_14>TRANSLATION RESULT</h3> <p>Evento de progreso (ejemplo): <div class="language-json highlight"><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=p>{</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress&quot;</span><span class=p>,</span>
</span><span id=__span-74-3><a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-74-4><a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a><span class=w>        </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-74-5><a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a><span class=w>        </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Traduciendo página 10 de 20&quot;</span>
</span><span id=__span-74-6><a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-74-7><a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a><span class=p>}</span>
</span></code></pre></div></p> <p>Evento de resultado (ejemplo): <div class="language-json highlight"><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=p>{</span>
</span><span id=__span-75-2><a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;result&quot;</span><span class=p>,</span>
</span><span id=__span-75-3><a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-75-4><a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a><span class=w>        </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;El texto traducido&quot;</span>
</span><span id=__span-75-5><a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-75-6><a id=__codelineno-75-6 name=__codelineno-75-6 href=#__codelineno-75-6></a><span class=p>}</span>
</span></code></pre></div></p> <p>Evento de error (ejemplo): <div class="language-json highlight"><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=p>{</span>
</span><span id=__span-76-2><a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-76-3><a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-76-4><a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a><span class=w>        </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Ocurrió un error&quot;</span>
</span><span id=__span-76-5><a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-76-6><a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a><span class=p>}</span>
</span><span id=__span-76-7><a id=__codelineno-76-7 name=__codelineno-76-7 href=#__codelineno-76-7></a><span class=err>```jso</span><span class=kc>n</span>
</span><span id=__span-76-8><a id=__codelineno-76-8 name=__codelineno-76-8 href=#__codelineno-76-8></a><span class=p>{</span>
</span><span id=__span-76-9><a id=__codelineno-76-9 name=__codelineno-76-9 href=#__codelineno-76-9></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;progress_update&quot;</span><span class=p>,</span>
</span><span id=__span-76-10><a id=__codelineno-76-10 name=__codelineno-76-10 href=#__codelineno-76-10></a><span class=w>  </span><span class=nt>&quot;stage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Translate Paragraphs&quot;</span><span class=p>,</span>
</span><span id=__span-76-11><a id=__codelineno-76-11 name=__codelineno-76-11 href=#__codelineno-76-11></a><span class=w>  </span><span class=nt>&quot;stage_progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>2.04</span><span class=p>,</span>
</span><span id=__span-76-12><a id=__codelineno-76-12 name=__codelineno-76-12 href=#__codelineno-76-12></a><span class=w>  </span><span class=nt>&quot;stage_current&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-76-13><a id=__codelineno-76-13 name=__codelineno-76-13 href=#__codelineno-76-13></a><span class=w>  </span><span class=nt>&quot;stage_total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>49</span><span class=p>,</span>
</span><span id=__span-76-14><a id=__codelineno-76-14 name=__codelineno-76-14 href=#__codelineno-76-14></a><span class=w>  </span><span class=nt>&quot;overall_progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>53.44</span><span class=p>,</span>
</span><span id=__span-76-15><a id=__codelineno-76-15 name=__codelineno-76-15 href=#__codelineno-76-15></a><span class=w>  </span><span class=nt>&quot;part_index&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-76-16><a id=__codelineno-76-16 name=__codelineno-76-16 href=#__codelineno-76-16></a><span class=w>  </span><span class=nt>&quot;total_parts&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-76-17><a id=__codelineno-76-17 name=__codelineno-76-17 href=#__codelineno-76-17></a><span class=p>}</span>
</span></code></pre></div></p> <p>json { "type": "finish", "data": { "path": "/path/to/translated.pdf", "pages": 100, "translated_pages": 100, "cost": 0.0 } } <div class="language-text highlight"><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a>---
</span><span id=__span-77-2><a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a>
</span><span id=__span-77-3><a id=__codelineno-77-3 name=__codelineno-77-3 href=#__codelineno-77-3></a>### TRANSLATION RESULT
</span><span id=__span-77-4><a id=__codelineno-77-4 name=__codelineno-77-4 href=#__codelineno-77-4></a>
</span><span id=__span-77-5><a id=__codelineno-77-5 name=__codelineno-77-5 href=#__codelineno-77-5></a>Evento de finalización (ejemplo):
</span><span id=__span-77-6><a id=__codelineno-77-6 name=__codelineno-77-6 href=#__codelineno-77-6></a>
</span><span id=__span-77-7><a id=__codelineno-77-7 name=__codelineno-77-7 href=#__codelineno-77-7></a>```json
</span><span id=__span-77-8><a id=__codelineno-77-8 name=__codelineno-77-8 href=#__codelineno-77-8></a>{
</span><span id=__span-77-9><a id=__codelineno-77-9 name=__codelineno-77-9 href=#__codelineno-77-9></a>    &quot;type&quot;: &quot;finish&quot;,
</span><span id=__span-77-10><a id=__codelineno-77-10 name=__codelineno-77-10 href=#__codelineno-77-10></a>    &quot;data&quot;: {
</span><span id=__span-77-11><a id=__codelineno-77-11 name=__codelineno-77-11 href=#__codelineno-77-11></a>        &quot;path&quot;: &quot;/ruta/al/archivo/traducido.pdf&quot;,
</span><span id=__span-77-12><a id=__codelineno-77-12 name=__codelineno-77-12 href=#__codelineno-77-12></a>        &quot;pages&quot;: 100,
</span><span id=__span-77-13><a id=__codelineno-77-13 name=__codelineno-77-13 href=#__codelineno-77-13></a>        &quot;translated_pages&quot;: 100,
</span><span id=__span-77-14><a id=__codelineno-77-14 name=__codelineno-77-14 href=#__codelineno-77-14></a>        &quot;cost&quot;: 0.0
</span><span id=__span-77-15><a id=__codelineno-77-15 name=__codelineno-77-15 href=#__codelineno-77-15></a>    }
</span><span id=__span-77-16><a id=__codelineno-77-16 name=__codelineno-77-16 href=#__codelineno-77-16></a>}
</span><span id=__span-77-17><a id=__codelineno-77-17 name=__codelineno-77-17 href=#__codelineno-77-17></a>```json
</span><span id=__span-77-18><a id=__codelineno-77-18 name=__codelineno-77-18 href=#__codelineno-77-18></a>{
</span><span id=__span-77-19><a id=__codelineno-77-19 name=__codelineno-77-19 href=#__codelineno-77-19></a>  &quot;type&quot;: &quot;finish&quot;,
</span><span id=__span-77-20><a id=__codelineno-77-20 name=__codelineno-77-20 href=#__codelineno-77-20></a>  &quot;translate_result&quot;: {
</span><span id=__span-77-21><a id=__codelineno-77-21 name=__codelineno-77-21 href=#__codelineno-77-21></a>    &quot;original_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.pdf&quot;,
</span><span id=__span-77-22><a id=__codelineno-77-22 name=__codelineno-77-22 href=#__codelineno-77-22></a>    &quot;mono_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.mono.pdf&quot;,
</span><span id=__span-77-23><a id=__codelineno-77-23 name=__codelineno-77-23 href=#__codelineno-77-23></a>    &quot;dual_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.dual.pdf&quot;,
</span><span id=__span-77-24><a id=__codelineno-77-24 name=__codelineno-77-24 href=#__codelineno-77-24></a>    &quot;no_watermark_mono_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.no_watermark.zh-CN.mono.pdf&quot;,
</span><span id=__span-77-25><a id=__codelineno-77-25 name=__codelineno-77-25 href=#__codelineno-77-25></a>    &quot;no_watermark_dual_pdf_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.no_watermark.zh-CN.dual.pdf&quot;,
</span><span id=__span-77-26><a id=__codelineno-77-26 name=__codelineno-77-26 href=#__codelineno-77-26></a>    &quot;auto_extracted_glossary_path&quot;: &quot;pdf2zh_files/&lt;session&gt;/table.zh-CN.glossary.csv&quot;,
</span><span id=__span-77-27><a id=__codelineno-77-27 name=__codelineno-77-27 href=#__codelineno-77-27></a>    &quot;total_seconds&quot;: 42.83,
</span><span id=__span-77-28><a id=__codelineno-77-28 name=__codelineno-77-28 href=#__codelineno-77-28></a>    &quot;peak_memory_usage&quot;: 4651.55
</span><span id=__span-77-29><a id=__codelineno-77-29 name=__codelineno-77-29 href=#__codelineno-77-29></a>  }
</span><span id=__span-77-30><a id=__codelineno-77-30 name=__codelineno-77-30 href=#__codelineno-77-30></a>}
</span></code></pre></div></p> <p><code>{"type": "error", "data": {"error": "An error occurred"}}</code></p> <p>Progress event (example): <code>{"type": "progress", "data": {"progress": 0.5, "message": "Translating page 10 of 20"}}</code></p> <p>Result event (example): <code>{"type": "result", "data": {"result": "The translated text"}}</code></p> <hr> <h3 id=translation-result_15>TRANSLATION RESULT</h3> <p>Evento de error (ejemplo): <code>{"type": "error", "data": {"error": "An error occurred"}}</code></p> <p>Evento de progreso (ejemplo): <code>{"type": "progress", "data": {"progress": 0.5, "message": "Translating page 10 of 20"}}</code></p> <p>Evento de resultado (ejemplo): <code>{"type": "result", "data": {"result": "The translated text"}}</code> <div class="language-json highlight"><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=p>{</span>
</span><span id=__span-78-2><a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-78-3><a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Babeldoc translation error: &lt;message&gt;&quot;</span><span class=p>,</span>
</span><span id=__span-78-4><a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a><span class=w>  </span><span class=nt>&quot;error_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;BabeldocError&quot;</span><span class=p>,</span>
</span><span id=__span-78-5><a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a><span class=w>  </span><span class=nt>&quot;details&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;optional original error or traceback&gt;&quot;</span>
</span><span id=__span-78-6><a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a><span class=p>}</span>
</span></code></pre></div></p> <ul> <li><strong>Translation Quality</strong>: </li> <li>The translation quality depends on the translation service provider. </li> <li> <p>If the translation quality is not satisfactory, you can try switching the service provider by modifying the <code>translation_service</code> parameter.</p> </li> <li> <p><strong>PDF Parsing Quality</strong>:</p> </li> <li>The quality of the parsed PDF directly affects the final translation quality. </li> <li>You can adjust the <code>ocr_correct</code> parameter to optimize the PDF parsing results. </li> <li> <p>If the parsing quality is poor, you can also try using other PDF to Markdown tools (such as <a href=https://github.com/facebookresearch/nougat>nougat</a>) to convert the PDF to Markdown first, and then use this tool for translation.</p> </li> <li> <p><strong>Translation Speed</strong>:</p> </li> <li>Translation speed is mainly limited by the translation service provider. </li> <li>If you need faster translation speed, consider using a local model (such as <a href=https://ollama.com/ >Ollama</a>). </li> <li> <p>You can also adjust the <code>concurrency_limit</code> parameter to increase the number of concurrent translations, but please note that increasing concurrency may lead to a higher rate of request failures.</p> </li> <li> <p><strong>Error Handling</strong>:</p> </li> <li>If an error occurs during translation, the program will attempt to retry. </li> <li>You can adjust the <code>retry_times</code> parameter to set the number of retries. </li> <li> <p>If the error persists, please check the error message and the documentation of the corresponding translation service.</p> </li> <li> <p><strong>Other Tips</strong>:</p> </li> <li>If the translation result contains garbled characters or formatting errors, you can try adjusting the <code>md_parse_config</code> parameter to optimize the Markdown parsing settings. </li> <li>For PDFs containing mathematical formulas, it is recommended to enable the <code>math</code> option to ensure accurate translation of the formulas.</li> </ul> <hr> <h3 id=output_1>OUTPUT</h3> <h3 id=notas-y-mejores-practicas>Notas y mejores prácticas</h3> <ul> <li><strong>Calidad de la traducción</strong>:</li> <li>La calidad de la traducción depende del proveedor del servicio de traducción.</li> <li> <p>Si la calidad de la traducción no es satisfactoria, puedes intentar cambiar el proveedor del servicio modificando el parámetro <code>translation_service</code>.</p> </li> <li> <p><strong>Calidad del análisis del PDF</strong>:</p> </li> <li>La calidad del PDF analizado afecta directamente la calidad final de la traducción.</li> <li>Puedes ajustar el parámetro <code>ocr_correct</code> para optimizar los resultados del análisis del PDF.</li> <li> <p>Si la calidad del análisis es pobre, también puedes intentar usar otras herramientas de PDF a Markdown (como <a href=https://github.com/facebookresearch/nougat>nougat</a>) para convertir primero el PDF a Markdown, y luego usar esta herramienta para la traducción.</p> </li> <li> <p><strong>Velocidad de la traducción</strong>:</p> </li> <li>La velocidad de la traducción está limitada principalmente por el proveedor del servicio de traducción.</li> <li>Si necesitas una velocidad de traducción más rápida, considera usar un modelo local (como <a href=https://ollama.com/ >Ollama</a>).</li> <li> <p>También puedes ajustar el parámetro <code>concurrency_limit</code> para aumentar el número de traducciones concurrentes, pero ten en cuenta que aumentar la concurrencia puede llevar a una mayor tasa de fallos en las solicitudes.</p> </li> <li> <p><strong>Manejo de errores</strong>:</p> </li> <li>Si ocurre un error durante la traducción, el programa intentará reintentar.</li> <li>Puedes ajustar el parámetro <code>retry_times</code> para establecer el número de reintentos.</li> <li> <p>Si el error persiste, por favor verifica el mensaje de error y la documentación del servicio de traducción correspondiente.</p> </li> <li> <p><strong>Otros consejos</strong>:</p> </li> <li>Si el resultado de la traducción contiene caracteres ilegibles o errores de formato, puedes intentar ajustar el parámetro <code>md_parse_config</code> para optimizar la configuración del análisis de Markdown.</li> <li>Para PDFs que contienen fórmulas matemáticas, se recomienda habilitar la opción <code>math</code> para garantizar una traducción precisa de las fórmulas.</li> </ul> <hr> <h3 id=translation-result_16>TRANSLATION RESULT</h3> <ul> <li>Siempre maneja tanto los eventos de error como las excepciones del generador.</li> <li>Rompe el bucle en <code>finish</code> para evitar trabajo innecesario.</li> <li>Asegúrate de que el <code>archivo</code> exista y que <code>settings.validate_settings()</code> pase antes de llamar.</li> <li>Los documentos grandes pueden dividirse; usa <code>part_index/total_parts</code> y <code>overall_progress</code> para impulsar tu interfaz de usuario.</li> <li>Debounce <code>progress_update</code> si tu interfaz de usuario es sensible a actualizaciones repetidas e idénticas.</li> <li><code>report_interval</code> (SettingsModel): controla solo la tasa de emisión de eventos <code>progress_update</code>. No afecta a <code>stage_summary</code>, <code>progress_start</code>, <code>progress_end</code> o <code>finish</code>. El valor predeterminado es 0.1s y el mínimo permitido es 0.05s. Según la lógica del monitor de progreso, cuando <code>stage_total &lt;= 3</code>, las actualizaciones no son limitadas por <code>report_interval</code>.</li> </ul> <div align=right> <h6><small>Parte del contenido de esta página ha sido traducido por GPT y puede contener errores.</small></h6> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最後更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="24 de noviembre de 2025 12:48:22 UTC">24 de noviembre de 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=建立日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="24 de noviembre de 2025 12:48:22 UTC">24 de noviembre de 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=貢獻者> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg> </span> <nav> <a href=mailto:shidingbo31415@163.com>pppppop</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> 回到頂端 </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=頁腳> <a href=../../supported_languages.html class="md-footer__link md-footer__link--prev" aria-label="上一頁: Idiomas soportados"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> 上一頁 </span> <div class=md-ellipsis> Idiomas soportados </div> </div> </a> <a href=../../FAQ.html class="md-footer__link md-footer__link--next" aria-label="下一頁: Preguntas frecuentes"> <div class=md-footer__title> <span class=md-footer__direction> 下一頁 </span> <div class=md-ellipsis> Preguntas frecuentes </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/PDFMathTranslate/PDFMathTranslate-next target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/pdf2zh-next/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u8907\u88fd", "clipboard.copy": "\u8907\u88fd", "search.result.more.one": "\u6b64\u9801\u5c1a\u6709 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.more.other": "\u6b64\u9801\u5c1a\u6709 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.term.missing": "\u7f3a\u5c11\u5b57\u8a5e", "select.version": "\u9078\u64c7\u7248\u672c"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>